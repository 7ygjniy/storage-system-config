# 储能系统配置工具 V3.1 发布说明

## 📦 版本信息

**版本号**: V3.1  
**发布日期**: 2025年10月28日  
**类型**: 功能增强版本  
**前置版本**: V3.0

---

## 🎯 核心更新

### 新增2.5MW PCS配置

V3.1版本引入了2.5MW逆变升压一体舱（PCS_2_5MW），为7.5MW家族提供更精细的功率步长配置。

---

## ✨ 新增功能

### 1. 新增PCS规格

| 型号 | 额定功率 | 等效容量 | 中文名称 |
|------|---------|---------|---------|
| **PCS_2_5MW** | 2.5 MW | 0.625 MWh | 2.5MW逆变升压一体舱 |

### 2. 三种固定配置组合

#### 2h系统配置
- **组合**: 2.5MW PCS + 1个7.5MWh减6簇电池舱
- **单元功率**: 2.5 MW
- **单元容量**: 5.015 MWh
- **单元成本**: 259.44万元

#### 4h系统配置
- **组合**: 2.5MW PCS + 2个7.5MWh减6簇电池舱
- **单元功率**: 2.5 MW
- **单元容量**: 10.030 MWh
- **单元成本**: 436.86万元

#### 6h系统配置
- **组合**: 2.5MW PCS + 2个7.5MWh不减簇电池舱
- **单元功率**: 2.5 MW
- **单元容量**: 15.045 MWh
- **单元成本**: 642.47万元

### 3. 6h系统规则更新

- **V3.0**: 仅支持5MW PCS（最多4个电池舱）
- **V3.1**: 支持5MW PCS + **2.5MW PCS**（最多2个不减簇电池舱）

---

## 💡 价值与优势

### 1. 更精细的功率步长

**V3.0**:
- 功率步长: 5MW、7.5MW
- 最小配置: 5MW

**V3.1**:
- 功率步长: **2.5MW**、5MW、7.5MW
- 最小配置: **2.5MW**

### 2. 减少过配问题

#### 案例1: 7.5MW项目
| 方案 | 配置 | 实际功率 | 过配比例 | 成本 |
|------|------|---------|---------|------|
| V3.0 (5MW) | 2套5MW | 10MW | **+33%** | 1147.5万 |
| V3.1 (7.5MW) | 1套7.5MW | 7.5MW | 0% | **778.32万** |
| V3.1 (2.5MW) | 3套2.5MW | 7.5MW | 0% | **778.32万** |

**节省**: 369.18万元（32.2%）

#### 案例2: 2.5MW项目
| 方案 | 配置 | 实际功率 | 过配比例 | 成本 |
|------|------|---------|---------|------|
| V3.0 (5MW) | 1套5MW | 5MW | **+100%** | 573.75万 |
| V3.1 (2.5MW) | 1套2.5MW | 2.5MW | 0% | **259.44万** |

**节省**: 314.31万元（54.8%）

### 3. 成本优化

利用7.5MW家族的单价优势：
- 2h系统: 0.46元/Wh（vs 5MW的0.51元/Wh）
- 4h/6h系统: 0.41元/Wh（vs 5MW的0.43元/Wh）

### 4. 布局灵活性

- 更多小功率单元，便于分散布置
- 适合分期建设
- 降低单点故障影响

---

## 🎯 适用场景

### 最佳应用场景

1. **小型项目** (≤20MW)
   - 2.5MW、5MW、7.5MW、10MW、12.5MW等

2. **功率补齐**
   - 大型项目的精确功率匹配
   - 例: 47.5MW = 6×7.5MW + 1×2.5MW

3. **分期建设**
   - 初期: 2.5MW
   - 扩容: 再增加2.5MW单元

4. **成本敏感项目**
   - 预算有限的小型储能项目
   - 需要精确成本控制的场景

---

## 📊 实测效果

### 测试用例1: 2.5MW/5MWh
- **配置**: 1套2.5MW PCS
- **成本**: 259.44万元
- **电池舱**: 1个
- **评价**: ✅ 最小单元正常工作

### 测试用例2: 10MW/20MWh
- **配置**: 1套2.5MW + 1套7.5MW
- **成本**: 1037.76万元
- **电池舱**: 3个
- **评价**: ✅ 混合配置有效

### 测试用例3: 17.5MW/35MWh
- **配置**: 1套2.5MW + 2套7.5MW
- **成本**: 1816.08万元
- **电池舱**: 5个
- **评价**: ✅ 功率补齐准确

---

## 🔧 技术细节

### 1. 功率约束验证

所有2.5MW配置都满足功率约束（±1%容差）：

```
2h: 5.015 MWh ÷ 2h = 2.5075 MW ≈ 2.5 MW ✓
4h: 10.030 MWh ÷ 4h = 2.5075 MW ≈ 2.5 MW ✓
6h: 15.045 MWh ÷ 6h = 2.5077 MW ≈ 2.5 MW ✓
```

### 2. 成本计算

```
单元成本(万元) = 等效容量(MWh) × 100 × 单价(元/Wh)
```

**示例**（2h系统）:
```
等效容量 = 0.625 + 5.015 = 5.640 MWh
单价 = 0.46 元/Wh (7.5MW家族)
成本 = 5.640 × 100 × 0.46 = 259.44 万元
```

### 3. 方案优选逻辑

系统自动比较所有可能配置：
1. 优先比较总成本
2. 成本相同时，比较电池舱数量
3. 仍相同时，比较功率匹配度

---

## 📋 兼容性

### 向后兼容

✅ **完全兼容V3.0**

- 所有V3.0功能正常工作
- 现有配置方案不受影响
- 成本计算保持一致
- 输出格式不变

### 测试验证

- ✅ V3.0全部测试用例通过
- ✅ 2h/4h/6h系统正常
- ✅ 1h/8h系统拒绝逻辑正常
- ✅ 成本计算准确

---

## 📚 文档更新

### 更新的文档

1. ✅ `计算逻辑说明文档.md`
   - 新增2.5MW PCS规格说明
   - 新增配置规则和示例
   - 新增常见问题Q7、Q8

2. ✅ `V3.1逻辑修改说明.md`
   - 详细的修改说明
   - 代码实现要点

3. ✅ `V3.1测试报告.md`
   - 完整的测试结果
   - 性能评估

4. ✅ `V3.1发布说明.md`
   - 本文档

---

## 🚀 升级指南

### 从V3.0升级到V3.1

#### 步骤1: 备份
```bash
# 备份V3.0代码
cp all_sys.py all_sys_v3.0.py.bak
```

#### 步骤2: 更新代码
- 替换 `all_sys.py` 为V3.1版本

#### 步骤3: 验证
```bash
# 运行测试
python test_all_sys.py
python test_v3_1.py
```

#### 步骤4: 前端更新（可选）
- 前端显示不需要修改
- V3.1的新配置会自动显示

### 回滚方案

如需回滚到V3.0：
```bash
cp all_sys_v3.0.py.bak all_sys.py
```

---

## ⚠️ 注意事项

### 1. 产品可行性

**重要**: 请确认2.5MW PCS是否为实际可提供的产品。

- 如果是实际产品: ✅ 正常使用
- 如果是规划产品: ⚠️ 需标注为规划功能
- 如果不可行: ❌ 需要移除此功能

### 2. 系统限制

- 2.5MW PCS **仅**用于7.5MW家族
- **不支持**5MW家族配置
- 仍然**不支持**1h和8h系统

### 3. 成本单价

复用7.5MW家族单价，未独立定价：
- 2h: 0.46元/Wh
- 4h: 0.41元/Wh
- 6h: 0.41元/Wh

---

## 📈 性能指标

### 计算性能

- 测试用例执行时间: < 5秒
- 新增配置对性能影响: 可忽略
- 算法复杂度: 未显著增加

### 配置质量

- 成本优化: ⭐⭐⭐⭐⭐
- 功率匹配: ⭐⭐⭐⭐⭐
- 容量满足: ⭐⭐⭐⭐⭐

---

## 🔮 未来展望

### 可能的扩展

1. **更小步长**
   - 1.25MW PCS配置
   - 进一步减少过配

2. **更多系统时长**
   - 支持1h系统
   - 支持8h系统

3. **智能推荐**
   - 成本相近时展示多个备选方案
   - 提供分期建设建议

4. **前端增强**
   - 突出显示V3.1新功能
   - 添加配置对比功能

---

## 📞 技术支持

### 问题反馈

如遇到以下情况，请及时反馈：
- 2.5MW配置未在预期场景使用
- 成本计算异常
- 性能问题
- 其他异常行为

### 联系方式

- 项目组: 储能系统开发组
- 文档维护: AI Assistant

---

## 📝 版本历史

### V3.1 (2025-10-28)
- ✨ 新增2.5MW PCS配置
- ✨ 支持2h/4h/6h系统的2.5MW组合
- 🔧 更新6h系统规则
- 📚 更新所有相关文档
- ✅ 完整测试验证

### V3.0 (2025-10-28)
- 🔄 从等效成本改为真实成本模型
- 💰 新增成本单价体系
- 🚫 限制1h和8h系统
- 📊 统一金额单位为万元

### V2.29 及更早版本
- 参见历史文档

---

## ✅ 发布检查清单

- [x] 代码功能完整
- [x] 所有测试通过
- [x] 文档更新完成
- [x] 向后兼容验证
- [x] 性能测试通过
- [x] 成本计算验证
- [ ] 产品可行性确认 ⚠️

---

## 🎉 总结

V3.1版本成功引入了2.5MW PCS配置，为储能系统提供了更精细的功率步长和更灵活的配置选项。经过全面测试验证，所有功能正常工作，成本计算准确，性能表现良好。

**推荐升级！** 🚀

---

**发布日期**: 2025年10月28日  
**版本状态**: ✅ 稳定版本  
**建议**: 推荐所有V3.0用户升级

