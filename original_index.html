<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‚¨èƒ½ç³»ç»Ÿæ–¹æ¡ˆé…ç½®&å åœ°é¢ç§¯æ ¸ç®—å·¥å…·</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* --- Global Resets & Base Styles --- */
        :root {
            --primary-color: #FF7900; /* é˜³å…‰æ©™ */
            --primary-color-dark: #E06C00; /* é˜³å…‰æ©™ - æ·±è‰² */
            --primary-color-extralight: #fff5eb; /* é˜³å…‰æ©™ - ææµ…è‰² (ç”¨äºMermaidå­å›¾èƒŒæ™¯) */
            --text-color-base: #606060; /* ä¸­ç° - ä¸»è¦æ–‡æœ¬ */
            --text-color-headings: #333333; /* æ·±ç° - æ ‡é¢˜ */
            --text-color-light: #FFFFFF; /* ç™½è‰²æ–‡æœ¬ */
            
            --bg-color-light: #FFFFFF; /* é¡µé¢å’Œæµ…è‰²åŒºå—èƒŒæ™¯ */
            --bg-color-medium: #f4f6f8; /* æ›´æµ…çš„ç°ï¼Œç”¨äºåŒºå—èƒŒæ™¯ */
            --bg-color-card: #FFFFFF; /* å¡ç‰‡èƒŒæ™¯ */
            --border-color-soft: #e0e0e0; /* æŸ”å’Œè¾¹æ¡†è‰² */
            --border-color-medium: #cccccc; 

            --bg-color-dark: #2B686F;  /* æ·±è“ç° - é¡µè„šç­‰ */
            --tech-blue-primary: #007AFF; /* ç§‘æŠ€è“ - å‚è€ƒApple */
            --tech-blue-light-bg: #f0f7ff; /* ç§‘æŠ€è“ - è½»èƒŒæ™¯ */


            --accent-color-yellow: #EEB83F; /* è¾…åŠ©è‰² - æ·¡é»„ */
            --accent-color-teal: #55BAB4;   /* è¾…åŠ©è‰² - è“ç»¿ */

            --font-family-base: 'Noto Sans SC', 'Helvetica Neue', Arial, sans-serif;
            --font-size-base: 16px;
            --line-height-base: 1.7;

            --border-radius: 8px;
            --container-width: 1200px;
            --header-height: 75px; 
            --header-height-scrolled: 65px;
            --transition-speed: 0.3s;
            --animation-duration: 0.6s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: var(--font-size-base);
        }

        body {
            font-family: var(--font-family-base);
            line-height: var(--line-height-base);
            color: var(--text-color-base);
            background-color: var(--bg-color-light);
            overflow-x: hidden;
        }

        /* --- Typography --- */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 0.75em;
            color: var(--text-color-headings);
        }
        .hero-title { 
            color: var(--text-color-light); 
            font-size: clamp(2.2rem, 5vw, 3.5rem); 
            margin-bottom: 0.4em; 
            text-shadow: 1px 1px 4px rgba(0,0,0,0.4); 
            font-weight: 700;
        }
        .hero-subtitle { 
            color: rgba(255,255,255,0.9); 
            font-size: clamp(1rem, 2vw, 1.3rem); 
            margin-bottom: 1.8em; 
            font-weight: 400; 
            max-width: 750px; 
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }
        .section-title { 
            font-size: clamp(1.8rem, 4vw, 2.8rem); 
            text-align: center; 
            margin-bottom: 1em; 
            position: relative; 
        }
        .section-title::after {
            content: '';
            display: block;
            width: 70px;
            height: 4px;
            background-color: var(--primary-color);
            margin: 0.4em auto 0;
            border-radius: 2px;
        }
        .section-intro { 
            text-align: center; 
            font-size: 1.1rem; 
            color: var(--text-color-base); 
            margin-bottom: 3em; 
            max-width: 750px; 
            margin-left: auto; 
            margin-right: auto;
            font-weight: 300;
        }

        p { margin-bottom: 1.2em; }
        a { color: var(--primary-color); text-decoration: none; transition: color var(--transition-speed) ease; }
        a:hover { color: var(--primary-color-dark); }

        /* --- Layout & Container --- */
        .section-container, .header-container, .footer-container {
            width: 90%;
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 20px;
        }
        .content-section { 
            padding: clamp(60px, 10vh, 100px) 0;
        }
         .content-section:nth-child(even) { 
            background-color: var(--bg-color-medium); 
        }
        #project-inputs-section { /* Ensure project inputs always has light background */
             background-color: var(--bg-color-light);
        }


        /* --- Header / Navigation --- */
        .main-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            height: var(--header-height);
            background-color: transparent;
            box-shadow: none;
            transition: background-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease, height var(--transition-speed) ease;
        }
        .main-header.scrolled {
            background-color: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 3px 12px rgba(0,0,0,0.08);
            height: var(--header-height-scrolled);
        }
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
        }
        .logo-link img.logo {
            height: 120px !important; /* Increased size to 120px */
            width: 120px !important;  /* Increased size to 120px */
            object-fit: contain !important; /* æ”¹ä¸ºcontainï¼Œä¿æŒæ¯”ä¾‹ä¸å˜å½¢ */
            background-color: transparent; /* å°è¯•é€æ˜èƒŒæ™¯ */
            border-radius: 8px; /* æ·»åŠ åœ†è§’ */
            padding: 8px; /* æ·»åŠ å†…è¾¹è· */
            transition: height var(--transition-speed) ease, width var(--transition-speed) ease;
        }
        .main-header.scrolled .logo-link img.logo {
            height: 110px !important; /* Increased size to 110px */
            width: 110px !important; /* Increased size to 110px */
            object-fit: contain !important; /* ä¿æŒcontain */
            padding: 6px; /* å‡å°‘å†…è¾¹è· */
        }

        .main-nav ul {
            list-style: none;
            display: flex;
            gap: clamp(20px, 3.5vw, 40px); 
        }
        .main-nav a {
            color: var(--text-color-headings); 
            font-weight: 500;
            font-size: clamp(0.9rem, 1.5vw, 1rem);
            padding: 10px 0;
            position: relative;
        }
        .main-header:not(.scrolled) .main-nav a { 
             color: var(--text-color-light); 
        }
        .main-header.scrolled .main-nav a {
            color: var(--text-color-headings);
        }

        .main-nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary-color);
            transition: width var(--transition-speed) ease;
        }
        .main-nav a:hover::after, .main-nav a.active::after {
            width: 100%;
        }

        .menu-toggle { display: none; background: none; border: none; cursor: pointer; padding: 10px; z-index: 1001;}
        .menu-icon-bar { display: block; width: 25px; height: 3px; margin: 5px 0; transition: transform 0.3s ease, opacity 0.3s ease; border-radius: 1px;}
        .main-header:not(.scrolled) .menu-icon-bar { background-color: var(--text-color-light); }
        .main-header.scrolled .menu-icon-bar { background-color: var(--text-color-headings); }


        /* --- Hero Section --- */
        .hero-section {
            min-height: 90vh; 
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: linear-gradient(rgba(0, 0, 0, 0.45), rgba(0, 0, 0, 0.65)), url('https://images.unsplash.com/photo-1585070680114-3d8e9a429f6d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80') no-repeat center center/cover; /* New placeholder image for better contrast with orange */
            color: var(--text-color-light);
            padding-top: var(--header-height); 
            position: relative; 
        }
        .hero-content {
            max-width: 800px;
            padding: 20px;
        }

        /* --- Buttons --- */
        .btn {
            display: inline-block;
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: 500;
            border: 2px solid transparent;
            border-radius: var(--border-radius);
            cursor: pointer;
            text-align: center;
            transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease, transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
            text-transform: uppercase;
            letter-spacing: 0.8px; 
        }
        .btn:disabled { 
            background-color: #cccccc;
            border-color: #cccccc;
            color: #666666;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        .btn-primary {
            background-color: var(--primary-color);
            color: var(--text-color-light);
            border-color: var(--primary-color);
        }
        .btn-primary:not(:disabled):hover {
            background-color: var(--primary-color-dark);
            border-color: var(--primary-color-dark);
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }
        .btn-primary:not(:disabled):active {
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .btn-hero {
            padding: 15px 40px;
            font-size: 1.1rem;
            margin-top: 1em;
        }
        

        /* --- Input Forms --- */
        .input-form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            align-items: end;
            background-color: var(--bg-color-card); /* Changed to card background */
            padding: clamp(25px, 5vw, 45px); 
            border-radius: var(--border-radius);
            box-shadow: 0 8px 30px rgba(0,0,0,0.07);
        }
        
        /* åœ¨å¤§å±å¹•ä¸Šä¼˜åŒ–å¸ƒå±€ */
        @media (min-width: 1200px) {
            .input-form-grid {
                grid-template-columns: 1fr 1fr 1.5fr 1.5fr; /* 4åˆ—å¸ƒå±€ */
                grid-template-rows: auto auto; /* æ˜ç¡®è®¾ç½®ä¸¤è¡Œï¼Œè‡ªåŠ¨é«˜åº¦ */
                grid-template-areas: 
                    "power capacity device-sets land-area"
                    "system-select button device-sets land-area"; /* è®©è®¾å¤‡å¥—æ•°é™åˆ¶å’Œå åœ°é¢ç§¯é¢„æµ‹è·¨è¶Šä¸¤è¡Œ */
                align-items: start; /* é‡ç½®ä¸ºstartå¯¹é½ */
            }
            .input-group:nth-child(1) { grid-area: power; }
            .input-group:nth-child(2) { grid-area: capacity; }
            .device-sets-group { 
                grid-area: device-sets; 
                align-self: stretch; /* è®©è®¾å¤‡å¥—æ•°é™åˆ¶å®¹å™¨å¡«æ»¡æ•´ä¸ªåŒºåŸŸ */
                display: flex;
                flex-direction: column;
                justify-content: space-between; /* å†…å®¹åˆ†å¸ƒåœ¨é¡¶éƒ¨å’Œåº•éƒ¨ */
            }
            .land-area-prediction-group {
                grid-area: land-area;
                align-self: stretch;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }
            .system-selection-group { grid-area: system-select; }
            .button-group { grid-area: button; }
        }
        
        @media (min-width: 992px) and (max-width: 1199px) {
            .input-form-grid {
                grid-template-columns: 1fr 1fr; /* 2åˆ—å¸ƒå±€ */
                grid-template-rows: auto auto auto; /* ä¸‰è¡Œå¸ƒå±€ */
                grid-template-areas: 
                    "power capacity"
                    "device-sets land-area"
                    "system-select button";
                align-items: start; /* é‡ç½®ä¸ºstartå¯¹é½ */
            }
            .input-group:nth-child(1) { grid-area: power; }
            .input-group:nth-child(2) { grid-area: capacity; }
            .device-sets-group { 
                grid-area: device-sets; 
                align-self: stretch;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }
            .land-area-prediction-group {
                grid-area: land-area;
                align-self: stretch;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }
            .system-selection-group { grid-area: system-select; }
            .button-group { grid-area: button; }
        }
        
        @media (min-width: 768px) and (max-width: 991px) {
            .input-form-grid {
                grid-template-columns: 1fr 1fr; /* 2åˆ—å¸ƒå±€ */
                grid-template-areas: 
                    "power capacity"
                    "device-sets device-sets"
                    "land-area land-area"
                    "system-select button";
            }
            .input-group:nth-child(1) { grid-area: power; }
            .input-group:nth-child(2) { grid-area: capacity; }
            .device-sets-group { grid-area: device-sets; }
            .land-area-prediction-group { grid-area: land-area; }
            .system-selection-group { grid-area: system-select; }
            .button-group { grid-area: button; }
        }
        
        .input-group { 
            display: flex; 
            flex-direction: column; 
        }
        .input-group label {
            font-weight: 500;
            margin-bottom: 10px;
            color: var(--text-color-base);
            font-size: 0.95rem;
        }
        .form-input, .form-select {
            width: 100%;
            padding: 14px 18px; 
            border: 1px solid var(--border-color-medium); /* Use defined border color */
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
            background-color: var(--bg-color-light); /* Lighter background for inputs */
        }
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 121, 0, 0.15);
        }
        .button-group .btn { width: 100%; padding: 14px 18px;}

        /* --- æœ€å¤§è®¾å¤‡å¥—æ•°ç›¸å…³æ ·å¼ --- */
        .device-sets-container {
            position: relative;
            border: 1px solid var(--border-color-soft);
            border-radius: var(--border-radius);
            padding: 20px;
            background-color: var(--bg-color-light);
            transition: opacity var(--transition-speed) ease;
            height: 100%; /* è®©å®¹å™¨å¡«æ»¡çˆ¶å…ƒç´ é«˜åº¦ */
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* å†…å®¹ä»é¡¶éƒ¨å¼€å§‹ */
        }
        .device-sets-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            flex-shrink: 0; /* ä¸å…è®¸æ”¶ç¼© */
        }
        .device-sets-title {
            font-weight: 500;
            color: var(--text-color-headings);
            font-size: 0.95rem;
            margin: 0;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .3s;
            border-radius: 24px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .3s;
            border-radius: 50%;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        input:checked + .toggle-slider {
            background-color: var(--primary-color);
        }
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        .device-sets-input-area {
            transition: opacity var(--transition-speed) ease, transform var(--transition-speed) ease;
            flex-grow: 1; /* è®©è¾“å…¥åŒºåŸŸå æ®å¯ç”¨ç©ºé—´ */
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        .device-sets-input-area.disabled {
            opacity: 0.5;
            pointer-events: none;
            transform: translateY(-5px);
        }
        .min-sets-hint {
            font-size: 0.85rem;
            color: var(--accent-color-teal);
            margin-top: auto; /* å°†æç¤ºæ¨åˆ°åº•éƒ¨ */
            padding: 8px 12px;
            background-color: var(--tech-blue-light-bg);
            border-radius: 4px;
            border-left: 3px solid var(--accent-color-teal);
            display: none;
            flex-shrink: 0; /* ä¸å…è®¸æ”¶ç¼© */
        }
        .min-sets-hint.show {
            display: block;
            animation: fadeInUp 0.3s ease-out;
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* --- Land Area Prediction Styles --- */
        .land-area-prediction-group { 
            grid-area: land-area; 
            align-self: stretch;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .land-area-prediction-container {
            position: relative;
            border: 1px solid var(--border-color-soft);
            border-radius: var(--border-radius);
            padding: 20px;
            background-color: var(--bg-color-light);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            transition: box-shadow var(--transition-speed) ease;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .land-area-prediction-container:hover {
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        }
        .land-area-prediction-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            flex-shrink: 0;
        }
        .land-area-prediction-title {
            font-weight: 500;
            color: var(--text-color-headings);
            font-size: 0.95rem;
            margin: 0;
        }
        .land-area-prediction-input-area {
            transition: opacity var(--transition-speed) ease, transform var(--transition-speed) ease;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        .land-area-prediction-input-area.disabled {
            opacity: 0.5;
            pointer-events: none;
            transform: translateY(-5px);
        }
        .land-area-hint {
            font-size: 0.85rem;
            color: var(--accent-color-yellow);
            margin-top: auto;
            padding: 8px 12px;
            background-color: #fffbf0;
            border-radius: 4px;
            border-left: 3px solid var(--accent-color-yellow);
            flex-shrink: 0;
        }

        /* --- Results Area & Cards --- */
        .results-summary-section { background-color: var(--bg-color-medium); } /* Use medium bg for this section */
        
        /* Unified style for both solution messages */
        #solution-message, #land-area-message {
            padding: 18px 25px;
            margin-bottom: 30px;
            border-radius: var(--border-radius);
            font-size: 1.05em;
            text-align: center;
            border-width: 1px;
            border-style: solid;
        }

        .message-info { background-color: #e8f4fd; border-color: #d1e9fc; color: #0c5460; }
        .message-success { background-color: #d4edda; border-color: #c3e6cb; color: #155724; }
        .message-warning { background-color: #fffbea; border-color: #fce588; color: #946c00; }
        .message-error { background-color: #f8d7da; border-color: #f5c6cb; color: #721c24; }

        /* æ¨¡å‹ç²¾åº¦è¯´æ˜æ ·å¼ */
        .model-accuracy-notice {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-left: 4px solid #64748b;
            border-radius: 8px;
            padding: 16px 20px;
            margin: 20px 0;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            box-shadow: 0 2px 8px rgba(100, 116, 139, 0.08);
            font-size: 14px;
            line-height: 1.6;
        }

        .notice-icon {
            font-size: 20px;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .notice-content {
            flex: 1;
            color: #475569;
        }

        .notice-content strong {
            color: #334155;
            font-weight: 600;
            display: inline-block;
            margin-right: 4px;
        }

        /* ç‹¬ç«‹å åœ°é¢ç§¯è®¡ç®—å™¨æ ·å¼ */
        /* å¤ç”¨æ–¹æ¡ˆé…ç½®æ ·å¼ï¼Œä»…ä¿ç•™ç»“æœåŒºåŸŸç‰¹å®šæ ·å¼ */
        .standalone-area-results-container {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid var(--bg-color-medium);
        }
        
        .area-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
        }

        .area-result-card {
            background: #fff;
            border: 1px solid #e1e4e8;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .area-value-primary {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--primary-color);
            margin: 8px 0;
        }

        .area-value-secondary {
            font-size: 1.2rem;
            color: var(--text-color-light);
        }

        .area-unit {
            font-size: 0.9rem;
            margin-left: 4px;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            align-items: center;
            height: 100%; /* Align with inputs */
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }


        .metrics-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); /* Original compact width */
            gap: 20px; /* Original compact gap */
        }

        /* Land area specific container override */
        #land-area-results .metrics-container {
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); /* Wider cards for land area */
            gap: 24px; /* More space for land area */
        }

        .metric-card { 
            background-color: var(--bg-color-card); 
            border: 1px solid var(--border-color-soft);
            padding: 20px; 
            border-radius: var(--border-radius); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.05); 
            text-align: left;
            display: flex; 
            flex-direction: column;
            justify-content: space-between; 
            transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
        }
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        }
        .metric-card h4 { 
            margin-top: 0; 
            color: var(--text-color-headings); 
            font-size: 1rem; 
            margin-bottom: 8px;
            font-weight: 500;
        }
        .metric-card p { 
            font-size: 1.8em; 
            font-weight: 700; 
            color: var(--primary-color); 
            margin-bottom: 3px; 
            line-height: 1.2; 
        }
        .metric-card span { 
            font-size: 0.85em; 
            color: var(--text-color-base); 
        }

        /* --- Land Area Specific Styles (Beautified) --- */
        #land-area-results .metric-card { 
            border: 1px solid rgba(0,0,0,0.06);
            padding: 24px; 
            border-radius: 16px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.04);
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        #land-area-results .metric-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.08);
            border-color: rgba(255, 121, 0, 0.2);
        }
        /* Decorative top border for land area cards */
        #land-area-results .metric-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color-yellow));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        #land-area-results .metric-card:hover::after {
            opacity: 1;
        }

        #land-area-results .metric-card h4 { 
            color: #666;
            font-size: 0.95rem; 
            margin-bottom: 12px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        #land-area-results .metric-card p { 
            font-size: 2rem; 
            margin-bottom: 8px; 
            line-height: 1.1; 
            font-family: 'Roboto', 'Helvetica Neue', sans-serif;
        }
        #land-area-results .metric-card span { 
            font-size: 0.9rem; 
            color: #888; 
            font-weight: 400;
        }
        /* Special styling for land area mu value */
        #land-area-results .metric-card span span {
            font-weight: 600;
            color: #333; 
            font-size: 1.1em;
            margin-left: 6px;
            margin-right: 2px;
        }

        /* Configuration Details & ESS Blocks Styling */
        #configuration-details { background-color: var(--bg-color-medium); }

        .component-section h3 { /* General h3 for AC/DC side */
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 0.8em;
            border-bottom: 2px solid var(--accent-color-yellow);
            padding-bottom: 0.4em;
        }
        .component-list { list-style: none; }
        .component-list li { 
            background-color: #fdfdfd; 
            padding: 12px 15px; 
            border-radius: 4px; 
            margin-bottom: 10px; 
            border: 1px solid var(--border-color-soft); 
            font-size: 0.95rem;
        }
        
        #ess-blocks-section-title { /* Specific title for ESS Blocks if needed, otherwise use .section-title */
            /* Styles for the "å‚¨èƒ½å•å…ƒå—æ„æˆ" title itself if different from generic .section-title */
        }

        .ess-blocks-wrapper { /* New wrapper for the card-like layout based on image_828653.png */
            background-color: var(--bg-color-card);
            border: 1px solid var(--border-color-soft);
            border-radius: var(--border-radius);
            padding: clamp(20px, 3vw, 30px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.06);
            display: flex;
            flex-wrap: wrap; /* Allow wrapping on smaller screens */
            gap: clamp(20px, 3vw, 30px);
            align-items: stretch; /* Make items same height */
        }

        #ess-blocks-diagrams-container { /* Container for Mermaid diagram */
            flex: 1 1 55%; /* Takes more space, can shrink/grow */
            min-width: 300px; /* Minimum width before wrapping */
            /* background-color: var(--primary-color-extralight); REMOVED to blend with wrapper */
            border-radius: var(--border-radius); /* Keep border-radius if wrapper has one, or remove if it should look seamless */
            padding: 20px; /* Keep padding for spacing around the diagram, adjust if needed */
            display: flex;
            align-items: center;
            justify-content: center;
            /* border: 1px solid var(--primary-color); REMOVED */
        }
        #ess-blocks-diagrams.mermaid svg { /* Ensure SVG is responsive */
            max-width: 100%;
            height: auto;
            display: block; /* Remove extra space below SVG */
            margin: 0 auto; /* Center if smaller than container */
        }
        #ess-blocks-details-text-container { /* Container for text details */
            flex: 1 1 40%; /* Takes less space, can shrink/grow */
            min-width: 280px;
            padding-left: 15px; /* Add some space from diagram */
            border-left: 1px solid var(--border-color-soft); /* Separator line if needed, or remove */
        }
         #ess-blocks-details-text-container p strong {
            color: var(--text-color-headings);
            font-weight: 500;
            display: block;
            margin-bottom: 0.5em;
            font-size: 1.1rem;
        }
        #ess-blocks-details-text-container ul {
            list-style: none; /* Remove default list style */
            padding-left: 0;
        }
        #ess-blocks-details-text-container ul li {
            background-color: var(--bg-color-light);
            padding: 10px 15px;
            border-radius: 4px;
            margin-bottom: 8px;
            border: 1px solid var(--border-color-soft);
            font-size: 0.95rem;
            color: var(--text-color-base);
            transition: background-color 0.2s ease;
        }
         #ess-blocks-details-text-container ul li:hover {
            background-color: var(--tech-blue-light-bg);
        }


        .parameters-list p { font-size: 1.05rem; }
        .parameters-list strong { color: var(--text-color-headings); }
        

        /* --- Footer --- */
        .main-footer {
            background-color: var(--bg-color-dark);
            color: rgba(255,255,255,0.7);
            padding: 40px 0; 
            text-align: center;
        }
        .footer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px; 
        }
        .main-footer p { margin-bottom: 0.5em; font-size: 0.9rem;}
        .main-footer .author-info a { color: var(--accent-color-yellow); }
        .main-footer .author-info a:hover { color: var(--text-color-light); }


        /* --- Animation Classes (Scroll-triggered) --- */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px); 
            transition: opacity var(--animation-duration) ease-out, transform var(--animation-duration) ease-out;
        }
        .animate-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .animate-on-scroll.is-visible .metric-card,
        .animate-on-scroll.is-visible .component-section,
        .animate-on-scroll.is-visible .ess-blocks-wrapper > div { /* Animate children of wrapper */
            opacity: 0;
            transform: translateY(20px);
            animation: item-fade-in-up 0.5s ease-out forwards;
        }
        /* Stagger children of ess-blocks-wrapper if needed */
        .ess-blocks-wrapper.is-visible #ess-blocks-diagrams-container { animation-delay: 0.1s; }
        .ess-blocks-wrapper.is-visible #ess-blocks-details-text-container { animation-delay: 0.25s; }


        .metrics-container.is-visible .metric-card:nth-child(1) { animation-delay: 0.1s; }
        .metrics-container.is-visible .metric-card:nth-child(2) { animation-delay: 0.2s; }
        .metrics-container.is-visible .metric-card:nth-child(3) { animation-delay: 0.3s; }
        .metrics-container.is-visible .metric-card:nth-child(4) { animation-delay: 0.4s; }
        .metrics-container.is-visible .metric-card:nth-child(5) { animation-delay: 0.5s; }
        .metrics-container.is-visible .metric-card:nth-child(6) { animation-delay: 0.6s; }
        .metrics-container.is-visible .metric-card:nth-child(7) { animation-delay: 0.7s; }


        @keyframes item-fade-in-up {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }


        /* --- Responsive Design --- */
        @media (max-width: 992px) {
            .hero-title { font-size: 2.5rem; } 
            .hero-subtitle { font-size: 1.2rem; } 
            .section-title { font-size: 2rem; }
            .metrics-container { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); } /* Allow more flexible fitting on tablets */
            .ess-blocks-wrapper { flex-direction: column; } /* Stack diagram and text on tablets */
            #ess-blocks-details-text-container { padding-left: 0; border-left: none; margin-top: 20px; }

        }

        @media (max-width: 768px) {
            .main-nav {
                display: none; 
                position: absolute;
                top: var(--header-height-scrolled); 
                left: 0;
                width: 100%;
                background-color: var(--bg-color-light);
                flex-direction: column;
                padding: 15px 0; 
                box-shadow: 0 5px 10px rgba(0,0,0,0.1);
            }
            .main-header.scrolled .main-nav {
                 top: var(--header-height-scrolled);
            }
            .main-header:not(.scrolled) .main-nav { 
                top: var(--header-height);
                 background-color: rgba(255, 255, 255, 0.98); 
            }

            .main-nav.is-active { display: flex; } 
            .main-nav ul { flex-direction: column; align-items: center; gap: 0;}
            .main-nav li { width: 100%; text-align: center;}
            .main-nav a { 
                padding: 12px 20px; 
                display: block; 
                width: 100%;
                color: var(--text-color-headings); 
            }
            .main-nav a::after { display: none; } 
            .main-nav a:hover { background-color: var(--bg-color-medium); }

            .menu-toggle { display: block; }
            .menu-toggle.is-active .menu-icon-bar:nth-child(1) { transform: translateY(8px) rotate(45deg); }
            .menu-toggle.is-active .menu-icon-bar:nth-child(2) { opacity: 0; }
            .menu-toggle.is-active .menu-icon-bar:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }


            .hero-title { font-size: 2rem; } 
            .hero-subtitle { font-size: 1rem; } 
            .btn-hero { padding: 12px 30px; font-size: 1rem;}
            .input-form-grid { grid-template-columns: 1fr; } 
            .metrics-container { grid-template-columns: 1fr; } 
            .details-grid { grid-template-columns: 1fr; }
            
            /* ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šæ¨¡å‹ç²¾åº¦è¯´æ˜ */
            .model-accuracy-notice {
                padding: 12px 16px;
                font-size: 13px;
                gap: 10px;
            }
            
            .notice-icon {
                font-size: 18px;
            }

            /* ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šç‹¬ç«‹è®¡ç®—å™¨ */
            .standalone-calculator-card {
                padding: 24px 20px;
            }

            .calculator-input-grid {
                grid-template-columns: 1fr;
            }

            .input-mode-switch {
                flex-direction: column;
                gap: 12px;
            }

            .calculator-actions {
                flex-direction: column;
            }

            .btn-primary, .btn-secondary {
                width: 100%;
                justify-content: center;
            }

            .area-results-grid {
                grid-template-columns: 1fr;
            }
        }

        /* --- Print Styles --- */
        @media print {
            body {
                margin: 0;
                font-size: 10pt;
                color: #000;
                background-color: #fff !important; /* Ensure white background for printing */
            }

            .main-header, 
            .main-footer, 
            #project-inputs-section, 
            .menu-toggle, 
            #calculate-button, 
            .btn-hero /* Hide elements not relevant for print */ {
                display: none !important;
            }

            /* Ensure results area and its children are visible if they were part of the report */
            #results-area, 
            #results-area section, 
            #results-area .section-container, 
            #results-area .metrics-container, 
            #results-area .metric-card,
            #results-area #ac-side-container,
            #results-area #dc-side-container,
            #results-area #ess-blocks-container,
            #results-area #solution-parameters,
            #results-area .animate-on-scroll /* Ensure all report parts are displayed */ {
                display: block !important; /* Override any script-based hiding */
                opacity: 1 !important;
                transform: none !important;
                background-color: #fff !important; /* Ensure consistent white background for sections */
            }
            .content-section:nth-child(even) { /* Override alternating background for print */
                 background-color: #fff !important; 
            }

            .section-container, .content-section {
                padding-top: 10px !important;
                padding-bottom: 10px !important;
                box-shadow: none !important;
                border: none !important;
            }
            .section-title {
                font-size: 1.5rem !important;
                margin-bottom: 0.8em !important;
            }
            .section-title::after {
                display: none !important; /* Hide decorative underline from section titles */
            }

            .metric-card {
                box-shadow: none !important;
                border: 1px solid #ccc !important;
                padding: 10px !important;
                page-break-inside: avoid; /* Try to keep card content from splitting across pages */
            }
             .metric-card p {
                font-size: 1.5em !important; /* Adjust for print */
            }

            .ess-blocks-wrapper {
                padding: 10px !important;
                border: 1px solid #ccc !important;
                box-shadow: none !important;
                background-color: #fff !important;
            }
            #ess-blocks-diagrams-container, #ess-blocks-details-text-container {
                padding: 5px !important;
                border: none !important; /* Remove borders from inner containers if wrapper has one */
            }

            #ess-blocks-diagrams.mermaid svg {
                display: block !important;
                max-width: 100% !important;
                height: auto !important;
            }
            /* Adjust link colors for print - typically black or dark gray */
            a, a:visited {
                color: #333 !important;
                text-decoration: none; /* Optional: remove underline for cleaner print */
            }
            /* Specific overrides for mermaid theme variables for print if needed, though 'base' is usually fine */
        }

        /* --- PDF Capture Helper Styles --- */
        .prepare-for-pdf-capture,
        .prepare-for-pdf-capture * {
            animation: none !important;
            transition: none !important;
            transform: none !important; /* Avoid transforms that might affect rendering */
            opacity: 1 !important; /* Ensure full opacity */
            /* overflow: visible !important;  Potentially helps capture all content, but use with caution */
        }
        .prepare-for-pdf-capture .main-header, /* Hide header during PDF capture */
        .prepare-for-pdf-capture .main-footer, /* Hide footer during PDF capture */
        .prepare-for-pdf-capture #download-report-button { /* Hide the button itself */
            display: none !important;
        }
        .prepare-for-pdf-capture .animate-on-scroll{
            opacity: 1 !important; /* Ensure animated sections are fully visible */
            transform: translateY(0) !important;
        }
        /* Optional: Spinner for loading indication */
        .spinner {
            display: inline-block;
            border: 3px solid #f3f3f3; /* Light grey */
            border-top: 3px solid var(--primary-color); /* Orange */
            border-radius: 50%;
            width: 1em;
            height: 1em;
            animation: spin 1s linear infinite;
            margin-left: 5px;
            vertical-align: middle;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <header id="main-header" class="main-header">
        <div class="header-container">
            <a href="#hero" class="logo-link">
                <img src="logo.png" alt="é˜³å…‰å‚¨èƒ½ Logo" class="logo"> </a>
            <nav class="main-nav" id="main-nav">
                <ul>
                    <li><a href="#hero" class="nav-link">é¦–é¡µ</a></li>
                    <li><a href="#project-inputs-section" class="nav-link">æ–¹æ¡ˆé…ç½®</a></li>
                    <li><a href="#standalone-area-calculator" class="nav-link">å åœ°é¢ç§¯æ ¸ç®—</a></li>
                    <li><a href="#results-area" class="nav-link">é…ç½®ç»“æœ</a></li>
                    <li><a href="#" id="download-report-button" class="nav-link">ä¸‹è½½æŠ¥å‘Š</a></li>
                </ul>
            </nav>
            <button class="menu-toggle" id="menu-toggle" aria-label="Toggle menu" aria-expanded="false">
                <span class="menu-icon-bar"></span>
                <span class="menu-icon-bar"></span>
                <span class="menu-icon-bar"></span>
            </button>
        </div>
    </header>

    <main>
        <section id="hero" class="hero-section">
            <div class="hero-content animate-on-scroll">
                <h1 class="hero-title">å‚¨èƒ½ç³»ç»Ÿæ–¹æ¡ˆé…ç½®&å åœ°é¢ç§¯æ ¸ç®—å·¥å…·</h1>
                <p class="hero-subtitle">è¯šæ³åŠ¡å®ã€ä¸¥è°¨å¼€æ”¾ã€åˆ›æ–°å°Šé‡ã€æˆå°±å®¢æˆ·</p>
                <a href="#project-inputs-section" id="hero-start-btn" class="btn btn-primary btn-hero">å¼€å§‹é…ç½®</a>
            </div>
        </section>

        <section id="project-inputs-section" class="content-section">
            <div class="section-container">
                <div class="animate-on-scroll">
                    <h2 class="section-title">é¡¹ç›®å‚æ•°è¾“å…¥</h2>
                    <p class="section-intro">è¯·æä¾›æ‚¨çš„é¡¹ç›®ä½“é‡ï¼Œæ™ºèƒ½ç³»ç»Ÿå°†ä¸ºæ‚¨é…ç½®æœ€ä¼˜æ–¹æ¡ˆï¼ŒåŠ©æ‚¨å®ç°é¡¹ç›®æ•ˆç›Šæœ€å¤§åŒ–ã€‚</p>
                </div>
                <div id="project-inputs" class="input-form-grid animate-on-scroll">
                    <div class="input-group">
                        <label for="project_power_mw">é¡¹ç›®å‚¨èƒ½åŠŸç‡ (MW):</label>
                        <input type="number" id="project_power_mw" name="project_power_mw" value="50" class="form-input">
                    </div>
                    <div class="input-group">
                        <label for="project_capacity_mwh">é¡¹ç›®å‚¨èƒ½å®¹é‡ (MWh):</label>
                        <input type="number" id="project_capacity_mwh" name="project_capacity_mwh" value="100" class="form-input">
                    </div>
                    <div class="input-group device-sets-group">
                        <div class="device-sets-container">
                            <div class="device-sets-header">
                                <span class="device-sets-title">è®¾å¤‡å¥—æ•°é™åˆ¶</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="enable_device_sets_limit">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="device-sets-input-area disabled" id="device-sets-input-area">
                                <label for="max_device_sets">å…è®¸æœ€å¤§è®¾å¤‡å¥—æ•°:</label>
                                <input type="number" id="max_device_sets" name="max_device_sets" value="100" min="1" max="1000" class="form-input" disabled>
                            </div>
                            <div class="min-sets-hint" id="min-sets-hint">
                                ğŸ’¡ å»ºè®®æœ€å°è®¾å¤‡å¥—æ•°: <span id="min-sets-value">-</span> å¥—
                            </div>
                        </div>
                    </div>
                    <div class="input-group system-selection-group">
                        <label for="system_selection">ç³»ç»Ÿé€‰æ‹©:</label>
                        <select id="system_selection" name="system_selection" class="form-select">
                            <option value="5mw">5MWç³»ç»Ÿ</option>
                            <option value="7.5mw">7.5MWç³»ç»Ÿ</option>
                            <option value="overall">æ€»ä½“æœ€ä¼˜</option>
                        </select>
                    </div>
                    <div class="input-group land-area-prediction-group">
                        <div class="land-area-prediction-container">
                            <div class="land-area-prediction-header">
                                <span class="land-area-prediction-title">å åœ°é¢ç§¯æ ¸ç®—</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="enable_land_area_prediction">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="land-area-prediction-input-area disabled" id="land-area-prediction-input-area">
                                <label for="transformer_count">ä¸»å˜ä¸ªæ•°:</label>
                                <select id="transformer_count" name="transformer_count" class="form-select" disabled>
                                    <option value="1" selected>1å°</option>
                                    <option value="2">2å°</option>
                                </select>
                            </div>
                            <div class="land-area-hint" id="land-area-hint" style="display: none;">
                                ğŸ’¡ æç¤º: å åœ°é¢ç§¯é¢„æµ‹ä»…æ”¯æŒ 2h æˆ– 4h ç³»ç»Ÿ
                            </div>
                        </div>
                    </div>
                    <div class="input-group button-group">
                        <label style="opacity: 0; pointer-events: none;">å ä½</label>
                        <button id="calculate-button" class="btn btn-primary">è®¡ç®—æœ€ä¼˜æ–¹æ¡ˆ</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç‹¬ç«‹å åœ°é¢ç§¯è®¡ç®—å™¨ (é»˜è®¤éšè—) -->
        <section id="standalone-area-calculator" class="content-section" style="display:none;">
            <div class="section-container">
                <div class="animate-on-scroll">
                    <h2 class="section-title">å åœ°é¢ç§¯å¿«é€Ÿæ ¸ç®—</h2>
                    <p class="section-intro">ç‹¬ç«‹å‚¨èƒ½å åœ°é¢ç§¯è®¡ç®—å·¥å…·ï¼Œè¾“å…¥é¡¹ç›®å®¹é‡åŠæ—¶é•¿ï¼Œå¿«é€Ÿè·å–é¡¹ç›®å åœ°é¢ç§¯é¢„ä¼°</p>
                </div>

                <!-- å¤ç”¨æ–¹æ¡ˆé…ç½®çš„æ ·å¼ -->
                <div class="input-form-grid animate-on-scroll">
                    <!-- 1. ç³»ç»Ÿç±»å‹ -->
                    <div class="input-group">
                        <label for="sa_system_type">ç³»ç»Ÿç±»å‹:</label>
                        <select id="sa_system_type" class="form-select">
                            <option value="7.5mw">7.5MW ç³»ç»Ÿ</option>
                            <option value="5mw">5MW ç³»ç»Ÿ</option>
                        </select>
                    </div>
                    
                    <!-- 2. ä¸»å˜ä¸ªæ•° -->
                    <div class="input-group">
                        <label for="sa_transformer_count">ä¸»å˜ä¸ªæ•°:</label>
                        <select id="sa_transformer_count" class="form-select">
                            <option value="1">1å°</option>
                            <option value="2">2å°</option>
                        </select>
                    </div>

                    <!-- 3. é¡¹ç›®åŠŸç‡ -->
                    <div class="input-group">
                        <label for="sa_project_power">é¡¹ç›®åŠŸç‡ (MW):</label>
                        <input type="number" id="sa_project_power" step="0.1" min="0" placeholder="ä¾‹å¦‚: 100" class="form-input">
                    </div>

                    <!-- 4. è¾“å…¥æ¨¡å¼ -->
                    <div class="input-group">
                        <label>å®¹é‡/æ—¶é•¿æ¨¡å¼:</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="sa_input_mode" value="capacity" checked>
                                <span>æŒ‰å®¹é‡ (MWh)</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="sa_input_mode" value="duration">
                                <span>æŒ‰æ—¶é•¿ (h)</span>
                            </label>
                        </div>
                    </div>

                    <!-- 5. é¡¹ç›®å®¹é‡/æ—¶é•¿ -->
                    <div class="input-group" id="sa_capacity_input_group">
                        <label for="sa_project_capacity">é¡¹ç›®å®¹é‡ (MWh):</label>
                        <input type="number" id="sa_project_capacity" step="0.1" min="0" placeholder="ä¾‹å¦‚: 200" class="form-input">
                    </div>
                    <div class="input-group" id="sa_duration_input_group" style="display:none;">
                        <label for="sa_system_duration">ç³»ç»Ÿæ—¶é•¿ (h):</label>
                        <select id="sa_system_duration" class="form-select">
                            <option value="2">2å°æ—¶</option>
                            <option value="4">4å°æ—¶</option>
                        </select>
                    </div>
                </div>

                <div class="animate-on-scroll" style="text-align: center; margin-top: 30px;">
                    <button type="button" id="calculate-area-button" class="btn btn-primary">
                        ç«‹å³æ ¸ç®—
                    </button>
                    <button type="button" id="reset-area-button" class="btn btn-secondary" style="margin-left: 15px;">
                        é‡ç½®
                    </button>
                </div>

                <!-- è®¡ç®—ç»“æœæ˜¾ç¤º (é»˜è®¤éšè—) -->
                <div id="standalone-area-results" class="standalone-area-results-container animate-on-scroll" style="display:none;">
                    <div class="animate-on-scroll">
                        <h3 class="section-title" style="font-size: 1.5rem; margin-bottom: 20px;">æ ¸ç®—ç»“æœ</h3>
                    </div>
                    
                    <!-- æ¨¡å‹ç²¾åº¦è¯´æ˜ (å¤ç”¨ç°æœ‰æ ·å¼) -->
                    <div class="model-accuracy-notice">
                        <div class="notice-icon">â„¹ï¸</div>
                        <div class="notice-content">
                            <strong>æ¨¡å‹ç²¾åº¦è¯´æ˜ï¼š</strong>æœ¬æ¨¡å‹é‡‡ç”¨æœºå™¨å­¦ä¹ é¢„æµ‹æ¨¡å‹ï¼ˆGBDTï¼‰,åŸºäºç‹¬ç«‹å‚¨èƒ½å…¸è®¾æ’å¸ƒé¢ç§¯æ•°æ®è®­ç»ƒï¼Œå¹³å‡é¢„æµ‹è¯¯å·®çº¦ 1.7%ï¼Œæœ€å¤§åå·®çº¦ 6%ã€‚è€ƒè™‘åˆ°é¡¹ç›®åœ°å½¢ã€é“è·¯è§„åˆ’åŠè®¾å¤‡é€‰å‹çš„å·®å¼‚ï¼Œå»ºè®®åœ¨æœ€ç»ˆè§„åˆ’æ—¶é¢„ç•™ 10%-15% çš„ç”¨åœ°ä½™é‡ã€‚
                        </div>
                    </div>

                    <div class="area-results-grid" id="area-results-grid">
                        <!-- ç»“æœåŠ¨æ€æ’å…¥ -->
                    </div>
                </div>
            </div>
        </section>

        <div id="results-area" style="display:none;"> 
            <section id="solution-summary-metrics" class="content-section results-summary-section">
                <div class="section-container">
                    <div class="animate-on-scroll">
                        <h2 class="section-title">æ–¹æ¡ˆæ ¸å¿ƒæŒ‡æ ‡</h2>
                    </div>
                    <div id="solution-message" class="message-info animate-on-scroll"></div>
                    <div class="metrics-container animate-on-scroll">
                        <div class="metric-card">
                            <h4>ç”¨æˆ·è¾“å…¥åŠŸç‡</h4>
                            <p id="summary-input-power">-</p>
                            <span>MW</span>
                        </div>
                        <div class="metric-card">
                            <h4>ç”¨æˆ·è¾“å…¥å®¹é‡</h4>
                            <p id="summary-input-capacity">-</p>
                            <span>MWh</span>
                        </div>
                        <div class="metric-card">
                            <h4>é…ç½®æ€»åŠŸç‡</h4>
                            <p id="summary-config-power">-</p>
                            <span>MW</span>
                        </div>
                        <div class="metric-card" id="actual-power-card" style="display:none;">
                            <h4>å®é™…åŠŸç‡è¾“å‡º</h4>
                            <p id="summary-actual-power">-</p>
                            <span>MW</span>
                            <div class="metric-note" id="actual-power-note" style="display:none; font-size: 0.8em; color: #666; margin-top: 4px;"></div>
                        </div>
                        <div class="metric-card">
                            <h4>é…ç½®æ€»å®¹é‡</h4>
                            <p id="summary-config-capacity">-</p>
                            <span>MWh</span>
                        </div>
                        <div class="metric-card">
                            <h4>ç³»ç»Ÿå€ç‡</h4>
                            <p id="summary-system-hour-type">-</p>
                            <span>å°æ—¶</h1></span>
                        </div>
                         <div class="metric-card" id="total-cost-card" style="display:none;">
                            <h4>é¡¹ç›®æ€»æˆæœ¬</h4>
                            <p id="summary-total-cost">-</p>
                            <span>ä¸‡å…ƒ</span>
                        </div>
                        <div class="metric-card" id="equivalent-capacity-card" style="display:none;">
                            <h4>æ€»ç­‰æ•ˆå®¹é‡</h4>
                            <p id="summary-equivalent-capacity">-</p>
                            <span>MWh</span>
                        </div>
                        <div class="metric-card" id="unit-price-card" style="display:none;">
                            <h4>åº”ç”¨å•ä»·</h4>
                            <p id="summary-unit-price">-</p>
                            <span>å…ƒ/Wh</span>
                        </div>
                    </div>
                </div>
            </section>

            <section id="configuration-details" class="content-section">
                <div class="section-container">
                    <div class="animate-on-scroll">
                        <h2 class="section-title">é…ç½®è¯¦æƒ…</h2>
                    </div>
                    <div class="details-grid"> <div class="component-section animate-on-scroll" id="ac-side-container" style="display:none;">
                            <h3>äº¤æµä¾§ (ä¸€ä½“èˆ±)</h3>
                            <ul id="ac-side-list" class="component-list"></ul>
                        </div>

                        <div class="component-section animate-on-scroll" id="dc-side-container" style="display:none;">
                            <h3>ç›´æµä¾§ (ç”µæ± èˆ±)</h3>
                            <ul id="dc-side-list" class="component-list"></ul>
                        </div>
                    </div>

                    <div class="animate-on-scroll" id="ess-blocks-container" style="display:none; margin-top: 40px;">
                        <h3 class="section-title" id="ess-blocks-section-title" style="font-size: 1.8rem; margin-bottom: 1.5em;">å‚¨èƒ½å•å…ƒå—æ„æˆ</h3>
                        <div class="ess-blocks-wrapper">
                            <div id="ess-blocks-diagrams-container">
                                <div id="ess-blocks-diagrams" class="mermaid"></div>
                            </div>
                            <div id="ess-blocks-details-text-container">
                                </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="solution-parameters" class="content-section" style="display:none; background-color: var(--bg-color-medium);">
                 <div class="section-container">
                    <div class="animate-on-scroll">
                        <h2 class="section-title">æ–¹æ¡ˆè¯´æ˜ä¸é€‰å‹</h2>
                    </div>
                    <div class="parameters-list animate-on-scroll" style="background-color: var(--bg-color-card); border: 1px solid var(--border-color-soft); box-shadow: 0 6px 20px rgba(0,0,0,0.06); padding: clamp(25px, 4vw, 35px); border-radius: var(--border-radius);">
                        <p><strong>å‚¨èƒ½ç³»ç»Ÿ:</strong> <span id="param-dc-family">-</span></p>
                        <p><strong>ç›´æµä¾§ç”µæ± èˆ±é€‰ç”¨è§„æ ¼:</strong> <span id="param-chosen-dc-specs">-</span></p>
                    </div>
                </div>
            </section>

            <section id="land-area-results" class="content-section" style="display:none;">
                <div class="section-container">
                    <div class="animate-on-scroll">
                        <h2 class="section-title">å åœ°é¢ç§¯æ ¸ç®—</h2>
                    </div>
                    
                    <!-- æ¨¡å‹ç²¾åº¦è¯´æ˜ -->
                    <div class="model-accuracy-notice animate-on-scroll">
                        <div class="notice-icon">â„¹ï¸</div>
                        <div class="notice-content">
                            <strong>æ¨¡å‹ç²¾åº¦è¯´æ˜ï¼š</strong>æœ¬æ¨¡å‹é‡‡ç”¨æœºå™¨å­¦ä¹ é¢„æµ‹æ¨¡å‹ï¼ˆGBDTï¼‰,åŸºäºç‹¬ç«‹å‚¨èƒ½å…¸è®¾æ’å¸ƒé¢ç§¯æ•°æ®è®­ç»ƒï¼Œå¹³å‡é¢„æµ‹è¯¯å·®çº¦ 1.7%ï¼Œæœ€å¤§åå·®çº¦ 6%ã€‚è€ƒè™‘åˆ°é¡¹ç›®åœ°å½¢ã€é“è·¯è§„åˆ’åŠè®¾å¤‡é€‰å‹çš„å·®å¼‚ï¼Œå»ºè®®åœ¨æœ€ç»ˆè§„åˆ’æ—¶é¢„ç•™ 10%-15% çš„ç”¨åœ°ä½™é‡ã€‚
                        </div>
                    </div>
                    
                    <div id="land-area-message" class="message-info animate-on-scroll" style="display:none;"></div>
                    <div class="metrics-container animate-on-scroll" id="land-area-metrics">
                        <div class="metric-card" id="storage-area-card" style="display:none;">
                            <h4>å‚¨èƒ½åŒºå åœ°é¢ç§¯</h4>
                            <p id="land-storage-area-m2">-</p>
                            <span><span id="land-storage-area-mu">-</span> äº©</span>
                        </div>
                        <div class="metric-card" id="substation-area-card" style="display:none;">
                            <h4>å‡å‹ç«™åŒºå åœ°é¢ç§¯</h4>
                            <p id="land-substation-area-m2">-</p>
                            <span><span id="land-substation-area-mu">-</span> äº©</span>
                        </div>
                        <div class="metric-card" id="total-area-card" style="display:none;">
                            <h4>é¡¹ç›®æ€»å åœ°é¢ç§¯</h4>
                            <p id="land-total-area-m2">-</p>
                            <span><span id="land-total-area-mu">-</span> äº©</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="main-footer">
        <div class="footer-container animate-on-scroll">
            <div class="footer-content">
                <p>å‚¨èƒ½ç³»ç»Ÿæ–¹æ¡ˆé…ç½®&å åœ°é¢ç§¯æ ¸ç®—å·¥å…· V3.0 &copy; 2025.11</p> <div class="author-info">
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" integrity="sha512-qZvrmS2ekKPF2mSznTQsxqPgnpkI4HCuv1SF4M5SxB3fq1uOL+I1GPhAWpW7idsSayYHQeLfL+RxoGfL1L311A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        // å°å‹é¡¹ç›® (< 50MWh) å åœ°é¢ç§¯è®¡ç®—å…¬å¼
        function calculateSmallProjectArea(systemType, power, duration) {
            // è®¡ç®—è®¾å¤‡å¥—æ•° N
            let N;
            if (systemType === '5MW') {
                N = power / 5.0;
            } else { // 7.5MW
                N = power / 7.5;
            }
            
            const T = duration;
            let area = 0;
            
            if (systemType === '5MW') {
                // F5(N,T)
                const term1 = 1 + (T - 2) * (0.008274 * N*N - 0.03836 * N + 0.3798);
                const term2 = 0.29048 * Math.pow(N, 4) - 3.02368 * Math.pow(N, 3) + 9.85548 * N*N + 157.42735 * N - 33.5255;
                area = term1 * term2;
            } else {
                // F7.5(N,T)
                const term1 = 1 + (T - 2) * (-0.00758168 * N + 0.50613656);
                const term2 = 1.39875 * N*N + 218.533036 * N - 48.375;
                area = term1 * term2;
            }
            
            return Math.max(0, area);
        }

        // Auto-generated GBR models
const SCALER_5MW_STORAGE = { mean: [150.0,2.75,425.0,30.0], scale: [55.90169943749474,0.9682458365518543,238.4848003542364,11.180339887498949] };
const SCALER_5MW_SUB = { mean: [150.0,1.25], scale: [55.90169943749474,0.4330127018922193] };
function GBR_5MW_STORAGE_tree_0(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -6920.875;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -4227.875;
        } else {
          return -2885.875;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -1941.875;
      } else {
        return 634.125;
      }
    }
  } else {
    return 7354.125;
  }
}
function GBR_5MW_STORAGE_tree_1(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -6228.7875;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -3805.0874999999996;
        } else {
          return -2597.2875000000004;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -1747.6875;
      } else {
        return 570.7124999999996;
      }
    }
  } else {
    return 6618.7125;
  }
}
function GBR_5MW_STORAGE_tree_2(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -5605.9087500000005;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -3424.5787500000006;
        } else {
          return -2337.55875;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -1572.9187500000007;
      } else {
        return 513.6412500000006;
      }
    }
  } else {
    return 5956.8412499999995;
  }
}
function GBR_5MW_STORAGE_tree_3(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -5045.317875000001;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -3082.1208750000005;
        } else {
          return -2103.8028749999994;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -1415.626875;
      } else {
        return 462.2771250000005;
      }
    }
  } else {
    return 5361.157125;
  }
}
function GBR_5MW_STORAGE_tree_4(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -4540.786087500001;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -2773.9087875000005;
        } else {
          return -1893.4225874999993;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -1274.0641875000001;
      } else {
        return 416.04941250000047;
      }
    }
  } else {
    return 4825.041412499999;
  }
}
function GBR_5MW_STORAGE_tree_5(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -4086.7074787500005;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -2496.51790875;
        } else {
          return -1704.0803287499984;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -1146.6577687499994;
      } else {
        return 374.4444712500008;
      }
    }
  } else {
    return 4342.537271249999;
  }
}
function GBR_5MW_STORAGE_tree_6(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -3678.036730875;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -2246.866117875;
        } else {
          return -1533.6722958749979;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -1031.9919918750002;
      } else {
        return 337.000024125;
      }
    }
  } else {
    return 3908.283544124999;
  }
}
function GBR_5MW_STORAGE_tree_7(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -3310.2330577875;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -2022.1795060875002;
        } else {
          return -1380.3050662874975;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -928.7927926875;
      } else {
        return 303.3000217125009;
      }
    }
  } else {
    return 3517.4551897124984;
  }
}
function GBR_5MW_STORAGE_tree_8(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -2979.20975200875;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -1819.9615554787506;
        } else {
          return -1242.2745596587474;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -835.9135134187491;
      } else {
        return 272.97001954125153;
      }
    }
  } else {
    return 3165.7096707412493;
  }
}
function GBR_5MW_STORAGE_tree_9(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -2681.2887768078754;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -1637.9653999308757;
        } else {
          return -1118.047103692873;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -752.3221620768745;
      } else {
        return 245.6730175871271;
      }
    }
  } else {
    return 2849.138703667124;
  }
}
function GBR_5MW_STORAGE_tree_10(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -2413.1598991270876;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -1474.1688599377885;
        } else {
          return -1006.2423933235859;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -677.0899458691874;
      } else {
        return 221.10571582841476;
      }
    }
  } else {
    return 2564.224833300412;
  }
}
function GBR_5MW_STORAGE_tree_11(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -2171.843909214379;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -1326.7519739440095;
        } else {
          return -905.6181539912277;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -609.3809512822681;
      } else {
        return 198.9951442455731;
      }
    }
  } else {
    return 2307.8023499703704;
  }
}
function GBR_5MW_STORAGE_tree_12(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -1954.6595182929414;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -1194.0767765496084;
        } else {
          return -815.056338592105;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -548.4428561540408;
      } else {
        return 179.09562982101488;
      }
    }
  } else {
    return 2077.0221149733334;
  }
}
function GBR_5MW_STORAGE_tree_13(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -1759.1935664636476;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -1074.6690988946475;
        } else {
          return -733.5507047328947;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -493.59857053863743;
      } else {
        return 161.18606683891267;
      }
    }
  } else {
    return 1869.319903476;
  }
}
function GBR_5MW_STORAGE_tree_14(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -1583.274209817283;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -967.2021890051828;
        } else {
          return -660.195634259605;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -444.23871348477405;
      } else {
        return 145.06746015502176;
      }
    }
  } else {
    return 1682.3879131283993;
  }
}
function GBR_5MW_STORAGE_tree_15(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -1424.9467888355548;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -870.4819701046645;
        } else {
          return -594.1760708336442;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -399.81484213629665;
      } else {
        return 130.5607141395194;
      }
    }
  } else {
    return 1514.1491218155588;
  }
}
function GBR_5MW_STORAGE_tree_16(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -1282.4521099519989;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -783.4337730941979;
        } else {
          return -534.7584637502796;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -359.83335792266735;
      } else {
        return 117.50464272556746;
      }
    }
  } else {
    return 1362.7342096340035;
  }
}
function GBR_5MW_STORAGE_tree_17(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -1154.2068989567988;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -705.0903957847786;
        } else {
          return -481.2826173752519;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -323.85002213040025;
      } else {
        return 105.75417845301126;
      }
    }
  } else {
    return 1226.4607886706035;
  }
}
function GBR_5MW_STORAGE_tree_18(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -1038.7862090611188;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -634.5813562063004;
        } else {
          return -433.15435563772644;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -291.4650199173602;
      } else {
        return 95.1787606077105;
      }
    }
  } else {
    return 1103.8147098035424;
  }
}
function GBR_5MW_STORAGE_tree_19(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -934.907588155007;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -571.1232205856704;
        } else {
          return -389.8389200739539;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -262.3185179256243;
      } else {
        return 85.66088454694;
      }
    }
  } else {
    return 993.4332388231887;
  }
}
function GBR_5MW_STORAGE_tree_20(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -841.4168293395064;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -514.0108985271036;
        } else {
          return -350.8550280665586;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -236.08666613306195;
      } else {
        return 77.09479609224582;
      }
    }
  } else {
    return 894.0899149408706;
  }
}
function GBR_5MW_STORAGE_tree_21(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -757.2751464055559;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -462.6098086743932;
        } else {
          return -315.76952525990237;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -212.47799951975594;
      } else {
        return 69.3853164830216;
      }
    }
  } else {
    return 804.6809234467837;
  }
}
function GBR_5MW_STORAGE_tree_22(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -681.5476317650005;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -416.3488278069535;
        } else {
          return -284.19257273391213;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -191.2301995677808;
      } else {
        return 62.44678483471944;
      }
    }
  } else {
    return 724.2128311021042;
  }
}
function GBR_5MW_STORAGE_tree_23(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -613.3928685885003;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -374.71394502625844;
        } else {
          return -255.7733154605212;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -172.10717961100272;
      } else {
        return 56.202106351247494;
      }
    }
  } else {
    return 651.7915479918956;
  }
}
function GBR_5MW_STORAGE_tree_24(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -552.0535817296504;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -337.2425505236324;
        } else {
          return -230.19598391446925;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -154.89646164990245;
      } else {
        return 50.581895716122744;
      }
    }
  } else {
    return 586.6123931927068;
  }
}
function GBR_5MW_STORAGE_tree_25(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -496.8482235566853;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -303.5182954712691;
        } else {
          return -207.17638552302196;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -139.40681548491193;
      } else {
        return 45.52370614451138;
      }
    }
  } else {
    return 527.9511538734369;
  }
}
function GBR_5MW_STORAGE_tree_26(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -447.16340120101677;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -273.16646592414236;
        } else {
          return -186.4587469707194;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -125.4661339364211;
      } else {
        return 40.97133553006097;
      }
    }
  } else {
    return 475.15603848609317;
  }
}
function GBR_5MW_STORAGE_tree_27(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -402.44706108091486;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -245.8498193317282;
        } else {
          return -167.81287227364737;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -112.91952054277863;
      } else {
        return 36.87420197705433;
      }
    }
  } else {
    return 427.64043463748385;
  }
}
function GBR_5MW_STORAGE_tree_28(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -362.2023549728233;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -221.26483739855576;
        } else {
          return -151.031585046283;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -101.6275684885004;
      } else {
        return 33.186781779348166;
      }
    }
  } else {
    return 384.8763911737369;
  }
}
function GBR_5MW_STORAGE_tree_29(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -325.9821194755409;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -199.1383536587;
        } else {
          return -135.92842654165452;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -91.46481163965018;
      } else {
        return 29.868103601413168;
      }
    }
  } else {
    return 346.38875205636214;
  }
}
function GBR_5MW_STORAGE_tree_30(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -293.3839075279866;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -179.22451829283;
        } else {
          return -122.33558388748861;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -82.31833047568489;
      } else {
        return 26.881293241271123;
      }
    }
  } else {
    return 311.74987685072483;
  }
}
function GBR_5MW_STORAGE_tree_31(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -264.04551677518793;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -161.3020664635469;
        } else {
          return -110.10202549873975;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -74.08649742811667;
      } else {
        return 24.193163917143465;
      }
    }
  } else {
    return 280.57488916565126;
  }
}
function GBR_5MW_STORAGE_tree_32(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -237.64096509766932;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -145.17185981719194;
        } else {
          return -99.09182294886614;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -66.6778476853051;
      } else {
        return 21.77384752543003;
      }
    }
  } else {
    return 252.51740024908577;
  }
}
function GBR_5MW_STORAGE_tree_33(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -213.8768685879022;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -130.65467383547275;
        } else {
          return -89.18264065397943;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -60.01006291677459;
      } else {
        return 19.596462772886298;
      }
    }
  } else {
    return 227.26566022417683;
  }
}
function GBR_5MW_STORAGE_tree_34(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -192.4891817291118;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -117.58920645192575;
        } else {
          return -80.2643765885814;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -54.0090566250974;
      } else {
        return 17.636816495598396;
      }
    }
  } else {
    return 204.53909420175842;
  }
}
function GBR_5MW_STORAGE_tree_35(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -173.24026355620072;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -105.83028580673272;
        } else {
          return -72.23793892972299;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -48.60815096258739;
      } else {
        return 15.873134846038738;
      }
    }
  } else {
    return 184.08518478158294;
  }
}
function GBR_5MW_STORAGE_tree_36(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -155.91623720058078;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -95.24725722605945;
        } else {
          return -65.01414503675096;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -43.747335866328285;
      } else {
        return 14.2858213614345;
      }
    }
  } else {
    return 165.676666303425;
  }
}
function GBR_5MW_STORAGE_tree_37(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -140.32461348052266;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -85.72253150345387;
        } else {
          return -58.51273053307614;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -39.37260227969546;
      } else {
        return 12.857239225291778;
      }
    }
  } else {
    return 149.1089996730807;
  }
}
function GBR_5MW_STORAGE_tree_38(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -126.29215213247062;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -77.15027835310866;
        } else {
          return -52.661457479768615;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -35.435342051725456;
      } else {
        return 11.571515302763146;
      }
    }
  } else {
    return 134.19809970577262;
  }
}
function GBR_5MW_STORAGE_tree_39(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -113.66293691922374;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -69.43525051779761;
        } else {
          return -47.39531173179148;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -31.891807846553093;
      } else {
        return 10.414363772486467;
      }
    }
  } else {
    return 120.77828973519354;
  }
}
function GBR_5MW_STORAGE_tree_40(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -102.2966432273015;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -62.49172546601767;
        } else {
          return -42.655780558612605;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -28.702627061898056;
      } else {
        return 9.372927395237639;
      }
    }
  } else {
    return 108.70046076167273;
  }
}
function GBR_5MW_STORAGE_tree_41(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -92.06697890457144;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -56.242552919416084;
        } else {
          return -38.39020250275098;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -25.832364355708705;
      } else {
        return 8.435634655714239;
      }
    }
  } else {
    return 97.83041468550437;
  }
}
function GBR_5MW_STORAGE_tree_42(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -82.86028101411421;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -50.61829762747402;
        } else {
          return -34.55118225247588;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -23.249127920137653;
      } else {
        return 7.5920711901435425;
      }
    }
  } else {
    return 88.04737321695575;
  }
}
function GBR_5MW_STORAGE_tree_43(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -74.57425291270283;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -45.55646786472698;
        } else {
          return -31.09606402722784;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -20.92421512812416;
      } else {
        return 6.832864071129734;
      }
    }
  } else {
    return 79.24263589526163;
  }
}
function GBR_5MW_STORAGE_tree_44(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -67.11682762143255;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -41.000821078254376;
        } else {
          return -27.98645762450542;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -18.831793615311653;
      } else {
        return 6.1495776640167605;
      }
    }
  } else {
    return 71.31837230573728;
  }
}
function GBR_5MW_STORAGE_tree_45(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -60.40514485928907;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -36.9007389704293;
        } else {
          return -25.18781186205524;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -16.94861425378076;
      } else {
        return 5.534619897614903;
      }
    }
  } else {
    return 64.18653507516501;
  }
}
function GBR_5MW_STORAGE_tree_46(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -54.36463037336034;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -33.210665073386735;
        } else {
          return -22.66903067585008;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -15.253752828402867;
      } else {
        return 4.98115790785414;
      }
    }
  } else {
    return 57.767881567648146;
  }
}
function GBR_5MW_STORAGE_tree_47(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -48.92816733602422;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -29.889598566048335;
        } else {
          return -20.40212760826489;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -13.72837754556258;
      } else {
        return 4.48304211706818;
      }
    }
  } else {
    return 51.99109341088479;
  }
}
function GBR_5MW_STORAGE_tree_48(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -44.03535060242166;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -26.90063870944323;
        } else {
          return -18.36191484743813;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -12.355539791005867;
      } else {
        return 4.034737905361908;
      }
    }
  } else {
    return 46.79198406979776;
  }
}
function GBR_5MW_STORAGE_tree_49(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -39.63181554217954;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -24.21057483849927;
        } else {
          return -16.525723362694407;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -11.11998581190528;
      } else {
        return 3.6312641148251714;
      }
    }
  } else {
    return 42.11278566281908;
  }
}
function GBR_5MW_STORAGE_tree_50(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -35.668633987961584;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -21.789517354649433;
        } else {
          return -14.873151026425148;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -10.007987230715116;
      } else {
        return 3.2681377033422905;
      }
    }
  } else {
    return 37.90150709653608;
  }
}
function GBR_5MW_STORAGE_tree_51(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -32.101770589165426;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -19.610565619184854;
        } else {
          return -13.385835923782906;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -9.00718850764315;
      } else {
        return 2.9413239330078795;
      }
    }
  } else {
    return 34.11135638688211;
  }
}
function GBR_5MW_STORAGE_tree_52(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -28.891593530248883;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -17.649509057266187;
        } else {
          return -12.047252331404707;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -8.106469656879199;
      } else {
        return 2.6471915397069097;
      }
    }
  } else {
    return 30.700220748192805;
  }
}
function GBR_5MW_STORAGE_tree_53(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -26.00243417722413;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -15.88455815153975;
        } else {
          return -10.842527098264327;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -7.295822691191461;
      } else {
        return 2.382472385736037;
      }
    }
  } else {
    return 27.630198673374252;
  }
}
function GBR_5MW_STORAGE_tree_54(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -23.402190759501536;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -14.296102336385957;
        } else {
          return -9.758274388437712;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -6.566240422072042;
      } else {
        return 2.1442251471617055;
      }
    }
  } else {
    return 24.867178806038282;
  }
}
function GBR_5MW_STORAGE_tree_55(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -21.061971683551292;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -12.866492102747543;
        } else {
          return -8.782446949593577;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -5.909616379864929;
      } else {
        return 1.9298026324449893;
      }
    }
  } else {
    return 22.380460925433;
  }
}
function GBR_5MW_STORAGE_tree_56(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -18.955774515196026;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -11.579842892472698;
        } else {
          return -7.904202254634583;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -5.318654741878163;
      } else {
        return 1.736822369201036;
      }
    }
  } else {
    return 20.14241483288788;
  }
}
function GBR_5MW_STORAGE_tree_57(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -17.06019706367624;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -10.4218586032257;
        } else {
          return -7.113782029171489;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -4.7867892676904376;
      } else {
        return 1.5631401322807505;
      }
    }
  } else {
    return 18.12817334959982;
  }
}
function GBR_5MW_STORAGE_tree_58(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -15.3541773573088;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -9.379672742903495;
        } else {
          return -6.402403826254158;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -4.308110340921303;
      } else {
        return 1.4068261190532212;
      }
    }
  } else {
    return 16.315356014638382;
  }
}
function GBR_5MW_STORAGE_tree_59(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -13.81875962157801;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -8.441705468612781;
        } else {
          return -5.762163443629106;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -3.877299306828718;
      } else {
        return 1.2661435071477172;
      }
    }
  } else {
    return 14.683820413174544;
  }
}
function GBR_5MW_STORAGE_tree_60(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -12.436883659420346;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -7.597534921751503;
        } else {
          return -5.185947099265832;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -3.4895693761454822;
      } else {
        return 1.1395291564331274;
      }
    }
  } else {
    return 13.215438371858909;
  }
}
function GBR_5MW_STORAGE_tree_61(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -11.193195293478311;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -6.837781429576353;
        } else {
          return -4.667352389339612;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -3.140612438531207;
      } else {
        return 1.0255762407905422;
      }
    }
  } else {
    return 11.893894534674473;
  }
}
function GBR_5MW_STORAGE_tree_62(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -10.073875764130662;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -6.1540032866187175;
        } else {
          return -4.200617150405378;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -2.826551194678359;
      } else {
        return 0.923018616711488;
      }
    }
  } else {
    return 10.704505081208481;
  }
}
function GBR_5MW_STORAGE_tree_63(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -9.066488187717368;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -5.538602957956755;
        } else {
          return -3.7805554353644766;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -2.543896075210796;
      } else {
        return 0.8307167550410668;
      }
    }
  } else {
    return 9.634054573089088;
  }
}
function GBR_5MW_STORAGE_tree_64(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -8.15983936894554;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -4.9847426621608975;
        } else {
          return -3.4024998918284837;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -2.2895064676895345;
      } else {
        return 0.7476450795365963;
      }
    }
  } else {
    return 8.670649115781998;
  }
}
function GBR_5MW_STORAGE_tree_65(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -7.343855432050987;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -4.486268395944535;
        } else {
          return -3.062249902645817;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -2.060555820920854;
      } else {
        return 0.6728805715829367;
      }
    }
  } else {
    return 7.803584204204526;
  }
}
function GBR_5MW_STORAGE_tree_66(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -6.609469888845979;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -4.037641556349627;
        } else {
          return -2.7560249123816902;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -1.8545002388291323;
      } else {
        return 0.605592514424643;
      }
    }
  } else {
    return 7.023225783785165;
  }
}
function GBR_5MW_STORAGE_tree_67(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -5.948522899961517;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -3.633877400714482;
        } else {
          return -2.480422421143885;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -1.6690502149458553;
      } else {
        return 0.5450332629825425;
      }
    }
  } else {
    return 6.320903205407376;
  }
}
function GBR_5MW_STORAGE_tree_68(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -5.35367060996532;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -3.270489660642852;
        } else {
          return -2.2323801790298603;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -1.5021451934517245;
      } else {
        return 0.49052993668374256;
      }
    }
  } else {
    return 5.688812884865911;
  }
}
function GBR_5MW_STORAGE_tree_69(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -4.818303548968743;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -2.943440694578385;
        } else {
          return -2.0091421611268743;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -1.3519306741063701;
      } else {
        return 0.4414769430150045;
      }
    }
  } else {
    return 5.119931596378592;
  }
}
function GBR_5MW_STORAGE_tree_70(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -4.336473194071914;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -2.6490966251203645;
        } else {
          return -1.8082279450145506;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -1.2167376066954603;
      } else {
        return 0.39732924871350406;
      }
    }
  } else {
    return 4.607938436740369;
  }
}
function GBR_5MW_STORAGE_tree_71(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -3.9028258746648135;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -2.38418696260851;
        } else {
          return -1.6274051505133684;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -1.095063846026278;
      } else {
        return 0.35759632384178985;
      }
    }
  } else {
    return 4.147144593065605;
  }
}
function GBR_5MW_STORAGE_tree_72(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -3.512543287198241;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -2.145768266347659;
        } else {
          return -1.4646646354622135;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -0.9855574614239231;
      } else {
        return 0.32183669145706517;
      }
    }
  } else {
    return 3.732430133757589;
  }
}
function GBR_5MW_STORAGE_tree_73(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -3.161288958478508;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -1.931191439713075;
        } else {
          return -1.318198171916265;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -0.8870017152812579;
      } else {
        return 0.28965302231154055;
      }
    }
  } else {
    return 3.3591871203825576;
  }
}
function GBR_5MW_STORAGE_tree_74(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -2.845160062630839;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -1.7380722957414037;
        } else {
          return -1.1863783547250932;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -0.7983015437530412;
      } else {
        return 0.2606877200796589;
      }
    }
  } else {
    return 3.023268408345757;
  }
}
function GBR_5MW_STORAGE_tree_75(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -2.5606440563678916;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -1.5642650661675361;
        } else {
          return -1.0677405192527658;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -0.7184713893775552;
      } else {
        return 0.2346189480722387;
      }
    }
  } else {
    return 2.720941567509726;
  }
}
function GBR_5MW_STORAGE_tree_76(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -2.3045796507312843;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -1.4078385595512373;
        } else {
          return -0.9609664673271254;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -0.6466242504393449;
      } else {
        return 0.21115705326519674;
      }
    }
  } else {
    return 2.4488474107602087;
  }
}
function GBR_5MW_STORAGE_tree_77(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -2.074121685658156;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -1.2670547035959316;
        } else {
          return -0.8648698205943219;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -0.5819618253954104;
      } else {
        return 0.19004134793794947;
      }
    }
  } else {
    return 2.203962669686007;
  }
}
function GBR_5MW_STORAGE_tree_78(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -1.866709517092204;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -1.1403492332365204;
        } else {
          return -0.778382838534526;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -0.5237656428562332;
      } else {
        return 0.17103721314379072;
      }
    }
  } else {
    return 1.983566402715951;
  }
}
function GBR_5MW_STORAGE_tree_79(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -1.6800385653828016;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -1.0263143099127774;
        } else {
          return -0.7005445546810734;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -0.47138907857060985;
      } else {
        return 0.15393349182886595;
      }
    }
  } else {
    return 1.7852097624454473;
  }
}
function GBR_5MW_STORAGE_tree_80(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -1.512034708844567;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -0.9236828789216815;
        } else {
          return -0.6304900992126932;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -0.4242501707140036;
      } else {
        return 0.13854014264506986;
      }
    }
  } else {
    return 1.6066887861998111;
  }
}
function GBR_5MW_STORAGE_tree_81(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -1.3608312379601557;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -0.8313145910296953;
        } else {
          return -0.5674410892916057;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -0.38182515364223946;
      } else {
        return 0.12468612837983528;
      }
    }
  } else {
    return 1.4460199075801938;
  }
}
function GBR_5MW_STORAGE_tree_82(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -1.2247481141639582;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -0.7481831319264529;
        } else {
          return -0.510696980362809;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -0.34364263827774266;
      } else {
        return 0.11221751554148796;
      }
    }
  } else {
    return 1.3014179168239934;
  }
}
function GBR_5MW_STORAGE_tree_83(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -1.1022733027475624;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -0.6733648187337167;
        } else {
          return -0.4596272823264371;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -0.3092783744496046;
      } else {
        return 0.10099576398715726;
      }
    }
  } else {
    return 1.171276125140139;
  }
}
function GBR_5MW_STORAGE_tree_84(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -0.9920459724726243;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -0.6060283368606179;
        } else {
          return -0.41366455409388436;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -0.2783505370043713;
      } else {
        return 0.09089618758844153;
      }
    }
  } else {
    return 1.0541485126268526;
  }
}
function GBR_5MW_STORAGE_tree_85(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -0.8928413752255437;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -0.5454255031745561;
        } else {
          return -0.3722980986840412;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -0.25051548330429796;
      } else {
        return 0.08180656882905168;
      }
    }
  } else {
    return 0.9487336613638035;
  }
}
function GBR_5MW_STORAGE_tree_86(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -0.8035572377029894;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -0.49088295285673667;
        } else {
          return -0.33506828881581896;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -0.2254639349739591;
      } else {
        return 0.07362591194578272;
      }
    }
  } else {
    return 0.8538602952285146;
  }
}
function GBR_5MW_STORAGE_tree_87(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -0.7232015139325085;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -0.44179465757133585;
        } else {
          return -0.30156145993441896;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -0.2029175414763813;
      } else {
        return 0.06626332075029495;
      }
    }
  } else {
    return 0.7684742657074821;
  }
}
function GBR_5MW_STORAGE_tree_88(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -0.6508813625391667;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -0.3976151918141113;
        } else {
          return -0.2714053139407042;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -0.18262578732901602;
      } else {
        return 0.05963698867526546;
      }
    }
  } else {
    return 0.6916268391360063;
  }
}
function GBR_5MW_STORAGE_tree_89(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -0.5857932262852046;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -0.3578536726327002;
        } else {
          return -0.2442647825464519;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -0.16436320859611442;
      } else {
        return 0.053673289807193214;
      }
    }
  } else {
    return 0.6224641552216781;
  }
}
function GBR_5MW_STORAGE_tree_90(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -0.5272139036565022;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -0.32206830536961206;
        } else {
          return -0.2198383042914429;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -0.14792688773650298;
      } else {
        return 0.04830596082683769;
      }
    }
  } else {
    return 0.5602177397013293;
  }
}
function GBR_5MW_STORAGE_tree_91(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -0.4744925132908975;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -0.28986147483283276;
        } else {
          return -0.19785447386220767;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -0.13313419896257983;
      } else {
        return 0.04347536474415392;
      }
    }
  } else {
    return 0.5041959657319239;
  }
}
function GBR_5MW_STORAGE_tree_92(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -0.4270432619618987;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -0.26087532734982233;
        } else {
          return -0.17806902647589595;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -0.11982077906668565;
      } else {
        return 0.03912782826955663;
      }
    }
  } else {
    return 0.45377636915873154;
  }
}
function GBR_5MW_STORAGE_tree_93(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -0.3843389357657543;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -0.23478779461493104;
        } else {
          return -0.1602621238280335;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -0.10783870116028993;
      } else {
        return 0.03521504544187337;
      }
    }
  } else {
    return 0.4083987322446774;
  }
}
function GBR_5MW_STORAGE_tree_94(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -0.3459050421893153;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -0.211309015153347;
        } else {
          return -0.1442359114453211;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -0.09705483104426094;
      } else {
        return 0.03169354089732224;
      }
    }
  } else {
    return 0.36755885901948204;
  }
}
function GBR_5MW_STORAGE_tree_95(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[0] <= -0.4472135901451111) {
      if (sample[3] <= -1.3416407704353333) {
        return -0.31131453797024733;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -0.19017811363846704;
        } else {
          return -0.12981232030051615;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -0.0873493479393801;
      } else {
        return 0.028524186807771912;
      }
    }
  } else {
    return 0.33080297311607865;
  }
}
function GBR_5MW_STORAGE_tree_96(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -0.28018308417313165;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -0.17116030227498413;
        } else {
          return -0.11683108827037358;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -0.07861441314526019;
      } else {
        return 0.025671768127722316;
      }
    }
  } else {
    return 0.2977226758048346;
  }
}
function GBR_5MW_STORAGE_tree_97(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -0.252164775755773;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -0.15404427204703097;
        } else {
          return -0.10514797944324528;
        }
      }
    } else {
      if (sample[3] <= 0.4472135901451111) {
        return -0.07075297183109797;
      } else {
        return 0.023104591315131984;
      }
    }
  } else {
    return 0.2679504082261701;
  }
}
function GBR_5MW_STORAGE_tree_98(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[2] <= -1.1531133353710175) {
        return -0.22694829818010476;
      } else {
        if (sample[1] <= 0.2581988573074341) {
          return -0.13863984484214598;
        } else {
          return -0.0946331814993755;
        }
      }
    } else {
      if (sample[0] <= 0.4472135901451111) {
        return -0.06367767464780627;
      } else {
        return 0.020794132184164482;
      }
    }
  } else {
    return 0.2411553674028255;
  }
}
function GBR_5MW_STORAGE_tree_99(sample) {
  if (sample[2] <= 0.7337993942201138) {
    if (sample[3] <= -0.4472135901451111) {
      if (sample[0] <= -1.3416407704353333) {
        return -0.20425346836191238;
      } else {
        if (sample[2] <= -0.5241424180567265) {
          return -0.12477586035765853;
        } else {
          return -0.08516986334961985;
        }
      }
    } else {
      if (sample[2] <= -0.31448546424508095) {
        return -0.057309907182570896;
      } else {
        return 0.01871471896629373;
      }
    }
  } else {
    return 0.21703983066254295;
  }
}

function GBR_5MW_STORAGE(sample) {
  let score = 9801.875;
  const lr = 0.1;
  score += lr * GBR_5MW_STORAGE_tree_0(sample);
  score += lr * GBR_5MW_STORAGE_tree_1(sample);
  score += lr * GBR_5MW_STORAGE_tree_2(sample);
  score += lr * GBR_5MW_STORAGE_tree_3(sample);
  score += lr * GBR_5MW_STORAGE_tree_4(sample);
  score += lr * GBR_5MW_STORAGE_tree_5(sample);
  score += lr * GBR_5MW_STORAGE_tree_6(sample);
  score += lr * GBR_5MW_STORAGE_tree_7(sample);
  score += lr * GBR_5MW_STORAGE_tree_8(sample);
  score += lr * GBR_5MW_STORAGE_tree_9(sample);
  score += lr * GBR_5MW_STORAGE_tree_10(sample);
  score += lr * GBR_5MW_STORAGE_tree_11(sample);
  score += lr * GBR_5MW_STORAGE_tree_12(sample);
  score += lr * GBR_5MW_STORAGE_tree_13(sample);
  score += lr * GBR_5MW_STORAGE_tree_14(sample);
  score += lr * GBR_5MW_STORAGE_tree_15(sample);
  score += lr * GBR_5MW_STORAGE_tree_16(sample);
  score += lr * GBR_5MW_STORAGE_tree_17(sample);
  score += lr * GBR_5MW_STORAGE_tree_18(sample);
  score += lr * GBR_5MW_STORAGE_tree_19(sample);
  score += lr * GBR_5MW_STORAGE_tree_20(sample);
  score += lr * GBR_5MW_STORAGE_tree_21(sample);
  score += lr * GBR_5MW_STORAGE_tree_22(sample);
  score += lr * GBR_5MW_STORAGE_tree_23(sample);
  score += lr * GBR_5MW_STORAGE_tree_24(sample);
  score += lr * GBR_5MW_STORAGE_tree_25(sample);
  score += lr * GBR_5MW_STORAGE_tree_26(sample);
  score += lr * GBR_5MW_STORAGE_tree_27(sample);
  score += lr * GBR_5MW_STORAGE_tree_28(sample);
  score += lr * GBR_5MW_STORAGE_tree_29(sample);
  score += lr * GBR_5MW_STORAGE_tree_30(sample);
  score += lr * GBR_5MW_STORAGE_tree_31(sample);
  score += lr * GBR_5MW_STORAGE_tree_32(sample);
  score += lr * GBR_5MW_STORAGE_tree_33(sample);
  score += lr * GBR_5MW_STORAGE_tree_34(sample);
  score += lr * GBR_5MW_STORAGE_tree_35(sample);
  score += lr * GBR_5MW_STORAGE_tree_36(sample);
  score += lr * GBR_5MW_STORAGE_tree_37(sample);
  score += lr * GBR_5MW_STORAGE_tree_38(sample);
  score += lr * GBR_5MW_STORAGE_tree_39(sample);
  score += lr * GBR_5MW_STORAGE_tree_40(sample);
  score += lr * GBR_5MW_STORAGE_tree_41(sample);
  score += lr * GBR_5MW_STORAGE_tree_42(sample);
  score += lr * GBR_5MW_STORAGE_tree_43(sample);
  score += lr * GBR_5MW_STORAGE_tree_44(sample);
  score += lr * GBR_5MW_STORAGE_tree_45(sample);
  score += lr * GBR_5MW_STORAGE_tree_46(sample);
  score += lr * GBR_5MW_STORAGE_tree_47(sample);
  score += lr * GBR_5MW_STORAGE_tree_48(sample);
  score += lr * GBR_5MW_STORAGE_tree_49(sample);
  score += lr * GBR_5MW_STORAGE_tree_50(sample);
  score += lr * GBR_5MW_STORAGE_tree_51(sample);
  score += lr * GBR_5MW_STORAGE_tree_52(sample);
  score += lr * GBR_5MW_STORAGE_tree_53(sample);
  score += lr * GBR_5MW_STORAGE_tree_54(sample);
  score += lr * GBR_5MW_STORAGE_tree_55(sample);
  score += lr * GBR_5MW_STORAGE_tree_56(sample);
  score += lr * GBR_5MW_STORAGE_tree_57(sample);
  score += lr * GBR_5MW_STORAGE_tree_58(sample);
  score += lr * GBR_5MW_STORAGE_tree_59(sample);
  score += lr * GBR_5MW_STORAGE_tree_60(sample);
  score += lr * GBR_5MW_STORAGE_tree_61(sample);
  score += lr * GBR_5MW_STORAGE_tree_62(sample);
  score += lr * GBR_5MW_STORAGE_tree_63(sample);
  score += lr * GBR_5MW_STORAGE_tree_64(sample);
  score += lr * GBR_5MW_STORAGE_tree_65(sample);
  score += lr * GBR_5MW_STORAGE_tree_66(sample);
  score += lr * GBR_5MW_STORAGE_tree_67(sample);
  score += lr * GBR_5MW_STORAGE_tree_68(sample);
  score += lr * GBR_5MW_STORAGE_tree_69(sample);
  score += lr * GBR_5MW_STORAGE_tree_70(sample);
  score += lr * GBR_5MW_STORAGE_tree_71(sample);
  score += lr * GBR_5MW_STORAGE_tree_72(sample);
  score += lr * GBR_5MW_STORAGE_tree_73(sample);
  score += lr * GBR_5MW_STORAGE_tree_74(sample);
  score += lr * GBR_5MW_STORAGE_tree_75(sample);
  score += lr * GBR_5MW_STORAGE_tree_76(sample);
  score += lr * GBR_5MW_STORAGE_tree_77(sample);
  score += lr * GBR_5MW_STORAGE_tree_78(sample);
  score += lr * GBR_5MW_STORAGE_tree_79(sample);
  score += lr * GBR_5MW_STORAGE_tree_80(sample);
  score += lr * GBR_5MW_STORAGE_tree_81(sample);
  score += lr * GBR_5MW_STORAGE_tree_82(sample);
  score += lr * GBR_5MW_STORAGE_tree_83(sample);
  score += lr * GBR_5MW_STORAGE_tree_84(sample);
  score += lr * GBR_5MW_STORAGE_tree_85(sample);
  score += lr * GBR_5MW_STORAGE_tree_86(sample);
  score += lr * GBR_5MW_STORAGE_tree_87(sample);
  score += lr * GBR_5MW_STORAGE_tree_88(sample);
  score += lr * GBR_5MW_STORAGE_tree_89(sample);
  score += lr * GBR_5MW_STORAGE_tree_90(sample);
  score += lr * GBR_5MW_STORAGE_tree_91(sample);
  score += lr * GBR_5MW_STORAGE_tree_92(sample);
  score += lr * GBR_5MW_STORAGE_tree_93(sample);
  score += lr * GBR_5MW_STORAGE_tree_94(sample);
  score += lr * GBR_5MW_STORAGE_tree_95(sample);
  score += lr * GBR_5MW_STORAGE_tree_96(sample);
  score += lr * GBR_5MW_STORAGE_tree_97(sample);
  score += lr * GBR_5MW_STORAGE_tree_98(sample);
  score += lr * GBR_5MW_STORAGE_tree_99(sample);
  return score;
}
function GBR_5MW_SUB_tree_0(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -3395.0;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= 0.4472135901451111) {
        return -241.0;
      } else {
        return 303.5;
      }
    } else {
      return 1755.5;
    }
  }
}
function GBR_5MW_SUB_tree_1(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -3055.5;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= 0.4472135901451111) {
        return -216.89999999999964;
      } else {
        return 273.14999999999964;
      }
    } else {
      return 1579.9500000000007;
    }
  }
}
function GBR_5MW_SUB_tree_2(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -2749.95;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= 0.4472135901451111) {
        return -195.20999999999913;
      } else {
        return 245.83499999999913;
      }
    } else {
      return 1421.955;
    }
  }
}
function GBR_5MW_SUB_tree_3(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -2474.955;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= 0.4472135901451111) {
        return -175.6889999999985;
      } else {
        return 221.2514999999985;
      }
    } else {
      return 1279.7595000000001;
    }
  }
}
function GBR_5MW_SUB_tree_4(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -2227.4595;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= 0.4472135901451111) {
        return -158.12009999999827;
      } else {
        return 199.12634999999864;
      }
    } else {
      return 1151.78355;
    }
  }
}
function GBR_5MW_SUB_tree_5(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -2004.7135500000004;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= 0.4472135901451111) {
        return -142.30808999999863;
      } else {
        return 179.21371499999805;
      }
    } else {
      return 1036.605195;
    }
  }
}
function GBR_5MW_SUB_tree_6(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -1804.2421950000007;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= -0.4472135901451111) {
        return 170.42271900000105;
      } else {
        return -134.1641980000013;
      }
    } else {
      return 932.9446755000008;
    }
  }
}
function GBR_5MW_SUB_tree_7(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -1623.817975500001;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= 0.4472135901451111) {
        return -134.96665566666556;
      } else {
        return 174.70876329999737;
      }
    } else {
      return 839.6502079500005;
    }
  }
}
function GBR_5MW_SUB_tree_8(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -1461.4361779500014;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= -0.4472135901451111) {
        return 166.87711266666793;
      } else {
        return -127.89614056444618;
      }
    } else {
      return 755.6851871550007;
    }
  }
}
function GBR_5MW_SUB_tree_9(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -1315.2925601550014;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= 0.4472135901451111) {
        return -128.33192625896208;
      } else {
        return 170.0275010264413;
      }
    } else {
      return 680.1166684395012;
    }
  }
}
function GBR_5MW_SUB_tree_10(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -1183.763304139501;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= -0.4472135901451111) {
        return 163.02259402589698;
      } else {
        return -122.16396236779867;
      }
    } else {
      return 612.1050015955516;
    }
  }
}
function GBR_5MW_SUB_tree_11(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -1065.386973725551;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= 0.4472135901451111) {
        return -122.29477448919927;
      } else {
        return 165.24114716057738;
      }
    } else {
      return 550.8945014359961;
    }
  }
}
function GBR_5MW_SUB_tree_12(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -958.8482763529955;
  } else {
    if (sample[1] <= 0.5773502588272095) {
      if (sample[0] <= -0.4472135901451111) {
        return 158.94981207222736;
      } else {
        return -116.88715012541768;
      }
    } else {
      return 495.80505129239646;
    }
  }
}
function GBR_5MW_SUB_tree_13(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -862.9634487176963;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 143.054830865005;
      } else {
        return -636.4068002527501;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 160.4057474570618;
      } else {
        return 446.22454616315736;
      }
    }
  }
}
function GBR_5MW_SUB_tree_14(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -776.6671038459262;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 128.74934777850467;
      } else {
        return -572.7661202274749;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 144.36517271135563;
      } else {
        return 401.6020915468416;
      }
    }
  }
}
function GBR_5MW_SUB_tree_15(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -699.0003934613333;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 115.87441300065439;
      } else {
        return -515.4895082047278;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 129.9286554402206;
      } else {
        return 361.4418823921569;
      }
    }
  }
}
function GBR_5MW_SUB_tree_16(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -629.1003541152004;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 104.28697170058877;
      } else {
        return -463.94055738425504;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 116.93578989619891;
      } else {
        return 325.2976941529414;
      }
    }
  }
}
function GBR_5MW_SUB_tree_17(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -566.1903187036805;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 93.85827453053025;
      } else {
        return -417.54650164582927;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 105.2422109065792;
      } else {
        return 292.76792473764726;
      }
    }
  }
}
function GBR_5MW_SUB_tree_18(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -509.5712868333121;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 84.47244707747814;
      } else {
        return -375.79185148124634;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 94.7179898159211;
      } else {
        return 263.4911322638818;
      }
    }
  }
}
function GBR_5MW_SUB_tree_19(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -458.61415814998054;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 76.02520236973032;
      } else {
        return -338.2126663331219;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 85.24619083432844;
      } else {
        return 237.1420190374938;
      }
    }
  }
}
function GBR_5MW_SUB_tree_20(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -412.75274233498203;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 68.42268213275747;
      } else {
        return -304.3913996998099;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 76.72157175089524;
      } else {
        return 213.4278171337446;
      }
    }
  }
}
function GBR_5MW_SUB_tree_21(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -371.4774681014842;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 61.58041391948245;
      } else {
        return -273.95225972982917;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 69.04941457580571;
      } else {
        return 192.08503542037033;
      }
    }
  }
}
function GBR_5MW_SUB_tree_22(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -334.3297212913358;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 55.4223725275333;
      } else {
        return -246.55703375684607;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 62.144473118225505;
      } else {
        return 172.87653187833348;
      }
    }
  }
}
function GBR_5MW_SUB_tree_23(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -300.89674916220247;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 49.880135274779605;
      } else {
        return -221.90133038116164;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 55.93002580640314;
      } else {
        return 155.58887869049977;
      }
    }
  }
}
function GBR_5MW_SUB_tree_24(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -270.8070742459822;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 44.892121747301644;
      } else {
        return -199.71119734304557;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 50.337023225762096;
      } else {
        return 140.02999082144925;
      }
    }
  }
}
function GBR_5MW_SUB_tree_25(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -243.72636682138364;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 40.402909572570934;
      } else {
        return -179.74007760874065;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 45.30332090318552;
      } else {
        return 126.02699173930523;
      }
    }
  }
}
function GBR_5MW_SUB_tree_26(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -219.35373013924527;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 36.362618615314204;
      } else {
        return -161.76606984786667;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 40.77298881286697;
      } else {
        return 113.42429256537434;
      }
    }
  }
}
function GBR_5MW_SUB_tree_27(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -197.41835712532065;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 32.726356753782966;
      } else {
        return -145.58946286308037;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 36.695689931581;
      } else {
        return 102.08186330883655;
      }
    }
  }
}
function GBR_5MW_SUB_tree_28(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -177.67652141278813;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 29.45372107840376;
      } else {
        return -131.03051657677224;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 33.02612093842254;
      } else {
        return 91.87367697795344;
      }
    }
  }
}
function GBR_5MW_SUB_tree_29(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -159.9088692715095;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 26.50834897056302;
      } else {
        return -117.92746491909475;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 29.723508844579555;
      } else {
        return 82.68630928015773;
      }
    }
  }
}
function GBR_5MW_SUB_tree_30(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -143.91798234435828;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 23.857514073506536;
      } else {
        return -106.13471842718536;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 26.751157960121418;
      } else {
        return 74.41767835214159;
      }
    }
  }
}
function GBR_5MW_SUB_tree_31(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -129.52618410992272;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 21.471762666154973;
      } else {
        return -95.52124658446701;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 24.076042164109822;
      } else {
        return 66.97591051692689;
      }
    }
  }
}
function GBR_5MW_SUB_tree_32(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -116.5735656989309;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 19.32458639953984;
      } else {
        return -85.9691219260203;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 21.668437947699204;
      } else {
        return 60.278319465234745;
      }
    }
  }
}
function GBR_5MW_SUB_tree_33(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -104.91620912903818;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 17.39212775958549;
      } else {
        return -77.37220973341846;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 19.5015941529291;
      } else {
        return 54.25048751871145;
      }
    }
  }
}
function GBR_5MW_SUB_tree_34(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -94.424588216134;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 15.652914983627852;
      } else {
        return -69.63498876007634;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 17.551434737635645;
      } else {
        return 48.82543876684031;
      }
    }
  }
}
function GBR_5MW_SUB_tree_35(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -84.9821293945206;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 14.087623485265794;
      } else {
        return -62.67148988406916;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 15.796291263872263;
      } else {
        return 43.94289489015682;
      }
    }
  }
}
function GBR_5MW_SUB_tree_36(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -76.48391645506854;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 12.678861136739215;
      } else {
        return -56.404340895662244;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 14.2166621374854;
      } else {
        return 39.548605401141685;
      }
    }
  }
}
function GBR_5MW_SUB_tree_37(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -68.83552480956132;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 11.410975023065475;
      } else {
        return -50.7639068060962;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 12.794995923737588;
      } else {
        return 35.59374486102752;
      }
    }
  }
}
function GBR_5MW_SUB_tree_38(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -61.951972328604825;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 10.26987752075911;
      } else {
        return -45.68751612548658;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 11.515496331363465;
      } else {
        return 32.03437037492404;
      }
    }
  }
}
function GBR_5MW_SUB_tree_39(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -55.75677509574416;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 9.242889768684108;
      } else {
        return -41.11876451293756;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 10.363946698227664;
      } else {
        return 28.830933337430906;
      }
    }
  }
}
function GBR_5MW_SUB_tree_40(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -50.181097586169926;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 8.318600791815697;
      } else {
        return -37.00688806164362;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 9.32755202840417;
      } else {
        return 25.947840003687816;
      }
    }
  }
}
function GBR_5MW_SUB_tree_41(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -45.16298782755257;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 7.486740712634855;
      } else {
        return -33.30619925547944;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 8.39479682556339;
      } else {
        return 23.35305600331958;
      }
    }
  }
}
function GBR_5MW_SUB_tree_42(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -40.64668904479731;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 6.7380666413719155;
      } else {
        return -29.97557932993186;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 7.555317143007414;
      } else {
        return 21.017750402987076;
      }
    }
  }
}
function GBR_5MW_SUB_tree_43(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -36.58202014031758;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 6.064259977234542;
      } else {
        return -26.978021396938857;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 6.799785428705945;
      } else {
        return 18.915975362688187;
      }
    }
  }
}
function GBR_5MW_SUB_tree_44(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -32.92381812628628;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 5.4578339795116335;
      } else {
        return -24.280219257245335;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 6.119806885835715;
      } else {
        return 17.024377826419368;
      }
    }
  }
}
function GBR_5MW_SUB_tree_45(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -29.631436313658014;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 4.912050581560834;
      } else {
        return -21.852197331520983;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 5.507826197252143;
      } else {
        return 15.321940043777431;
      }
    }
  }
}
function GBR_5MW_SUB_tree_46(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -26.668292682292304;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 4.420845523403841;
      } else {
        return -19.666977598369158;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 4.9570435775276565;
      } else {
        return 13.789746039399688;
      }
    }
  }
}
function GBR_5MW_SUB_tree_47(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -24.001463414063437;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 3.9787609710638208;
      } else {
        return -17.70027983853197;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 4.461339219775255;
      } else {
        return 12.410771435459537;
      }
    }
  }
}
function GBR_5MW_SUB_tree_48(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -21.601317072657366;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 3.5808848739579844;
      } else {
        return -15.930251854679227;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 4.015205297797365;
      } else {
        return 11.169694291913402;
      }
    }
  }
}
function GBR_5MW_SUB_tree_49(sample) {
  if (sample[0] <= -1.3416407704353333) {
    return -19.441185365391902;
  } else {
    if (sample[0] <= 0.4472135901451111) {
      if (sample[0] <= -0.4472135901451111) {
        return 3.2227963865625497;
      } else {
        return -14.337226669211304;
      }
    } else {
      if (sample[1] <= 0.5773502588272095) {
        return 3.613684768017265;
      } else {
        return 10.052724862722243;
      }
    }
  }
}

function GBR_5MW_SUB(sample) {
  let score = 8273.0;
  const lr = 0.1;
  score += lr * GBR_5MW_SUB_tree_0(sample);
  score += lr * GBR_5MW_SUB_tree_1(sample);
  score += lr * GBR_5MW_SUB_tree_2(sample);
  score += lr * GBR_5MW_SUB_tree_3(sample);
  score += lr * GBR_5MW_SUB_tree_4(sample);
  score += lr * GBR_5MW_SUB_tree_5(sample);
  score += lr * GBR_5MW_SUB_tree_6(sample);
  score += lr * GBR_5MW_SUB_tree_7(sample);
  score += lr * GBR_5MW_SUB_tree_8(sample);
  score += lr * GBR_5MW_SUB_tree_9(sample);
  score += lr * GBR_5MW_SUB_tree_10(sample);
  score += lr * GBR_5MW_SUB_tree_11(sample);
  score += lr * GBR_5MW_SUB_tree_12(sample);
  score += lr * GBR_5MW_SUB_tree_13(sample);
  score += lr * GBR_5MW_SUB_tree_14(sample);
  score += lr * GBR_5MW_SUB_tree_15(sample);
  score += lr * GBR_5MW_SUB_tree_16(sample);
  score += lr * GBR_5MW_SUB_tree_17(sample);
  score += lr * GBR_5MW_SUB_tree_18(sample);
  score += lr * GBR_5MW_SUB_tree_19(sample);
  score += lr * GBR_5MW_SUB_tree_20(sample);
  score += lr * GBR_5MW_SUB_tree_21(sample);
  score += lr * GBR_5MW_SUB_tree_22(sample);
  score += lr * GBR_5MW_SUB_tree_23(sample);
  score += lr * GBR_5MW_SUB_tree_24(sample);
  score += lr * GBR_5MW_SUB_tree_25(sample);
  score += lr * GBR_5MW_SUB_tree_26(sample);
  score += lr * GBR_5MW_SUB_tree_27(sample);
  score += lr * GBR_5MW_SUB_tree_28(sample);
  score += lr * GBR_5MW_SUB_tree_29(sample);
  score += lr * GBR_5MW_SUB_tree_30(sample);
  score += lr * GBR_5MW_SUB_tree_31(sample);
  score += lr * GBR_5MW_SUB_tree_32(sample);
  score += lr * GBR_5MW_SUB_tree_33(sample);
  score += lr * GBR_5MW_SUB_tree_34(sample);
  score += lr * GBR_5MW_SUB_tree_35(sample);
  score += lr * GBR_5MW_SUB_tree_36(sample);
  score += lr * GBR_5MW_SUB_tree_37(sample);
  score += lr * GBR_5MW_SUB_tree_38(sample);
  score += lr * GBR_5MW_SUB_tree_39(sample);
  score += lr * GBR_5MW_SUB_tree_40(sample);
  score += lr * GBR_5MW_SUB_tree_41(sample);
  score += lr * GBR_5MW_SUB_tree_42(sample);
  score += lr * GBR_5MW_SUB_tree_43(sample);
  score += lr * GBR_5MW_SUB_tree_44(sample);
  score += lr * GBR_5MW_SUB_tree_45(sample);
  score += lr * GBR_5MW_SUB_tree_46(sample);
  score += lr * GBR_5MW_SUB_tree_47(sample);
  score += lr * GBR_5MW_SUB_tree_48(sample);
  score += lr * GBR_5MW_SUB_tree_49(sample);
  return score;
}

function PREDICT_5MW(mw, duration, mwh, transformerCount) {
    console.log("--- [Debug] PREDICT_5MW Called ---");
    console.log("Inputs -> MW:", mw, "Duration:", duration, "MWh:", mwh, "Transformers:", transformerCount);

    const systemCapacity = 5.0;
    const nSets = mw / systemCapacity;  // ä½¿ç”¨åŠŸç‡è®¡ç®—å¥—æ•°
    console.log("Logic -> System Capacity:", systemCapacity, "Calculated nSets:", nSets, "(= MW / System_Cap)");
    
    // é¢„æµ‹å‚¨èƒ½åŒº
    const rawStorage = [mw, duration, mwh, nSets];
    const scaledStorage = rawStorage.map((v, i) => (v - SCALER_5MW_STORAGE.mean[i]) / SCALER_5MW_STORAGE.scale[i]);
    console.log("Features -> Storage (Scaled):", scaledStorage);
    
    const storageArea = GBR_5MW_STORAGE(scaledStorage);
    console.log("Result -> Storage Area (Raw):", storageArea);
    
    // é¢„æµ‹å‡å‹ç«™ - å§‹ç»ˆä½¿ç”¨1å°ä¸»å˜é¢„æµ‹åŸºå‡†å€¼
    const rawSub = [mw, 1];  // æ³¨æ„ï¼šè¿™é‡Œå›ºå®šä½¿ç”¨1å°ä¸»å˜
    const scaledSub = rawSub.map((v, i) => (v - SCALER_5MW_SUB.mean[i]) / SCALER_5MW_SUB.scale[i]);
    console.log("Features -> Substation (Scaled, base=1 transformer):", scaledSub);
    
    const subAreaBase = GBR_5MW_SUB(scaledSub);
    console.log("Result -> Substation Area (Base, 1 transformer):", subAreaBase);
    
    // åº”ç”¨ä¸»å˜ä¿®æ­£ç³»æ•°
    let subArea = subAreaBase;
    if (transformerCount === 2) {
        const transformerCorrection = 1.09;  // 2å°ä¸»å˜å¢åŠ 9%
        subArea = subAreaBase * transformerCorrection;
        console.log("Applied transformer correction (2 transformers):", transformerCorrection, "-> Final:", subArea);
    }
    
    return {
        storage: Math.max(0, storageArea),
        substation: Math.max(0, subArea),
        total: Math.max(0, storageArea) + Math.max(0, subArea)
    };
}

const SCALER_7_5MW_STORAGE = { mean: [174.5,3.111111111111111,531.3333333333334,23.266666666666666], scale: [88.23768406349346,0.9938079899999066,323.20753566572535,11.765024541799129] };
const SCALER_7_5MW_SUB = { mean: [174.5,1.1111111111111112], scale: [88.23768406349346,0.3142696805273545] };
function GBR_7_5MW_STORAGE_tree_0(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -6674.111111111111;
      } else {
        return -6211.111111111111;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -3395.1111111111113;
        } else {
          return -2632.1111111111113;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -299.1111111111113;
        } else {
          return 406.8888888888887;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 5446.888888888889;
      } else {
        return 2870.8888888888887;
      }
    } else {
      return 10486.888888888889;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_1(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -5590.0;
      } else {
        return -6006.700000000001;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -3055.6000000000004;
        } else {
          return -2368.8999999999996;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -269.2000000000007;
        } else {
          return 366.2000000000007;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 2583.7999999999993;
      } else {
        return 4902.200000000001;
      }
    } else {
      return 9438.2;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_2(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[2] <= -1.1334306597709656) {
        return -5031.0;
      } else {
        return -5406.030000000001;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -2132.01;
        } else {
          return -2750.040000000001;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -242.28000000000065;
        } else {
          return 329.5799999999999;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 4411.980000000001;
      } else {
        return 2325.42;
      }
    } else {
      return 8494.380000000001;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_3(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -4865.427;
      } else {
        return -4527.9;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -1918.809000000001;
        } else {
          return -2475.036;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 296.6219999999994;
        } else {
          return -218.05199999999968;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 3970.782000000001;
      } else {
        return 2092.8780000000006;
      }
    } else {
      return 7644.942000000001;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_4(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -4378.8843;
      } else {
        return -4075.1099999999997;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -1726.928100000001;
        } else {
          return -2227.5324;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -196.24679999999898;
        } else {
          return 266.9597999999987;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 3573.703800000001;
      } else {
        return 1883.5902000000006;
      }
    } else {
      return 6880.447800000002;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_5(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -3940.9958699999997;
      } else {
        return -3667.599;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -1554.2352900000005;
        } else {
          return -2004.77916;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 240.2638199999983;
        } else {
          return -176.62212;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 1695.2311800000007;
      } else {
        return 3216.333420000001;
      }
    } else {
      return 6192.403020000002;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_6(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -3300.8391;
      } else {
        return -3546.896283;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -1804.3012440000002;
        } else {
          return -1398.8117610000008;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -158.95990800000072;
        } else {
          return 216.2374379999983;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 2894.7000780000017;
      } else {
        return 1525.7080620000015;
      }
    } else {
      return 5573.162718000001;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_7(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -3192.2066547000004;
      } else {
        return -2970.75519;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -1623.8711196000004;
        } else {
          return -1258.9305849000011;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 194.61369419999755;
        } else {
          return -143.06391720000101;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 2605.230070200001;
      } else {
        return 1373.137255800002;
      }
    } else {
      return 5015.846446200001;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_8(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -2872.98598923;
      } else {
        return -2673.679671;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -1461.4840076399996;
        } else {
          return -1133.0375264100003;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 175.1523247799978;
        } else {
          return -128.75752548000128;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 2344.7070631800016;
      } else {
        return 1235.823530220001;
      }
    } else {
      return 4514.261801580002;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_9(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[3] <= -1.2976315021514893) {
        return -2585.687390307;
      } else {
        return -2406.3117039;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -1315.3356068759995;
        } else {
          return -1019.7337737689995;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -115.8817729320017;
        } else {
          return 157.63709230199856;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 2110.236356862002;
      } else {
        return 1112.2411771980005;
      }
    } else {
      return 4062.8356214220003;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_10(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -2165.68053351;
      } else {
        return -2327.1186512762997;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -917.7603963920992;
        } else {
          return -1183.8020461883998;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -104.29359563880098;
        } else {
          return 141.87338307179925;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 1001.0170594782012;
      } else {
        return 1899.2127211758016;
      }
    } else {
      return 3656.5520592797984;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_11(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -1949.1124801589995;
      } else {
        return -2094.40678614867;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -825.9843567528897;
        } else {
          return -1065.4218415695595;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -93.86423607492179;
        } else {
          return 127.68604476461951;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 1709.2914490582207;
      } else {
        return 900.9153535303813;
      }
    } else {
      return 3290.89685335182;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_12(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[3] <= -1.2976315021514893) {
        return -1884.9661075338026;
      } else {
        return -1754.2012321430993;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -743.3859210776009;
        } else {
          return -958.8796574126036;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -84.47781246743034;
        } else {
          return 114.9174402881581;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 810.8238181773431;
      } else {
        return 1538.3623041523988;
      }
    } else {
      return 2961.8071680166395;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_13(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -1696.4694967804226;
      } else {
        return -1578.7811089287898;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -862.9916916713428;
        } else {
          return -669.0473289698402;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 103.42569625934266;
        } else {
          return -76.0300312206873;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 729.741436359609;
      } else {
        return 1384.526073737159;
      }
    } else {
      return 2665.6264512149755;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_14(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -1526.8225471023807;
      } else {
        return -1420.902998035911;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -776.6925225042087;
        } else {
          return -602.1425960728566;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -68.4270280986184;
        } else {
          return 93.08312663340803;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 656.767292723649;
      } else {
        return 1246.073466363443;
      }
    } else {
      return 2399.06380609348;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_15(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -1278.8126982323201;
      } else {
        return -1374.1402923921423;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -541.9283364655712;
        } else {
          return -699.0232702537878;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -61.5843252887571;
        } else {
          return 83.77481397006704;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 591.0905634512837;
      } else {
        return 1121.466119727098;
      }
    } else {
      return 2159.1574254841325;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_16(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[3] <= -1.2976315021514893) {
        return -1236.7262631529284;
      } else {
        return -1150.9314284090879;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -487.7355028190141;
        } else {
          return -629.1209432284086;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -55.42589275988212;
        } else {
          return 75.39733257306034;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 1009.3195077543878;
      } else {
        return 531.9815071061548;
      }
    } else {
      return 1943.2416829357207;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_17(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -1113.0536368376352;
      } else {
        return -1035.8382855681793;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -566.2088489055677;
        } else {
          return -438.96195253711267;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -49.88330348389354;
        } else {
          return 67.85759931575376;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 478.78335639553916;
      } else {
        return 908.3875569789489;
      }
    } else {
      return 1748.9175146421476;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_18(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -1001.7482731538712;
      } else {
        return -932.2544570113614;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -509.5879640150106;
        } else {
          return -395.0657572834016;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -44.89497313550419;
        } else {
          return 61.07183938417802;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 817.5488012810547;
      } else {
        return 430.9050207559849;
      }
    } else {
      return 1574.0257631779314;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_19(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[0] <= -1.2976315021514893) {
        return -901.5734458384841;
      } else {
        return -839.0290113102255;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -458.6291676135097;
        } else {
          return -355.5591815550615;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -40.40547582195359;
        } else {
          return 54.96465544575949;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 387.81451868038675;
      } else {
        return 735.7939211529483;
      }
    } else {
      return 1416.623186860139;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_20(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -811.4161012546356;
      } else {
        return -755.1261101792034;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -320.0032633995552;
        } else {
          return -412.7662508521589;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 49.468189901182996;
        } else {
          return -36.36492823975823;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 349.0330668123479;
      } else {
        return 662.2145290376538;
      }
    } else {
      return 1274.9608681741265;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_21(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -730.274491129172;
      } else {
        return -679.6134991612835;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -371.4896257669434;
        } else {
          return -288.0029370595994;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 44.52137091106488;
        } else {
          return -32.72843541578186;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 314.12976013111256;
      } else {
        return 595.9930761338892;
      }
    } else {
      return 1147.4647813567135;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_22(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -657.2470420162545;
      } else {
        return -611.6521492451548;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -334.34066319024896;
        } else {
          return -259.20264335363936;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -29.4555918742044;
        } else {
          return 40.069233819958754;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 536.3937685205001;
      } else {
        return 282.71678411800167;
      }
    } else {
      return 1032.7183032210414;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_23(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[0] <= -1.2976315021514893) {
        return -591.5223378146288;
      } else {
        return -550.4869343206392;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -300.9065968712239;
        } else {
          return -233.2823790182756;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -26.510032686783234;
        } else {
          return 36.06231043796288;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 254.4451057062015;
      } else {
        return 482.7543916684499;
      }
    } else {
      return 929.4464728989369;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_24(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -532.3701040331662;
      } else {
        return -495.4382408885749;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -270.81593718410113;
        } else {
          return -209.95414111644823;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 32.45607939416732;
        } else {
          return -23.85902941810491;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 229.00059513558153;
      } else {
        return 434.4789525016058;
      }
    } else {
      return 836.5018256090443;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_25(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -445.8944167997179;
      } else {
        return -479.13309362984955;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -243.73434346569138;
        } else {
          return -188.95872700480322;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 29.210471454751314;
        } else {
          return -21.473126476294055;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 391.0310572514445;
      } else {
        return 206.10053562202302;
      }
    } else {
      return 752.8516430481395;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_26(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[0] <= -1.2976315021514893) {
        return -431.21978426686474;
      } else {
        return -401.3049751197459;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -219.36090911912197;
        } else {
          return -170.06285430432308;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -19.32581382866556;
        } else {
          return 26.289424309276;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 185.49048205982035;
      } else {
        return 351.9279515263006;
      }
    } else {
      return 677.566478743327;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_27(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -388.09780584017835;
      } else {
        return -361.1744776077712;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -153.05656887389068;
        } else {
          return -197.42481820720968;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -17.393232445798276;
        } else {
          return 23.660481878348946;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 166.94143385383904;
      } else {
        return 316.7351563736702;
      }
    } else {
      return 609.809830868995;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_28(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[2] <= -1.1334306597709656) {
        return -325.0570298469938;
      } else {
        return -349.2880252561604;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -177.6823363864887;
        } else {
          return -137.7509119865017;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 21.29443369051478;
        } else {
          return -15.653909201218994;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 285.06164073630316;
      } else {
        return 150.2472904684546;
      }
    } else {
      return 548.828847782097;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_29(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -292.55132686229445;
      } else {
        return -314.3592227305444;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -123.97582078785126;
        } else {
          return -159.91410274783993;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -14.088518281096185;
        } else {
          return 19.164990321463847;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 256.55547666267375;
      } else {
        return 135.2225614216095;
      }
    } else {
      return 493.9459630038873;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_30(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -263.296194176065;
      } else {
        return -282.92330045748986;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -143.92269247305558;
        } else {
          return -111.57823870906577;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 17.248491289317826;
        } else {
          return -12.679666452986567;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 121.700305279448;
      } else {
        return 230.89992899640674;
      }
    } else {
      return 444.5513667034975;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_31(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -236.9665747584586;
      } else {
        return -254.6309704117407;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -100.42041483815956;
        } else {
          return -129.53042322575038;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 15.523642160385862;
        } else {
          return -11.41169980768791;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 207.80993609676625;
      } else {
        return 109.53027475150338;
      }
    } else {
      return 400.09623003314846;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_32(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -229.16787337056667;
      } else {
        return -213.26991728261237;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -90.37837335434324;
        } else {
          return -116.57738090317525;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -10.2705298269193;
        } else {
          return 13.971277944347094;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 98.57724727635286;
      } else {
        return 187.0289424870898;
      }
    } else {
      return 360.0866070298325;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_33(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[2] <= -1.1334306597709656) {
        return -191.94292555435095;
      } else {
        return -206.2510860335101;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -104.919642812858;
        } else {
          return -81.340536018909;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 12.574150149912384;
        } else {
          return -9.243476844227189;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 88.71952254871758;
      } else {
        return 168.3260482383812;
      }
    } else {
      return 324.0779463268482;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_34(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -185.62597743015885;
      } else {
        return -172.74863299891604;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -94.42767853157238;
        } else {
          return -73.20648241701838;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -8.319129159805016;
        } else {
          return 11.316735134922055;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 79.84757029384491;
      } else {
        return 151.49344341454344;
      }
    } else {
      return 291.6701516941648;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_35(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -155.47376969902416;
      } else {
        return -167.06337968714297;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -84.98491067841496;
        } else {
          return -65.88583417531663;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -7.48721624382415;
        } else {
          return 10.185061621430577;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 136.34409907308873;
      } else {
        return 71.86281326446078;
      }
    } else {
      return 262.5031365247487;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_36(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -139.9263927291213;
      } else {
        return -150.35704171842872;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -76.48641961057365;
        } else {
          return -59.29725075778515;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 9.166555459287338;
        } else {
          return -6.738494619441553;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 122.70968916578022;
      } else {
        return 64.6765319380138;
      }
    } else {
      return 236.2528228722731;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_37(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -125.93375345620916;
      } else {
        return -135.3213375465857;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -68.83777764951628;
        } else {
          return -53.367525682007;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -6.06464515749758;
        } else {
          return 8.249899913358604;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 110.43872024920165;
      } else {
        return 58.20887874421169;
      }
    } else {
      return 212.62754058504652;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_38(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[0] <= -1.2976315021514893) {
        return -121.78920379192732;
      } else {
        return -113.34037811058806;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -61.95399988456484;
        } else {
          return -48.03077311380639;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 7.424909922023289;
        } else {
          return -5.458180641748186;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 99.3948482242813;
      } else {
        return 52.38799086979088;
      }
    } else {
      return 191.36478652654114;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_39(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -109.61028341273459;
      } else {
        return -102.00634029952926;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -55.758599896108535;
        } else {
          return -43.22769580242584;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 6.682418929820415;
        } else {
          return -4.912362577573731;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 47.14919178281161;
      } else {
        return 89.4553634018539;
      }
    } else {
      return 172.2283078738874;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_40(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[2] <= -1.1334306597709656) {
        return -91.80570626957615;
      } else {
        return -98.64925507146108;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -38.90492622218335;
        } else {
          return -50.18273990649777;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -4.421126319815812;
        } else {
          return 6.014177036839101;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 42.43427260453063;
      } else {
        return 80.50982706166906;
      }
    } else {
      return 155.005477086499;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_41(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[3] <= -1.2976315021514893) {
        return -88.78432956431516;
      } else {
        return -82.62513564261872;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -35.01443359996483;
        } else {
          return -45.16446591584827;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -3.9790136878345947;
        } else {
          return 5.412759333155918;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 72.45884435550215;
      } else {
        return 38.19084534407739;
      }
    } else {
      return 139.5049293778502;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_42(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -79.90589660788373;
      } else {
        return -74.36262207835671;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -31.51299023996853;
        } else {
          return -40.64801932426326;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 4.871483399840145;
        } else {
          return -3.5811123190505896;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 34.37176080967038;
      } else {
        return 65.21295991995248;
      }
    } else {
      return 125.55443644006664;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_43(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -66.92635987052108;
      } else {
        return -71.91530694709536;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -36.583217391837024;
        } else {
          return -28.361691215971405;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -3.223001087146258;
        } else {
          return 4.384335059856312;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 58.69166392795705;
      } else {
        return 30.934584728704067;
      }
    } else {
      return 112.99899279605961;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_44(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -60.23372388346888;
      } else {
        return -64.72377625238596;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -25.525522094374537;
        } else {
          return -32.924895652653504;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -2.900700978430905;
        } else {
          return 3.945901553870499;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 52.822497535162256;
      } else {
        return 27.841126255832933;
      }
    } else {
      return 101.69909351645401;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_45(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -58.25139862714741;
      } else {
        return -54.21035149512181;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -29.632406087388517;
        } else {
          return -22.9729698849369;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 3.551311398483449;
        } else {
          return -2.61063088058836;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 25.057013630250367;
      } else {
        return 47.54024778164603;
      }
    } else {
      return 91.5291841648068;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_46(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -52.42625876443253;
      } else {
        return -48.78931634560968;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -20.675672896442848;
        } else {
          return -26.66916547865003;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 3.19618025863565;
        } else {
          return -2.349567792529342;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 42.7862230034807;
      } else {
        return 22.551312267225512;
      }
    } else {
      return 82.37626574832757;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_47(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -47.18363288798946;
      } else {
        return -43.910384711048664;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -24.002248930784845;
        } else {
          return -18.608105606798745;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 2.876562232771903;
        } else {
          return -2.114611013275862;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 38.507600703132994;
      } else {
        return 20.296181040503143;
      }
    } else {
      return 74.1386391734959;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_48(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -42.46526959919038;
      } else {
        return -39.51934623994384;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -21.602024037706542;
        } else {
          return -16.74729504611878;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 2.588906009494167;
        } else {
          return -1.903149911948276;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 34.656840632818785;
      } else {
        return 18.26656293645283;
      }
    } else {
      return 66.72477525614522;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_49(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -35.56741161594937;
      } else {
        return -38.21874263927111;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -19.441821633936343;
        } else {
          return -15.072565541507174;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 2.3300154085445683;
        } else {
          return -1.712834920754176;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 16.439906642806818;
      } else {
        return 31.19115656953727;
      }
    } else {
      return 60.05229773052997;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_50(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -32.01067045435457;
      } else {
        return -34.396868375344184;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -13.56530898735673;
        } else {
          return -17.49763947054271;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 2.097013867689384;
        } else {
          return -1.5415514286796679;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 14.795915978525954;
      } else {
        return 28.07204091258427;
      }
    } else {
      return 54.04706795747552;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_51(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -28.809603408918974;
      } else {
        return -30.957181537809902;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -15.747875523488801;
        } else {
          return -12.20877808862133;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 1.887312480919718;
        } else {
          return -1.3873962858124287;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 13.316324380673905;
      } else {
        return 25.264836821326753;
      }
    } else {
      return 48.64236116172833;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_52(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -27.861463384028866;
      } else {
        return -25.928643068027213;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -10.987900279758833;
        } else {
          return -14.173087971139466;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 1.6985812328275642;
        } else {
          return -1.2486566572315496;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 11.984691942607242;
      } else {
        return 22.73835313919335;
      }
    } else {
      return 43.7781250455555;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_53(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -23.335778761224446;
      } else {
        return -25.07531704562598;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -9.889110251782768;
        } else {
          return -12.75577917402552;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 1.528723109544444;
        } else {
          return -1.1237909915089404;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 10.786222748345608;
      } else {
        return 20.464517825274015;
      }
    } else {
      return 39.40031254100177;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_54(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -22.567785341063427;
      } else {
        return -21.002200885101956;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -11.480201256623332;
        } else {
          return -8.900199226604855;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 1.375850798589454;
        } else {
          return -1.0114118923575006;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 9.707600473511775;
      } else {
        return 18.41806604274643;
      }
    } else {
      return 35.46028128690159;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_55(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -18.901980796591943;
      } else {
        return -20.311006806957266;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -8.010179303944824;
        } else {
          return -10.332181130960635;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.9102707031215687;
        } else {
          return 1.2382657187299628;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 8.736840426161507;
      } else {
        return 16.576259438472334;
      }
    } else {
      return 31.914253158211068;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_56(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -17.011782716932885;
      } else {
        return -18.27990612626172;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -7.20916137355016;
        } else {
          return -9.29896301786448;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 1.1144391468569665;
        } else {
          return -0.8192436328099575;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 7.863156383546084;
      } else {
        return 14.918633494624373;
      }
    } else {
      return 28.72282784238996;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_57(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[0] <= -1.2976315021514893) {
        return -16.451915513635413;
      } else {
        return -15.310604445239733;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -6.488245236195326;
        } else {
          return -8.369066716078123;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 1.002995232171088;
        } else {
          return -0.7373192695285979;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 7.076840745190566;
      } else {
        return 13.426770145162664;
      }
    } else {
      return 25.8505450581506;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_58(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[2] <= -1.1334306597709656) {
        return -13.77954400071576;
      } else {
        return -14.806723962271917;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -7.532160044470402;
        } else {
          return -5.839420712575702;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 0.9026957089536154;
        } else {
          return -0.6635873425766476;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 6.3691566706711455;
      } else {
        return 12.084093130646579;
      }
    } else {
      return 23.265490552334086;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_59(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -12.401589600644002;
      } else {
        return -13.326051566044953;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -6.778944040022907;
        } else {
          return -5.255478641318405;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.5972286083197105;
        } else {
          return 0.812426138058072;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 10.875683817581375;
      } else {
        return 5.7322410036031215;
      }
    } else {
      return 20.93894149710104;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_60(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -11.993446409440367;
      } else {
        return -11.16143064057951;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -4.729930777186382;
        } else {
          return -6.101049636020434;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.537505747488467;
        } else {
          return 0.7311835242526286;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 5.1590169032424456;
      } else {
        return 9.788115435823784;
      }
    } else {
      return 18.84504734738948;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_61(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -10.045287576521332;
      } else {
        return -10.794101768496148;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -4.256937699467926;
        } else {
          return -5.490944672418664;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -0.4837551727396203;
        } else {
          return 0.65806517182682;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 8.809303892241587;
      } else {
        return 4.643115212918929;
      }
    } else {
      return 16.960542612650897;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_62(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -9.040758818869108;
      } else {
        return -9.714691591646442;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -3.8312439295214062;
        } else {
          return -4.941850205176706;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -0.4353796554660221;
        } else {
          return 0.5922586546439561;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 4.178803691627763;
      } else {
        return 7.928373503016701;
      }
    } else {
      return 15.264488351385808;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_63(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[2] <= -1.1334306597709656) {
        return -8.136682936982197;
      } else {
        return -8.743222432481616;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -3.4481195365697204;
        } else {
          return -4.447665184658945;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.5330327891788329;
        } else {
          return -0.3918416899196018;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 3.760923322464805;
      } else {
        return 7.135536152714849;
      }
    } else {
      return 13.738039516247227;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_64(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -7.8689001892335;
      } else {
        return -7.323014643283841;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -3.1033075829127483;
        } else {
          return -4.0028986661927775;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.3526575209270959;
        } else {
          return 0.4797295102616772;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 6.42198253744391;
      } else {
        return 3.3848309902186884;
      }
    } else {
      return 12.364235564622504;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_65(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[0] <= -1.2976315021514893) {
        return -7.082010170310241;
      } else {
        return -6.590713178955411;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -3.602608799573318;
        } else {
          return -2.7929768246212916;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -0.3173917688345682;
        } else {
          return 0.4317565592355095;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 3.0463478911970014;
      } else {
        return 5.779784283698973;
      }
    } else {
      return 11.127812008158799;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_66(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -6.373809153279126;
      } else {
        return -5.931641861059688;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -3.242347919615895;
        } else {
          return -2.5136791421591624;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.38858090331268613;
        } else {
          return -0.2856525919505657;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 5.2018058553294395;
      } else {
        return 2.741713102077483;
      }
    } else {
      return 10.015030807342555;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_67(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -5.736428237951259;
      } else {
        return -5.338477674953538;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -2.9181131276545784;
        } else {
          return -2.262311227943428;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.3497228129817813;
        } else {
          return -0.2570873327549634;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 2.467541791869735;
      } else {
        return 4.681625269797223;
      }
    } else {
      return 9.013527726609027;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_68(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[3] <= -1.2976315021514893) {
        return -5.162785414156133;
      } else {
        return -4.804629907458093;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -2.6263018148893025;
        } else {
          return -2.036080105149267;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 0.3147505316828756;
        } else {
          return -0.23137859947928519;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 4.213462742816773;
      } else {
        return 2.220787612683125;
      }
    } else {
      return 8.112174953948852;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_69(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -4.324166916712329;
      } else {
        return -4.6465068727407015;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -1.8324720946347952;
        } else {
          return -2.3636716334003722;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.20824073953190236;
        } else {
          return 0.28327547851404233;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 1.9987088514153584;
      } else {
        return 3.7921164685358235;
      }
    } else {
      return 7.300957458552148;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_70(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[1] <= -0.11180341243743896) {
        return -3.8917502250410507;
      } else {
        return -4.181856185466586;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -1.649224885170952;
        } else {
          return -2.127304470060153;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.2549479306617286;
        } else {
          return -0.18741666557798453;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 1.798837966274732;
      } else {
        return 3.4129048216818774;
      }
    } else {
      return 6.570861712698388;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_71(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[0] <= -1.2976315021514893) {
        return -3.7636705669201547;
      } else {
        return -3.5025752025367183;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -1.9145740230542287;
        } else {
          return -1.4843023966541296;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.22945313759555575;
        } else {
          return -0.16867499902036798;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 3.071614339512962;
      } else {
        return 1.6189541696476226;
      }
    } else {
      return 5.91377554142673;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_72(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -3.1523176822829555;
      } else {
        return -3.387303510228321;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -1.3358721569884437;
        } else {
          return -1.723116620748442;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.20650782383563637;
        } else {
          return -0.15180749911814928;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 1.4570587526832242;
      } else {
        return 2.764452905561484;
      }
    } else {
      return 5.3223979872855125;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_73(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -2.837085914054569;
      } else {
        return -3.0485731592052616;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -1.2022849412896903;
        } else {
          return -1.550804958673325;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 0.18585704145152704;
        } else {
          return -0.13662674920669815;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 1.3113528774156293;
      } else {
        return 2.4880076150056993;
      }
    } else {
      return 4.790158188556234;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_74(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -2.7437158432849174;
      } else {
        return -2.5533773226488847;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -1.0820564471605394;
        } else {
          return -1.3957244628063563;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.16727133730637433;
        } else {
          return -0.12296407428584644;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 2.2392068535045837;
      } else {
        return 1.1802175896737026;
      }
    } else {
      return 4.311142369700974;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_75(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[3] <= -1.2976315021514893) {
        return -2.4693442589564256;
      } else {
        return -2.298039590384178;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -1.2561520165254478;
        } else {
          return -0.9738508024447583;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 0.1505442035759188;
        } else {
          return -0.110667666856898;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 2.015286168154489;
      } else {
        return 1.0621958307056047;
      }
    } else {
      return 3.8800281327312405;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_76(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[1] <= -0.11180341243743896) {
        return -2.0682356313459422;
      } else {
        return -2.2224098330607376;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -1.1305368148732668;
        } else {
          return -0.8764657222000096;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.13548978321887262;
        } else {
          return -0.09960090017193579;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 1.8137575513392221;
      } else {
        return 0.9559762476346805;
      }
    } else {
      return 3.4920253194577526;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_77(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -2.000168849754573;
      } else {
        return -1.8614120682113935;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -0.7888191499796449;
        } else {
          return -1.017483133386122;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.12194080489643966;
        } else {
          return -0.08964081015437841;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 1.6323817962056637;
      } else {
        return 0.8603786228704848;
      }
    } else {
      return 3.1428227875112498;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_78(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[2] <= -1.1334306597709656) {
        return -1.675270861390345;
      } else {
        return -1.800151964779161;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -0.7099372349821351;
        } else {
          return -0.9157348200478737;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.10974672440715949;
        } else {
          return -0.08067672913966817;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 1.4691436165849154;
      } else {
        return 0.7743407605830726;
      }
    } else {
      return 2.8285405087590334;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_79(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -1.6201367683011085;
      } else {
        return -1.5077437752511287;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -0.6389435114842854;
        } else {
          return -0.8241613380432682;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.07260905622570135;
        } else {
          return 0.09877205196607974;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 0.6969066845249472;
      } else {
        return 1.3222292549271515;
      }
    } else {
      return 2.5456864578845853;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_80(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -1.3569693977260613;
      } else {
        return -1.4581230914709522;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -0.5750491603357659;
        } else {
          return -0.7417452042391233;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.06534815060331312;
        } else {
          return 0.08889484676910797;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 1.1900063294342544;
      } else {
        return 0.627216016073362;
      }
    } else {
      return 2.291117812095763;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_81(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[0] <= -1.2976315021514893) {
        return -1.312310782323948;
      } else {
        return -1.221272457953546;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -0.667570683815029;
        } else {
          return -0.5175442443023712;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 0.08000536209146958;
        } else {
          return -0.0588133355431637;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 1.071005696490829;
      } else {
        return 0.5644944144660258;
      }
    } else {
      return 2.0620060308865504;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_82(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -1.181079704091644;
      } else {
        return -1.0991452121579641;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -0.46578981987204315;
        } else {
          return -0.6008136154332533;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.052932001988665434;
        } else {
          return 0.07200482588268642;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 0.5080449730194232;
      } else {
        return 0.9639051268422918;
      }
    } else {
      return 1.8558054277964402;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_83(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[1] <= -0.11180341243743896) {
        return -0.9892306909423496;
      } else {
        return -1.0629717336823887;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -0.5407322538903827;
        } else {
          return -0.4192108378847479;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.06480434329387208;
        } else {
          return -0.047638801790526486;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 0.4572404757182085;
      } else {
        return 0.8675146141576988;
      }
    } else {
      return 1.6702248850160686;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_84(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -0.9566745603142408;
      } else {
        return -0.8903076218480237;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -0.3772897540966369;
        } else {
          return -0.48665902850098064;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.042874921611655736;
        } else {
          return 0.05832390896466677;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 0.4115164281465695;
      } else {
        return 0.7807631527412013;
      }
    } else {
      return 1.503202396514098;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_85(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -0.8610071042826348;
      } else {
        return -0.8012768596631759;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -0.3395607786869732;
        } else {
          return -0.4379931256507916;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -0.03858742944976257;
        } else {
          return 0.05249151806856389;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 0.7026868374668993;
      } else {
        return 0.37036478533264017;
      }
    } else {
      return 1.3528821568615967;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_86(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -0.7749063938545078;
      } else {
        return -0.7211491736970856;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -0.30560470081854874;
        } else {
          return -0.3941938130856215;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.03472868650533201;
        } else {
          return 0.047242366261343705;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 0.33332830679864855;
      } else {
        return 0.6324181537202094;
      }
    } else {
      return 1.217593941175437;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_87(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -0.6974157544691479;
      } else {
        return -0.649034256327468;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -0.2750442307369667;
        } else {
          return -0.3547744317766046;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.04251812963593693;
        } else {
          return -0.0312558178557083;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 0.2999954761180561;
      } else {
        return 0.5691763383474608;
      }
    } else {
      return 1.0958345470571658;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_88(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -0.5841308306949031;
      } else {
        return -0.6276741790220512;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -0.31929698859858036;
        } else {
          return -0.24753980766308814;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.038266316672888934;
        } else {
          return -0.028130236070865067;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 0.5122587045134424;
      } else {
        return 0.2699959285055229;
      }
    } else {
      return 0.9862510923521768;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_89(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[1] <= -0.11180341243743896) {
        return -0.5257177476255492;
      } else {
        return -0.5649067611198006;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -0.22278582689705217;
        } else {
          return -0.2873672897385404;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -0.025317212463050964;
        } else {
          return 0.034439685005054343;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 0.2429963356553344;
      } else {
        return 0.46103283406228;
      }
    } else {
      return 0.8876259831158677;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_90(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -0.5084160850078661;
      } else {
        return -0.47314597286276694;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -0.2586305607646864;
        } else {
          return -0.2005072442070741;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.022785491217291565;
        } else {
          return 0.03099571650454891;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 0.4149295506558701;
      } else {
        return 0.21869670208980097;
      }
    } else {
      return 0.7988633848035533;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_91(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -0.457574476507034;
      } else {
        return -0.42583137557630835;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -0.18045651978627575;
        } else {
          return -0.2327675046881268;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.027896144854821614;
        } else {
          return -0.02050694209538051;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[1] <= -0.11180341243743896) {
        return 0.19682703188118467;
      } else {
        return 0.3734365955897374;
      }
    } else {
      return 0.7189770463228342;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_92(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[3] <= -1.2976315021514893) {
        return -0.4118170288561487;
      } else {
        return -0.3832482380184956;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -0.20949075421958696;
        } else {
          return -0.16241086780792102;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 0.025106530369157554;
        } else {
          return -0.018456247886206256;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 0.1771443286925205;
      } else {
        return 0.33609293603149126;
      }
    } else {
      return 0.647079341692006;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_93(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[0] <= -1.2976315021514893) {
        return -0.3706353259703974;
      } else {
        return -0.344923414216737;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -0.14616978102731082;
        } else {
          return -0.18854167879726447;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 0.0225958773316961;
        } else {
          return -0.016610623097221833;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 0.30248364242834214;
      } else {
        return 0.15942989582254086;
      }
    } else {
      return 0.5823714075231692;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_94(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -0.3335717933732667;
      } else {
        return -0.3104310727949269;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[0] <= -0.560984805226326) {
          return -0.1315528029244888;
        } else {
          return -0.16968751091735612;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.01494956078749965;
        } else {
          return 0.020336289599072188;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 0.14348690623955918;
      } else {
        return 0.2722352781856898;
      }
    } else {
      return 0.5241342667723075;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_95(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[2] <= -0.901381641626358) {
      if (sample[3] <= -1.2976315021514893) {
        return -0.30021461403612193;
      } else {
        return -0.27938796551552514;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -0.11839752263222181;
        } else {
          return -0.1527187598258024;
        }
      } else {
        if (sample[2] <= -0.01959524303674698) {
          return -0.013454604708385887;
        } else {
          return 0.01830266063916497;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 0.24501175036675704;
      } else {
        return 0.12913821561596706;
      }
    } else {
      return 0.4717208400943491;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_96(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -0.2514491689639726;
      } else {
        return -0.2701931526326007;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -0.13744688384304027;
        } else {
          return -0.10655777036936342;
        }
      } else {
        if (sample[1] <= -0.11180341243743896) {
          return -0.012109144237911096;
        } else {
          return 0.016472394574520877;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 0.22051057533099083;
      } else {
        return 0.11622439405437035;
      }
    } else {
      return 0.4245487560838228;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_97(sample) {
  if (sample[0] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -0.22630425206762084;
      } else {
        return -0.24317383736934062;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[3] <= -0.560984805226326) {
          return -0.09590199333251803;
        } else {
          return -0.1237021954584634;
        }
      } else {
        if (sample[0] <= 0.14732934534549713) {
          return 0.014825155116341193;
        } else {
          return -0.01089822981339239;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[2] <= 0.679645873606205) {
        return 0.10460195464838762;
      } else {
        return 0.19845951779825555;
      }
    } else {
      return 0.38209388047471293;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_98(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[2] <= -1.1334306597709656) {
        return -0.20367382686072233;
      } else {
        return -0.21885645363227013;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[1] <= -0.11180341243743896) {
          return -0.11133197591243515;
        } else {
          return -0.08631179399890243;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.013342639604161377;
        } else {
          return -0.00980840683223505;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[3] <= 1.000139594078064) {
        return 0.1786135660186119;
      } else {
        return 0.09414175918391265;
      }
    } else {
      return 0.34388449242760544;
    }
  }
}
function GBR_7_5MW_STORAGE_tree_99(sample) {
  if (sample[3] <= 0.5751510858535767) {
    if (sample[3] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -0.19697080826881574;
      } else {
        return -0.183306444174832;
      }
    } else {
      if (sample[2] <= -0.3289939761161804) {
        if (sample[2] <= -0.5610430389642715) {
          return -0.10019877832110069;
        } else {
          return -0.07768061459864839;
        }
      } else {
        if (sample[3] <= 0.14732934534549713) {
          return 0.012008375644654734;
        } else {
          return -0.008827566149193444;
        }
      }
    }
  } else {
    if (sample[2] <= 1.6078420877456665) {
      if (sample[0] <= 1.000139594078064) {
        return 0.1607522094163869;
      } else {
        return 0.08472758326570329;
      }
    } else {
      return 0.3094960431844811;
    }
  }
}

function GBR_7_5MW_STORAGE(sample) {
  let score = 10177.111111111111;
  const lr = 0.1;
  score += lr * GBR_7_5MW_STORAGE_tree_0(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_1(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_2(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_3(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_4(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_5(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_6(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_7(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_8(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_9(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_10(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_11(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_12(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_13(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_14(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_15(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_16(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_17(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_18(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_19(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_20(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_21(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_22(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_23(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_24(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_25(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_26(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_27(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_28(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_29(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_30(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_31(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_32(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_33(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_34(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_35(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_36(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_37(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_38(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_39(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_40(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_41(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_42(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_43(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_44(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_45(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_46(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_47(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_48(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_49(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_50(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_51(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_52(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_53(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_54(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_55(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_56(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_57(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_58(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_59(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_60(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_61(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_62(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_63(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_64(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_65(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_66(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_67(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_68(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_69(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_70(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_71(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_72(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_73(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_74(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_75(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_76(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_77(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_78(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_79(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_80(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_81(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_82(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_83(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_84(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_85(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_86(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_87(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_88(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_89(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_90(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_91(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_92(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_93(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_94(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_95(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_96(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_97(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_98(sample);
  score += lr * GBR_7_5MW_STORAGE_tree_99(sample);
  return score;
}
function GBR_7_5MW_SUB_tree_0(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -2672.2222222222226;
      } else {
        return -2533.2222222222226;
      }
    } else {
      return -1747.2222222222226;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 324.1111111111107;
      } else {
        return 660.7777777777774;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 2558.7777777777774;
      } else {
        return 2760.7777777777774;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_1(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -2405.0;
      } else {
        return -2279.9000000000005;
      }
    } else {
      return -1572.5;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 291.6999999999992;
      } else {
        return 594.6999999999998;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 2302.8999999999996;
      } else {
        return 2484.7;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_2(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -2164.5;
      } else {
        return -2051.9100000000008;
      }
    } else {
      return -1415.25;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 262.5299999999991;
      } else {
        return 535.2299999999996;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 2072.6099999999997;
      } else {
        return 2236.2299999999996;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_3(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -1948.0500000000002;
      } else {
        return -1846.719000000001;
      }
    } else {
      return -1273.7250000000004;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 236.27699999999945;
      } else {
        return 481.7069999999994;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 1865.3490000000002;
      } else {
        return 2012.607;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_4(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -1753.245;
      } else {
        return -1662.0471000000007;
      }
    } else {
      return -1146.3525;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 212.64929999999944;
      } else {
        return 433.53629999999976;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 1678.8140999999996;
      } else {
        return 1811.3462999999992;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_5(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -1577.9205000000002;
      } else {
        return -1495.8423900000007;
      }
    } else {
      return -1031.7172499999997;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 191.38436999999917;
      } else {
        return 390.18267000000014;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 1510.9326899999996;
      } else {
        return 1630.2116699999988;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_6(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -1420.1284500000002;
      } else {
        return -1346.258151000001;
      }
    } else {
      return -928.5455249999995;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 172.24593299999955;
      } else {
        return 351.16440299999977;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 1359.8394210000006;
      } else {
        return 1467.190502999998;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_7(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -1278.115605;
      } else {
        return -1211.6323359000007;
      }
    } else {
      return -835.6909724999996;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 155.02133969999917;
      } else {
        return 316.0479626999995;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 1223.855478900001;
      } else {
        return 1320.4714526999978;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_8(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -1150.3040444999997;
      } else {
        return -1090.4691023100004;
      }
    } else {
      return -752.1218752499999;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 139.51920572999947;
      } else {
        return 284.4431664299991;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 1101.4699310100004;
      } else {
        return 1188.4243074299975;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_9(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -1035.2736400499998;
      } else {
        return -981.4221920790005;
      }
    } else {
      return -676.9096877249995;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 125.56728515699918;
      } else {
        return 255.99884978699902;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 991.3229379090008;
      } else {
        return 1069.581876686998;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_10(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -931.7462760449998;
      } else {
        return -883.2799728711007;
      }
    } else {
      return -609.2187189524993;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 113.01055664129883;
      } else {
        return 230.39896480829884;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 892.1906441181;
      } else {
        return 962.623689018299;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_11(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -838.5716484405002;
      } else {
        return -794.9519755839901;
      }
    } else {
      return -548.2968470572496;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 101.70950097716862;
      } else {
        return 207.35906832746878;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 802.971579706289;
      } else {
        return 866.3613201164699;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_12(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -754.71448359645;
      } else {
        return -715.4567780255911;
      }
    } else {
      return -493.46716235152417;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 91.53855087945188;
      } else {
        return 186.6231614947219;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 722.6744217356609;
      } else {
        return 779.7251881048232;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_13(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -679.2430352368046;
      } else {
        return -643.911100223032;
      }
    } else {
      return -444.12044611637157;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 82.3846957915069;
      } else {
        return 167.96084534524925;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 650.4069795620944;
      } else {
        return 701.7526692943411;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_14(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -611.3187317131242;
      } else {
        return -579.5199902007289;
      }
    } else {
      return -399.70840150473487;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 74.14622621235624;
      } else {
        return 151.16476081072415;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 585.3662816058859;
      } else {
        return 631.5774023649064;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_15(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -550.1868585418115;
      } else {
        return -521.5679911806565;
      }
    } else {
      return -359.73756135426174;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 66.73160359112019;
      } else {
        return 136.04828472965164;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 526.8296534452966;
      } else {
        return 568.4196621284154;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_16(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -495.16817268763043;
      } else {
        return -469.411192062591;
      }
    } else {
      return -323.76380521883584;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.14732934534549713) {
        return 106.22510989867442;
      } else {
        return 45.08428307768054;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 474.1466881007673;
      } else {
        return 511.5776959155737;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_17(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -445.65135541886775;
      } else {
        return -422.4700728563321;
      }
    } else {
      return -291.3874246969526;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 51.47395980284;
      } else {
        return 117.93502794891901;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 426.73201929069;
      } else {
        return 460.41992632401707;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_18(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -401.086219876981;
      } else {
        return -380.22306557069896;
      }
    } else {
      return -262.24868222725763;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.14732934534549713) {
        return 90.45520292852234;
      } else {
        return 32.10540538232499;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 384.05881736162155;
      } else {
        return 414.3779336916159;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_19(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -360.97759788928306;
      } else {
        return -342.20075901362907;
      }
    } else {
      return -236.02381400453214;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 39.22603678124324;
      } else {
        return 102.93098461579484;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 345.6529356254596;
      } else {
        return 372.9401403224547;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_20(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -324.8798381003544;
      } else {
        return -307.980683112266;
      }
    } else {
      return -212.4214326040792;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.14732934534549713) {
        return 77.48707895754524;
      } else {
        return 21.787013774240222;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 311.0876420629138;
      } else {
        return 335.6461262902085;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_21(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -292.3918542903193;
      } else {
        return -277.18261480103956;
      }
    } else {
      return -191.17928934367137;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 29.411394046807498;
      } else {
        return 90.45918477679152;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 279.9788778566217;
      } else {
        return 302.0815136611873;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_22(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -263.15266886128757;
      } else {
        return -249.46435332093552;
      }
    } else {
      return -172.06136040930414;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.14732934534549713) {
        return 66.79723165710948;
      } else {
        return 13.61478345563637;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 251.9809900709588;
      } else {
        return 271.87336229506764;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_23(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -236.83740197515908;
      } else {
        return -224.51791798884187;
      }
    } else {
      return -154.85522436837346;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 21.56327974979801;
      } else {
        return 80.05178795354914;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 226.78289106386364;
      } else {
        return 244.68602606556124;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_24(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -213.1536617776428;
      } else {
        return -202.06612618995769;
      }
    } else {
      return -139.36970193153593;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.14732934534549713) {
        return 57.96118051641861;
      } else {
        return 7.172551724905588;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 204.10460195747692;
      } else {
        return 220.21742345900566;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_25(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -191.83829559987862;
      } else {
        return -181.859513570962;
      }
    } else {
      return -125.43273173838224;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 15.303788016226463;
      } else {
        return 71.32935398570316;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 183.69414176172904;
      } else {
        return 198.19568111310582;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_26(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -172.6544660398904;
      } else {
        return -163.6735622138658;
      }
    } else {
      return -112.88945856454393;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.14732934534549713) {
        return 50.63468366315374;
      } else {
        return 2.123639452318457;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 165.3247275855556;
      } else {
        return 178.3761130017956;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_27(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -155.389019435901;
      } else {
        return -147.3062059924796;
      }
    } else {
      return -101.60051270808981;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 10.326975655316042;
      } else {
        return 63.98405464190091;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 148.79225482699985;
      } else {
        return 160.53850170161604;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_28(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -139.85011749231126;
      } else {
        return -132.57558539323145;
      }
    } else {
      return -91.44046143728065;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.14732934534549713) {
        return 44.538517731306456;
      } else {
        return -1.8042760077746607;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 133.9130293442995;
      } else {
        return 144.4846515314548;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_29(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -125.86510574307977;
      } else {
        return -119.31802685390812;
      }
    } else {
      return -82.29641529355285;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 6.385186107956542;
      } else {
        return 57.76607677848824;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 120.5217264098701;
      } else {
        return 130.03618637830914;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_30(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -113.27859516877197;
      } else {
        return -107.3862241685174;
      }
    } else {
      return -74.06677376419793;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.14732934534549713) {
        return 39.44614734738025;
      } else {
        return -4.831411551318979;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 108.46955376888218;
      } else {
        return 117.03256774047804;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_31(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -101.95073565189523;
      } else {
        return -96.6476017516652;
      }
    } else {
      return -66.66009638777814;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 35.50153261264222;
      } else {
        return -61.16915104814507;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 52.47261025577154;
      } else {
        return 101.47595467921201;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_32(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -91.75566208670534;
      } else {
        return -86.98284157649869;
      }
    } else {
      return -59.99408674900042;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 31.95137935137791;
      } else {
        return -55.05223594333074;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 47.2253492301943;
      } else {
        return 91.32835921129117;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_33(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -82.58009587803463;
      } else {
        return -78.28455741884864;
      }
    } else {
      return -53.99467807410019;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 28.7562414162403;
      } else {
        return -49.54701234899767;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 42.50281430717496;
      } else {
        return 82.19552329016187;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_34(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -74.3220862902308;
      } else {
        return -70.45610167696395;
      }
    } else {
      return -48.59521026669063;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 25.88061727461627;
      } else {
        return -44.592311114098266;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 38.252532876457735;
      } else {
        return 73.97597096114623;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_35(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -66.88987766120772;
      } else {
        return -63.41049150926756;
      }
    } else {
      return -43.7356892400212;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 23.292555547154734;
      } else {
        return -40.133080002688075;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 34.42727958881187;
      } else {
        return 66.57837386503161;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_36(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -60.20088989508713;
      } else {
        return -57.06944235834089;
      }
    } else {
      return -39.36212031601917;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 20.963299992439715;
      } else {
        return -36.11977200241927;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 30.984551629931048;
      } else {
        return 59.92053647852845;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_37(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -54.18080090557851;
      } else {
        return -51.36249812250662;
      }
    } else {
      return -35.425908284417346;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 18.866969993196108;
      } else {
        return -32.50779480217716;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 27.886096466938397;
      } else {
        return 53.92848283067542;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_38(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -48.76272081502066;
      } else {
        return -46.22624831025587;
      }
    } else {
      return -31.883317455975885;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 16.980272993876497;
      } else {
        return -29.257015321959443;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 25.09748682024474;
      } else {
        return 48.535634547608424;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_39(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -43.88644873351859;
      } else {
        return -41.60362347923001;
      }
    } else {
      return -28.694985710378205;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 15.282245694488665;
      } else {
        return -26.331313789763954;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 22.58773813822063;
      } else {
        return 43.682071092847764;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_40(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -39.49780386016664;
      } else {
        return -37.443261131306826;
      }
    } else {
      return -25.82548713934011;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 13.754021125039799;
      } else {
        return -23.698182410787922;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 20.32896432439884;
      } else {
        return 39.31386398356335;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_41(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -35.548023474149886;
      } else {
        return -33.69893501817569;
      }
    } else {
      return -23.242938425406464;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 12.378619012535637;
      } else {
        return -21.328364169708948;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 18.296067891958955;
      } else {
        return 35.38247758520629;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_42(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -31.99322112673508;
      } else {
        return -30.329041516358302;
      }
    } else {
      return -20.918644582865454;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 11.140757111282255;
      } else {
        return -19.19552775273769;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 16.466461102762878;
      } else {
        return 31.844229826685478;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_43(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -28.793899014061935;
      } else {
        return -27.2961373647222;
      }
    } else {
      return -18.826780124579273;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 10.026681400154303;
      } else {
        return -17.275974977464102;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 14.8198149924865;
      } else {
        return 28.659806844016202;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_44(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -25.91450911265565;
      } else {
        return -24.566523628250252;
      }
    } else {
      return -16.944102112121072;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 9.024013260139327;
      } else {
        return -15.548377479717601;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 13.337833493237667;
      } else {
        return 25.793826159613673;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_45(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -23.323058201390268;
      } else {
        return -22.10987126542568;
      }
    } else {
      return -15.249691900909056;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 8.121611934125212;
      } else {
        return -13.993539731745841;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 15.68256870017467;
      } else {
        return 27.06779983087108;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_46(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -20.990752381250786;
      } else {
        return -19.89888413888275;
      }
    } else {
      return -13.724722710818241;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.5751510858535767) {
        return 0.6749052409516784;
      } else {
        return 10.435793273896707;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 17.792830386417336;
      } else {
        return 24.36101984778361;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_47(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -18.89167714312589;
      } else {
        return -17.908995724994384;
      }
    } else {
      return -12.352250439736054;
    }
  } else {
    if (sample[0] <= 1.000139594078064) {
      if (sample[0] <= 0.14732934534549713) {
        return 7.241960216618281;
      } else {
        return -1.6347311680797247;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 16.013547347774875;
      } else {
        return 21.92491786300525;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_48(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -17.002509428813028;
      } else {
        return -16.118096152495127;
      }
    } else {
      return -11.11702539576254;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 6.517764194956726;
      } else {
        return -12.498203165858286;
      }
    } else {
      if (sample[1] <= 1.2374368458986282) {
        return 11.983939838155948;
      } else {
        return 19.73242607670545;
      }
    }
  }
}
function GBR_7_5MW_SUB_tree_49(sample) {
  if (sample[0] <= -0.560984805226326) {
    if (sample[0] <= -0.9859732687473297) {
      if (sample[0] <= -1.2976315021514893) {
        return -15.302258485931816;
      } else {
        return -14.506286537245614;
      }
    } else {
      return -10.005322856186467;
    }
  } else {
    if (sample[0] <= 0.5751510858535767) {
      if (sample[0] <= 0.14732934534549713) {
        return 5.8659877754607805;
      } else {
        return -11.248382849272275;
      }
    } else {
      if (sample[0] <= 1.000139594078064) {
        return 8.357293079498959;
      } else {
        return 15.486491049108736;
      }
    }
  }
}

function GBR_7_5MW_SUB(sample) {
  let score = 7382.222222222223;
  const lr = 0.1;
  score += lr * GBR_7_5MW_SUB_tree_0(sample);
  score += lr * GBR_7_5MW_SUB_tree_1(sample);
  score += lr * GBR_7_5MW_SUB_tree_2(sample);
  score += lr * GBR_7_5MW_SUB_tree_3(sample);
  score += lr * GBR_7_5MW_SUB_tree_4(sample);
  score += lr * GBR_7_5MW_SUB_tree_5(sample);
  score += lr * GBR_7_5MW_SUB_tree_6(sample);
  score += lr * GBR_7_5MW_SUB_tree_7(sample);
  score += lr * GBR_7_5MW_SUB_tree_8(sample);
  score += lr * GBR_7_5MW_SUB_tree_9(sample);
  score += lr * GBR_7_5MW_SUB_tree_10(sample);
  score += lr * GBR_7_5MW_SUB_tree_11(sample);
  score += lr * GBR_7_5MW_SUB_tree_12(sample);
  score += lr * GBR_7_5MW_SUB_tree_13(sample);
  score += lr * GBR_7_5MW_SUB_tree_14(sample);
  score += lr * GBR_7_5MW_SUB_tree_15(sample);
  score += lr * GBR_7_5MW_SUB_tree_16(sample);
  score += lr * GBR_7_5MW_SUB_tree_17(sample);
  score += lr * GBR_7_5MW_SUB_tree_18(sample);
  score += lr * GBR_7_5MW_SUB_tree_19(sample);
  score += lr * GBR_7_5MW_SUB_tree_20(sample);
  score += lr * GBR_7_5MW_SUB_tree_21(sample);
  score += lr * GBR_7_5MW_SUB_tree_22(sample);
  score += lr * GBR_7_5MW_SUB_tree_23(sample);
  score += lr * GBR_7_5MW_SUB_tree_24(sample);
  score += lr * GBR_7_5MW_SUB_tree_25(sample);
  score += lr * GBR_7_5MW_SUB_tree_26(sample);
  score += lr * GBR_7_5MW_SUB_tree_27(sample);
  score += lr * GBR_7_5MW_SUB_tree_28(sample);
  score += lr * GBR_7_5MW_SUB_tree_29(sample);
  score += lr * GBR_7_5MW_SUB_tree_30(sample);
  score += lr * GBR_7_5MW_SUB_tree_31(sample);
  score += lr * GBR_7_5MW_SUB_tree_32(sample);
  score += lr * GBR_7_5MW_SUB_tree_33(sample);
  score += lr * GBR_7_5MW_SUB_tree_34(sample);
  score += lr * GBR_7_5MW_SUB_tree_35(sample);
  score += lr * GBR_7_5MW_SUB_tree_36(sample);
  score += lr * GBR_7_5MW_SUB_tree_37(sample);
  score += lr * GBR_7_5MW_SUB_tree_38(sample);
  score += lr * GBR_7_5MW_SUB_tree_39(sample);
  score += lr * GBR_7_5MW_SUB_tree_40(sample);
  score += lr * GBR_7_5MW_SUB_tree_41(sample);
  score += lr * GBR_7_5MW_SUB_tree_42(sample);
  score += lr * GBR_7_5MW_SUB_tree_43(sample);
  score += lr * GBR_7_5MW_SUB_tree_44(sample);
  score += lr * GBR_7_5MW_SUB_tree_45(sample);
  score += lr * GBR_7_5MW_SUB_tree_46(sample);
  score += lr * GBR_7_5MW_SUB_tree_47(sample);
  score += lr * GBR_7_5MW_SUB_tree_48(sample);
  score += lr * GBR_7_5MW_SUB_tree_49(sample);
  return score;
}

function PREDICT_7_5MW(mw, duration, mwh, transformerCount) {
    console.log("--- [Debug] PREDICT_7_5MW Called ---");
    console.log("Inputs -> MW:", mw, "Duration:", duration, "MWh:", mwh, "Transformers:", transformerCount);

    const systemCapacity = 7.5;
    const nSets = mw / systemCapacity;  // ä½¿ç”¨åŠŸç‡è®¡ç®—å¥—æ•°
    console.log("Logic -> System Capacity:", systemCapacity, "Calculated nSets:", nSets, "(= MW / System_Cap)");
    
    // é¢„æµ‹å‚¨èƒ½åŒº
    const rawStorage = [mw, duration, mwh, nSets];
    const scaledStorage = rawStorage.map((v, i) => (v - SCALER_7_5MW_STORAGE.mean[i]) / SCALER_7_5MW_STORAGE.scale[i]);
    console.log("Features -> Storage (Scaled):", scaledStorage);
    
    const storageArea = GBR_7_5MW_STORAGE(scaledStorage);
    console.log("Result -> Storage Area (Raw):", storageArea);
    
    // é¢„æµ‹å‡å‹ç«™ - å§‹ç»ˆä½¿ç”¨1å°ä¸»å˜é¢„æµ‹åŸºå‡†å€¼
    const rawSub = [mw, 1];  // æ³¨æ„ï¼šè¿™é‡Œå›ºå®šä½¿ç”¨1å°ä¸»å˜
    const scaledSub = rawSub.map((v, i) => (v - SCALER_7_5MW_SUB.mean[i]) / SCALER_7_5MW_SUB.scale[i]);
    console.log("Features -> Substation (Scaled, base=1 transformer):", scaledSub);
    
    const subAreaBase = GBR_7_5MW_SUB(scaledSub);
    console.log("Result -> Substation Area (Base, 1 transformer):", subAreaBase);
    
    // åº”ç”¨ä¸»å˜ä¿®æ­£ç³»æ•°
    let subArea = subAreaBase;
    if (transformerCount === 2) {
        const transformerCorrection = 1.09;  // 2å°ä¸»å˜å¢åŠ 9%
        subArea = subAreaBase * transformerCorrection;
        console.log("Applied transformer correction (2 transformers):", transformerCorrection, "-> Final:", subArea);
    }
    
    return {
        storage: Math.max(0, storageArea),
        substation: Math.max(0, subArea),
        total: Math.max(0, storageArea) + Math.max(0, subArea)
    };
}


window.predictLandAreaGBR = function(systemType, mw, duration, mwh, transformerCount) {
    if (systemType === "5MW") return PREDICT_5MW(mw, duration, mwh, transformerCount);
    if (systemType === "7.5MW") return PREDICT_7_5MW(mw, duration, mwh, transformerCount);
    return PREDICT_7_5MW(mw, duration, mwh, transformerCount);
};
console.log("GBR Models Loaded Successfully");




</script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        // --- Animation & Interaction Script ---
        document.addEventListener('DOMContentLoaded', () => {
            window.scrollTo(0, 0); // Ensure page loads at the top
            
            // --- è®¾å¤‡å¥—æ•°é™åˆ¶å¼€å…³æ§åˆ¶ ---
            const enableDeviceSetsLimit = document.getElementById('enable_device_sets_limit');
            const deviceSetsInputArea = document.getElementById('device-sets-input-area');
            const maxDeviceSetsInput = document.getElementById('max_device_sets');
            const minSetsHint = document.getElementById('min-sets-hint');
            const minSetsValue = document.getElementById('min-sets-value');
            
            // å¼€å…³çŠ¶æ€å˜åŒ–å¤„ç†
            enableDeviceSetsLimit.addEventListener('change', function() {
                if (this.checked) {
                    deviceSetsInputArea.classList.remove('disabled');
                    maxDeviceSetsInput.disabled = false;
                    updateMinDeviceSetsHint(); // å¼€å¯æ—¶ç«‹å³æ›´æ–°æç¤ºï¼Œç¡®ä¿æœ€å¤§å¥—æ•°åˆç†
                } else {
                    deviceSetsInputArea.classList.add('disabled');
                    maxDeviceSetsInput.disabled = true;
                    // å…³é—­é™åˆ¶æ—¶éšè—æœ€å°å¥—æ•°æç¤º
                    minSetsHint.classList.remove('show');
                }
            });

            // åŠŸç‡å’Œå®¹é‡è¾“å…¥å˜åŒ–æ—¶æ›´æ–°æœ€å°è®¾å¤‡å¥—æ•°æç¤º
            const projectPowerInput = document.getElementById('project_power_mw');
            const projectCapacityInput = document.getElementById('project_capacity_mwh');
            
            function updateMinDeviceSetsHint() {
                // åªæœ‰åœ¨å¼€å¯è®¾å¤‡å¥—æ•°é™åˆ¶æ—¶æ‰è®¡ç®—å’Œæ˜¾ç¤ºæœ€å°è®¾å¤‡å¥—æ•°
                if (!enableDeviceSetsLimit.checked) {
                    minSetsHint.classList.remove('show');
                    return;
                }
                
                const power = parseFloat(projectPowerInput.value) || 0;
                const capacity = parseFloat(projectCapacityInput.value) || 0;
                
                if (power > 0 && capacity > 0) {
                    // è®¡ç®—æœ€å°è®¾å¤‡å¥—æ•°ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼Œä¸åç«¯é€»è¾‘å¯¹åº”ï¼‰
                    const maxSingleBlockPower = 7.5; // 7.5MWæ˜¯æœ€å¤§çš„PCSåŠŸç‡
                    const maxSingleBlockCapacity = 7.523; // 7.5MWhæ˜¯æœ€å¤§çš„å•ä¸ªç”µæ± èˆ±å®¹é‡
                    const duration = capacity / power;
                    const systemHourType = duration <= 1.5 ? 1 : (duration <= 3.0 ? 2 : 4);
                    const maxCapacityPerBlock = maxSingleBlockCapacity * systemHourType;
                    
                    const minSetsForPower = Math.ceil(power / maxSingleBlockPower);
                    const minSetsForCapacity = Math.ceil(capacity / maxCapacityPerBlock);
                    const minSets = Math.max(minSetsForPower, minSetsForCapacity, 1);
                    
                    minSetsValue.textContent = minSets;
                    minSetsHint.classList.add('show');
                    
                    // å¦‚æœå¯ç”¨äº†è®¾å¤‡å¥—æ•°é™åˆ¶ä¸”å½“å‰è®¾ç½®çš„æœ€å¤§å¥—æ•°å°äºæœ€å°å¥—æ•°ï¼Œè‡ªåŠ¨è°ƒæ•´
                    if (parseInt(maxDeviceSetsInput.value) < minSets) {
                        maxDeviceSetsInput.value = minSets;
                    }
                } else {
                    minSetsHint.classList.remove('show');
                }
            }
            
            projectPowerInput.addEventListener('input', updateMinDeviceSetsHint);
            projectCapacityInput.addEventListener('input', updateMinDeviceSetsHint);

            // --- å åœ°é¢ç§¯é¢„æµ‹å¼€å…³æ§åˆ¶ ---
            const enableLandAreaPrediction = document.getElementById('enable_land_area_prediction');
            const landAreaInputArea = document.getElementById('land-area-prediction-input-area');
            const transformerCountSelect = document.getElementById('transformer_count');
            const landAreaHint = document.getElementById('land-area-hint');
            
            // å¼€å…³çŠ¶æ€å˜åŒ–å¤„ç†
            enableLandAreaPrediction.addEventListener('change', function() {
                if (this.checked) {
                    landAreaInputArea.classList.remove('disabled');
                    transformerCountSelect.disabled = false;
                } else {
                    landAreaInputArea.classList.add('disabled');
                    transformerCountSelect.disabled = true;
                    landAreaHint.style.display = 'none';
                }
            });
            
            // é¡µé¢åŠ è½½æ—¶ä¸è‡ªåŠ¨æ˜¾ç¤ºæœ€å°è®¾å¤‡å¥—æ•°æç¤ºï¼Œåªæœ‰å¼€å¯é™åˆ¶æ—¶æ‰æ˜¾ç¤º

            const animatedElements = document.querySelectorAll('.animate-on-scroll');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, { threshold: 0.1 });
            animatedElements.forEach(el => { observer.observe(el); });

            const header = document.getElementById('main-header');
            window.addEventListener('scroll', () => {
                header.classList.toggle('scrolled', window.scrollY > 50);
            });

            const menuToggle = document.getElementById('menu-toggle');
            const mainNav = document.getElementById('main-nav');
            if (menuToggle && mainNav) {
                menuToggle.addEventListener('click', () => {
                    const isActive = mainNav.classList.toggle('is-active');
                    menuToggle.classList.toggle('is-active', isActive);
                    menuToggle.setAttribute('aria-expanded', isActive);
                });
            }

            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function() {
                    if (mainNav.classList.contains('is-active') && !link.id !== 'download-report-button') { // Do not close for download button as it's not a scroll target
                        mainNav.classList.remove('is-active');
                        menuToggle.classList.remove('is-active');
                        menuToggle.setAttribute('aria-expanded', 'false');
                    }
                });
            });
            
            const downloadReportButton = document.getElementById('download-report-button');
            if (downloadReportButton) {
                downloadReportButton.addEventListener('click', async function(event) {
                    event.preventDefault(); // Prevent default anchor behavior

                    const projectInputsSection = document.getElementById('project-inputs-section');
                    const resultsArea = document.getElementById('results-area');

                    if (!resultsArea || resultsArea.style.display === 'none') {
                        alert('è¯·å…ˆç”Ÿæˆé…ç½®ç»“æœï¼Œå¹¶ç¡®ä¿ç»“æœåŒºåŸŸå¯è§ï¼Œç„¶åå†ä¸‹è½½æŠ¥å‘Šã€‚');
                        return;
                    }

                    const originalButtonText = this.textContent;
                    this.innerHTML = 'æ­£åœ¨ç”ŸæˆPDF... <span class="spinner"></span>'; // Add a spinner or loading text
                    this.disabled = true;

                    document.body.classList.add('prepare-for-pdf-capture');

                    console.log("Attempting to use jsPDF. window.jspdf is:", window.jspdf); // Debugging line

                    try {
                        if (!window.jspdf || !window.jspdf.jsPDF) {
                            alert("jsPDF library not loaded correctly. Please check the console and ensure jsPDF is loaded before this script runs.");
                            throw new Error("jsPDF library not loaded or not exposing jsPDF constructor correctly.");
                        }
                        const { jsPDF } = window.jspdf; // Or: const jsPDF = window.jspdf.jsPDF;
                        const pdf = new jsPDF({
                            orientation: 'p',
                            unit: 'pt',
                            format: 'a4'
                        });

                        const commonHtml2CanvasOptions = {
                            scale: 2, // Improves image quality
                            useCORS: true,
                            logging: false,
                            scrollX: 0, // Ensure we capture from the top-left
                            scrollY: -window.scrollY, // Offset by current scroll position
                            windowWidth: document.documentElement.offsetWidth, // Capture full width
                            windowHeight: document.documentElement.offsetHeight, // Capture full height for calculation
                             onclone: (clonedDoc) => {
                                const diagrams = clonedDoc.querySelectorAll('.mermaid');
                                diagrams.forEach((diag) => {
                                    const svg = diag.querySelector('svg');
                                    if (svg) {
                                        // Ensure SVGs have explicit dimensions from their bounding box
                                        const actualDiag = document.getElementById(diag.id); // Get original from main DOM
                                        if(actualDiag){
                                            const rect = actualDiag.getBoundingClientRect();
                                            svg.style.width = rect.width + 'px';
                                            svg.style.height = rect.height + 'px';
                                        }
                                    }
                                });
                            }
                        };

                        // --- Capture Project Inputs Section ---
                        const canvasInputs = await html2canvas(projectInputsSection, commonHtml2CanvasOptions);
                        const imgDataInputs = canvasInputs.toDataURL('image/png');
                        const imgPropsInputs = pdf.getImageProperties(imgDataInputs);
                        const pdfWidth = pdf.internal.pageSize.getWidth();
                        let currentY = 0;
                        const pageMargin = 40; // pt, for top/bottom margins
                        let remainingPageHeight = pdf.internal.pageSize.getHeight() - (2 * pageMargin);

                        let sectionHeightInputs = (imgPropsInputs.height * pdfWidth) / imgPropsInputs.width;
                        pdf.addImage(imgDataInputs, 'PNG', pageMargin, pageMargin + currentY, pdfWidth - (2*pageMargin), sectionHeightInputs);
                        currentY += sectionHeightInputs + 20; // Add some space after this section

                        // --- Capture Results Area --- 
                        // Ensure results area is fully visible and not affected by animations for capture
                        resultsArea.style.display = 'block'; // Ensure it is displayed

                        const canvasResults = await html2canvas(resultsArea, commonHtml2CanvasOptions);
                        const imgDataResults = canvasResults.toDataURL('image/png');
                        const imgPropsResults = pdf.getImageProperties(imgDataResults);
                        let sectionHeightResults = (imgPropsResults.height * pdfWidth) / imgPropsResults.width;

                        // Check if results fit on current page or need new page
                        if (currentY + sectionHeightResults > remainingPageHeight) {
                            pdf.addPage();
                            currentY = 0; // Reset Y for new page
                        }
                        pdf.addImage(imgDataResults, 'PNG', pageMargin, pageMargin + currentY, pdfWidth - (2*pageMargin), sectionHeightResults);

                        pdf.save('å‚¨èƒ½ç³»ç»Ÿé…ç½®æŠ¥å‘Š.pdf');

                    } catch (error) {
                        console.error("PDFç”Ÿæˆå¤±è´¥:", error);
                        alert("PDFç”Ÿæˆå¤±è´¥ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹æ§åˆ¶å°ã€‚\né”™è¯¯: " + error.message);
                    } finally {
                        this.textContent = originalButtonText;
                        this.disabled = false;
                        document.body.classList.remove('prepare-for-pdf-capture');
                    }
                });
            }
            
            const sections = document.querySelectorAll('main section[id], div#results-area');
            function navHighlighter() {
                let scrollY = window.pageYOffset;
                let activeSectionId = null;

                sections.forEach(current => {
                    const sectionHeight = current.offsetHeight;
                    const sectionTop = current.offsetTop - (header.offsetHeight + 70) ; // Increased offset slightly
                    let sectionId = current.getAttribute('id');
                    
                    if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight){
                       activeSectionId = sectionId;
                    }
                });
                if (scrollY < (document.getElementById('project-inputs-section')?.offsetTop - (header.offsetHeight + 70) || 200)) {
                    activeSectionId = 'hero';
                }

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if(link.getAttribute('href') === `#${activeSectionId}`) {
                        link.classList.add('active');
                    }
                });
            }
            window.addEventListener('scroll', navHighlighter);
            navHighlighter();
        }); 

        // --- Pyodide & Calculation Script ---
        let pyodideInstance = null; 

        const rootStyles = getComputedStyle(document.documentElement);
        const primaryColorVal = rootStyles.getPropertyValue('--primary-color').trim();
        const textColorLightVal = rootStyles.getPropertyValue('--text-color-light').trim();
        const primaryColorDarkVal = rootStyles.getPropertyValue('--primary-color-dark').trim();
        const accentColorTealVal = rootStyles.getPropertyValue('--accent-color-teal').trim();

        mermaid.initialize({ 
            startOnLoad: false,
            theme: 'base', // Using 'base' for more CSS control
            fontFamily: '"Noto Sans SC", sans-serif',
            flowchart: { 
                htmlLabels: true, 
                useMaxWidth: false // Set to false and control width via CSS on the svg
            },
            themeVariables: {
                // Node colors - using accent yellow for background, primary orange for border
                primaryColor: getComputedStyle(document.documentElement).getPropertyValue('--accent-color-yellow').trim(),
                primaryTextColor: getComputedStyle(document.documentElement).getPropertyValue('--text-color-headings').trim(),
                primaryBorderColor: getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim(),
                
                // Line/arrow color - using primary orange
                lineColor: getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim(),
                
                // General text color within nodes if not covered by primaryTextColor (should be same)
                textColor: getComputedStyle(document.documentElement).getPropertyValue('--text-color-headings').trim(), 
                fontSize: '14px',
                
                // Subgraph/cluster colors - using a very light primary orange for background, primary orange for border
                clusterBkg: getComputedStyle(document.documentElement).getPropertyValue('--primary-color-extralight').trim(), // Assumes --primary-color-extralight is defined
                clusterBorder: getComputedStyle(document.documentElement).getPropertyValue('--primary-color').trim()
            },
            classDefs: {
                pcsNodeStyle: 'fill:#FF0000,color:#FFFFFF,stroke:#AA0000,stroke-width:2px', // æµ‹è¯•ç”¨äº®çº¢è‰²
                dcNodeStyle: 'fill:#0000FF,color:#FFFFFF,stroke:#0000AA,stroke-width:2px'  // æµ‹è¯•ç”¨äº®è“è‰²
            }
        });

        async function mainPyodide() {
            const calculateButton = document.getElementById("calculate-button");
            const resultsArea = document.getElementById("results-area");
            const solutionMessage = document.getElementById("solution-message");
            
            const summaryInputPower = document.getElementById("summary-input-power");
            const summaryInputCapacity = document.getElementById("summary-input-capacity");
            const summaryConfigPower = document.getElementById("summary-config-power");
            const summaryActualPower = document.getElementById("summary-actual-power");
            const actualPowerCard = document.getElementById("actual-power-card");
            const actualPowerNote = document.getElementById("actual-power-note");
            const summaryConfigCapacity = document.getElementById("summary-config-capacity");
            const summaryTotalCost = document.getElementById("summary-total-cost");
            const totalCostCard = document.getElementById("total-cost-card");
            const summarySystemHourType = document.getElementById("summary-system-hour-type");
            // V3.0: æ–°å¢å­—æ®µ
            const summaryEquivalentCapacity = document.getElementById("summary-equivalent-capacity");
            const equivalentCapacityCard = document.getElementById("equivalent-capacity-card");
            const summaryUnitPrice = document.getElementById("summary-unit-price");
            const unitPriceCard = document.getElementById("unit-price-card");

            const acSideContainer = document.getElementById("ac-side-container");
            const acSideList = document.getElementById("ac-side-list");
            const dcSideContainer = document.getElementById("dc-side-container");
            const dcSideList = document.getElementById("dc-side-list");
            
            const essBlocksContainer = document.getElementById("ess-blocks-container"); // The main section
            const essBlocksDiagrams = document.getElementById("ess-blocks-diagrams"); // Where SVG goes
            const essBlocksDetailsTextContainer = document.getElementById("ess-blocks-details-text-container"); // Where text list goes

            const solutionParametersSection = document.getElementById("solution-parameters");
            const paramDcFamily = document.getElementById("param-dc-family");
            const paramChosenDcSpecs = document.getElementById("param-chosen-dc-specs");
            const systemSelection = document.getElementById("system_selection");

            // æ·»åŠ è®¾å¤‡å¥—æ•°ç›¸å…³çš„å˜é‡å£°æ˜
            const enableDeviceSetsLimit = document.getElementById('enable_device_sets_limit');
            const minSetsHint = document.getElementById('min-sets-hint');
            const minSetsValue = document.getElementById('min-sets-value');

            calculateButton.textContent = "åŠ è½½è®¡ç®—å¼•æ“...";
            calculateButton.disabled = true;
            solutionMessage.textContent = "æ­£åœ¨åˆå§‹åŒ–è®¡ç®—å¼•æ“...";
            solutionMessage.className = "message-info"; 

            try {
                pyodideInstance = await loadPyodide(); 
                
                // åŠ è½½å¿…è¦çš„PythonåŒ…ï¼ˆåªéœ€numpyï¼Œæ— éœ€ scikit-learnï¼ï¼‰
                solutionMessage.textContent = "æ­£åœ¨åŠ è½½Pythonä¾èµ–åŒ…...";
                await pyodideInstance.loadPackage(["micropip", "numpy"]);
                console.log("Numpy and micropip loaded successfully");
                
                // ç§»é™¤é¢„åŠ è½½æ¨¡å‹ç»“æ„æ–‡ä»¶ (JSON) çš„é€»è¾‘ï¼Œæ”¹ä¸ºæŒ‰éœ€åŠ è½½
                
                solutionMessage.textContent = "æ­£åœ¨åŠ è½½è®¡ç®—è„šæœ¬...";
                const pythonScriptResponse = await fetch("./all_sys.py"); 
                if (!pythonScriptResponse.ok) {
                    throw new Error(`æ— æ³•åŠ è½½Pythonè„šæœ¬: ${pythonScriptResponse.statusText}`);
                }
                const pythonScript = await pythonScriptResponse.text();
                pyodideInstance.runPython(pythonScript);
                console.log("Python script loaded and executed by Pyodide.");

                calculateButton.textContent = "è®¡ç®—æœ€ä¼˜æ–¹æ¡ˆ";
                calculateButton.disabled = false;
                solutionMessage.textContent = "å¼•æ“åŠ è½½å®Œæ¯•ï¼Œè¯·è¾“å…¥å‚æ•°åç‚¹å‡»è®¡ç®—ã€‚";
                solutionMessage.className = "message-success";

            } catch (error) {
                 console.error("Pyodide initialization error:", error);
                 calculateButton.textContent = "å¼•æ“åŠ è½½å¤±è´¥";
                 calculateButton.disabled = true;
                 solutionMessage.textContent = "è®¡ç®—å¼•æ“åŠ è½½å¤±è´¥: " + error.message;
                 solutionMessage.className = "message-error";
                 return; 
            }

            calculateButton.addEventListener("click", async () => {
                if (!pyodideInstance || !pyodideInstance.globals) { 
                    solutionMessage.textContent = "è®¡ç®—å¼•æ“æœªå°±ç»ªï¼Œè¯·åˆ·æ–°é¡µé¢ã€‚";
                    solutionMessage.className = "message-error";
                    console.error("Pyodide instance not available for calculation.");
                    return;
                }

                const projectPowerMw = parseFloat(document.getElementById("project_power_mw").value);
                const projectCapacityMwh = parseFloat(document.getElementById("project_capacity_mwh").value);
                const enableLimit = document.getElementById("enable_device_sets_limit").checked;
                const maxDeviceSets = enableLimit ? (parseInt(document.getElementById("max_device_sets").value) || 100) : 100;
                const selectedSystemValue = systemSelection.value;

                if (isNaN(projectPowerMw) || isNaN(projectCapacityMwh) || projectPowerMw <= 0 || projectCapacityMwh <= 0) {
                    solutionMessage.textContent = "è¯·è¾“å…¥æœ‰æ•ˆçš„æ­£æ•°é¡¹ç›®åŠŸç‡å’Œå®¹é‡ã€‚";
                    solutionMessage.className = "message-warning";
                    resultsArea.style.display = "block"; 
                    document.getElementById("solution-summary-metrics").style.display = "block"; 
                    acSideContainer.style.display = "none";
                    dcSideContainer.style.display = "none";
                    essBlocksContainer.style.display = "none";
                    solutionParametersSection.style.display = "none";
                    summaryInputPower.textContent = "-";
                    summaryInputCapacity.textContent = "-";
                    summaryConfigPower.textContent = "-";
                    summaryConfigCapacity.textContent = "-";
                    summaryTotalCost.textContent = "-";
                    summaryEquivalentCapacity.textContent = "-";
                    summaryUnitPrice.textContent = "-";
                    totalCostCard.style.display = "block";  // å§‹ç»ˆæ˜¾ç¤º
                    equivalentCapacityCard.style.display = "none";
                    unitPriceCard.style.display = "none";
                    summarySystemHourType.textContent = "-";
                    // æ¸…é™¤å®é™…åŠŸç‡è¾“å‡ºæ˜¾ç¤º
                    summaryActualPower.textContent = "-";
                    actualPowerCard.style.display = "none";
                    actualPowerNote.style.display = "none";
                    return;
                }

                // æ–°å¢ï¼šæ£€æŸ¥éæ ‡å‡†æ—¶é•¿ (æ–¹æ¡ˆé…ç½®æ”¯æŒ 2h, 4h, 6h)
                const duration = projectCapacityMwh / projectPowerMw;
                const isSupportedConfigDuration = (
                    Math.abs(duration - 2.0) < 0.01 || 
                    Math.abs(duration - 4.0) < 0.01 || 
                    Math.abs(duration - 6.0) < 0.01
                );
                
                if (!isSupportedConfigDuration) {
                    solutionMessage.textContent = `ç›®å‰ä¸æ”¯æŒ ${duration.toFixed(2)}h æ—¶é•¿æ–¹æ¡ˆé…ç½®ï¼ˆä»…æ”¯æŒ 2h, 4h æˆ– 6hï¼‰ã€‚`;
                    solutionMessage.className = "message-warning";
                    solutionMessage.style.display = "block";
                    
                    resultsArea.style.display = "block"; // æ˜¾ç¤ºåŒºåŸŸä»¥ä¾¿èƒ½çœ‹åˆ°æ¶ˆæ¯
                    resultsArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    // éšè—æŒ‡æ ‡å†…å®¹
                    const metricsContainer = document.querySelector('#solution-summary-metrics .metrics-container');
                    if(metricsContainer) metricsContainer.style.display = "none";
                    
                    return;
                }

                resultsArea.style.display = "block";
                // æ¢å¤æ˜¾ç¤ºæŒ‡æ ‡å†…å®¹
                const metricsContainer = document.querySelector('#solution-summary-metrics .metrics-container');
                if(metricsContainer) metricsContainer.style.display = "grid";
                resultsArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
                solutionMessage.textContent = "æ­£åœ¨è®¡ç®—ä¸­ï¼Œè¯·ç¨å€™...";
                solutionMessage.className = "message-info";
                document.getElementById("solution-summary-metrics").style.display = "block";

                summaryInputPower.textContent = projectPowerMw.toFixed(2);
                summaryInputCapacity.textContent = projectCapacityMwh.toFixed(2);
                ['summary-config-power', 'summary-config-capacity', 'summary-total-cost', 'summary-equivalent-capacity', 'summary-unit-price', 'summary-system-hour-type', 'param-dc-family', 'param-chosen-dc-specs'].forEach(id => {
                    const el = document.getElementById(id);
                    if (el) el.textContent = "-";
                });
                // æ¸…é™¤å®é™…åŠŸç‡è¾“å‡ºæ˜¾ç¤º
                summaryActualPower.textContent = "-";
                actualPowerCard.style.display = "none";
                actualPowerNote.style.display = "none";
                // V3.0: æ¸…é™¤æ–°å­—æ®µï¼ˆæ‰€æœ‰ç³»ç»Ÿé…ç½®éƒ½æ˜¾ç¤ºï¼‰
                summaryEquivalentCapacity.textContent = "-";
                summaryUnitPrice.textContent = "-";
                totalCostCard.style.display = "block";  // å§‹ç»ˆæ˜¾ç¤ºï¼Œç­‰å¾…æ•°æ®å¡«å……
                equivalentCapacityCard.style.display = "none";
                unitPriceCard.style.display = "none";
                acSideList.innerHTML = ""; dcSideList.innerHTML = "";
                essBlocksDiagrams.innerHTML = ""; 
                if(essBlocksDetailsTextContainer) essBlocksDetailsTextContainer.innerHTML = ""; // Clear new container

                acSideContainer.style.display = "none"; dcSideContainer.style.display = "none";
                essBlocksContainer.style.display = "none"; solutionParametersSection.style.display = "none";


                try {
                    let resultJs;
                    if (selectedSystemValue === "5mw") {
                        resultJs = pyodideInstance.globals.get("get_optimal_solution_for_dc_family")("5MW", projectPowerMw, projectCapacityMwh, maxDeviceSets);
                    } else if (selectedSystemValue === "7.5mw") {
                        resultJs = pyodideInstance.globals.get("get_optimal_solution_for_dc_family")("7.5MW", projectPowerMw, projectCapacityMwh, maxDeviceSets);
                    } else { 
                        resultJs = pyodideInstance.globals.get("get_overall_optimal_solution")(projectPowerMw, projectCapacityMwh, maxDeviceSets);
                    }
                    
                    const jsProxyToJs = (x) => {
                        if (x instanceof pyodideInstance.ffi.PyProxy) { 
                            if (x.type === "dict") return x.toJs({ dict_converter: Object.fromEntries });
                            if (x.type === "list" || x.type === "tuple") return x.toJs();
                        }
                        return x;
                    };
                    const finalResult = jsProxyToJs(resultJs);
                    console.log("Processed result from Python:", finalResult);

                    // æ›´æ–°æœ€å°è®¾å¤‡å¥—æ•°æ˜¾ç¤ºï¼ˆä½¿ç”¨åç«¯ç²¾ç¡®è®¡ç®—çš„å€¼ï¼‰
                    if (finalResult.min_device_sets !== undefined && enableDeviceSetsLimit.checked) {
                        minSetsValue.textContent = finalResult.min_device_sets;
                        minSetsHint.classList.add('show');
                    }

                    solutionMessage.textContent = "è®¡ç®—å®Œæˆã€‚";
                    // V3.0: æ£€æŸ¥total_costè€Œécost
                    const resultCost = finalResult.total_cost !== undefined ? finalResult.total_cost : finalResult.cost;
                    solutionMessage.className = (resultCost === Infinity || resultCost == null) ? "message-error" : "message-success";


                    if (resultCost === Infinity || resultCost == null) {
                        document.getElementById("solution-summary-metrics").style.display = "block"; 
                        return; 
                    }

                    if (finalResult.power !== undefined) summaryConfigPower.textContent = finalResult.power.toFixed(2);
                    
                    // è®¡ç®—å’Œæ˜¾ç¤ºå®é™…åŠŸç‡è¾“å‡º
                    if (finalResult.power !== undefined && finalResult.block_details_for_display && finalResult.system_hour_type !== undefined) {
                        let actualPowerOutput = 0;
                        let hasReducedClusterConfig = false;
                        
                        // è®¡ç®—å®é™…åŠŸç‡è¾“å‡º
                        finalResult.block_details_for_display.forEach(blockDetail => {
                            const blockCount = blockDetail.count;
                            const pcsRatedPower = blockDetail.pcs_power_mw;
                            let blockDcCapacity = 0;
                            
                            // è®¡ç®—å•ä¸ªå—çš„ç›´æµå®¹é‡
                            blockDetail.dc_containers.forEach(dc => {
                                blockDcCapacity += dc.count_in_block * dc.capacity_per_unit;
                            });
                            
                            // æ£€æŸ¥æ˜¯å¦åŒ…å«å‡ç°‡é…ç½®
                            blockDetail.dc_containers.forEach(dc => {
                                // ç®€åŒ–æ£€æŸ¥ï¼šå¦‚æœåç§°åŒ…å«"å‡"å­—ï¼Œè®¤ä¸ºæ˜¯å‡ç°‡é…ç½®
                                if (dc.name_cn && dc.name_cn.includes('å‡')) {
                                    hasReducedClusterConfig = true;
                                }
                            });
                            
                            // ç»Ÿä¸€å…¬å¼ï¼šmin(PCSé¢å®šåŠŸç‡, ç›´æµå®¹é‡Ã·ç³»ç»Ÿæ—¶é•¿)
                            let actualBlockPower;
                            if (finalResult.system_hour_type > 0) {
                                const dcLimitedPower = blockDcCapacity / finalResult.system_hour_type;
                                actualBlockPower = Math.min(pcsRatedPower, dcLimitedPower);
                            } else {
                                actualBlockPower = pcsRatedPower;
                            }
                            
                            actualPowerOutput += blockCount * actualBlockPower;
                        });
                        
                        actualPowerOutput = Math.round(actualPowerOutput * 100) / 100; // ä¸¤ä½å°æ•°ç²¾åº¦
                        
                        // æ˜¾ç¤ºå®é™…åŠŸç‡è¾“å‡º
                        summaryActualPower.textContent = actualPowerOutput.toFixed(2);
                        actualPowerCard.style.display = "block";
                        
                        // ç§»é™¤æç¤ºä¿¡æ¯
                        actualPowerNote.textContent = "";
                        actualPowerNote.style.display = "none";

                    } else {
                        actualPowerCard.style.display = "none";
                    }

                    if (finalResult.capacity !== undefined) summaryConfigCapacity.textContent = finalResult.capacity.toFixed(2);
                    if (finalResult.system_hour_type !== undefined) summarySystemHourType.textContent = finalResult.system_hour_type;
                    
                    let dcFamilyForDisplay = finalResult.dc_family_technology || "-";
                    if (finalResult.dc_family_technology === "5MW") dcFamilyForDisplay = "PowerTitan2.0æ¶²å†·å‚¨èƒ½ç³»ç»Ÿ";
                    else if (finalResult.dc_family_technology === "7.5MW") dcFamilyForDisplay = "PowerTitan2.0æ‹“å±•ç‰ˆæ¶²å†·å‚¨èƒ½ç³»ç»Ÿ";
                    paramDcFamily.textContent = dcFamilyForDisplay;
                    paramChosenDcSpecs.textContent = finalResult.chosen_global_dc_specs ? finalResult.chosen_global_dc_specs.join(", ") : "-";
                    solutionParametersSection.style.display = "block";
                    
                    // V3.0: æ˜¾ç¤ºçœŸå®æˆæœ¬ã€ç­‰æ•ˆå®¹é‡å’Œå•ä»·ï¼ˆæ‰€æœ‰ç³»ç»Ÿé…ç½®éƒ½æ˜¾ç¤ºï¼‰
                    if (finalResult.total_cost !== undefined && finalResult.total_cost !== Infinity) {
                        summaryTotalCost.textContent = finalResult.total_cost.toFixed(2);
                        totalCostCard.style.display = "block";
                    } else {
                        totalCostCard.style.display = "none";
                    }
                    
                    if (finalResult.equivalent_capacity !== undefined) {
                        summaryEquivalentCapacity.textContent = finalResult.equivalent_capacity.toFixed(3);
                        equivalentCapacityCard.style.display = "block";
                    } else {
                        equivalentCapacityCard.style.display = "none";
                    }
                    
                    if (finalResult.unit_price !== undefined && finalResult.unit_price > 0) {
                        summaryUnitPrice.textContent = finalResult.unit_price.toFixed(2);
                        unitPriceCard.style.display = "block";
                    } else {
                        unitPriceCard.style.display = "none";
                    }

                    if (finalResult.block_details_for_display && finalResult.block_details_for_display.length > 0) {
                        essBlocksContainer.style.display = "block"; // Show the main section container
                        acSideContainer.style.display = "block";
                        dcSideContainer.style.display = "block";
                        
                        const pcsComponents = {};
                        const dcComponents = {};
                        // Mermaid diagram title includes dynamic values from user input
                        let mermaidDiagram = `graph TD\n    subgraph "å‚¨èƒ½å•å…ƒæ„æˆ (${dcFamilyForDisplay} - ${projectPowerMw}MW / ${projectCapacityMwh}MWh)"\n    direction LR\n`;
                        let blockCounter = 0;
                        let subGraphCounter = 0;

                        finalResult.block_details_for_display.forEach(blockDetail => {
                            const blockKey = `B${blockCounter++}`;
                            mermaidDiagram += `    subgraph ${blockKey}_Sub["${blockDetail.block_description} (x${blockDetail.count})"]\n    direction LR\n`; // Removed "å•å…ƒå—ç±»å‹:" prefix for cleaner look
                            const pcsKey = `PCS_${blockKey}`;
                            mermaidDiagram += `        ${pcsKey}["${blockDetail.pcs_name_cn} (x1)"]:::pcsNodeStyle\n`; 

                            pcsComponents[blockDetail.pcs_name_cn] = (pcsComponents[blockDetail.pcs_name_cn] || { count: 0, power_per_unit: blockDetail.pcs_power_mw });
                            pcsComponents[blockDetail.pcs_name_cn].count += blockDetail.count;

                            blockDetail.dc_containers.forEach(dc => {
                                const dcKey = `DC_${dc.name_cn.replace(/\W/g, "")}_${blockKey}_${subGraphCounter++}`;
                                mermaidDiagram += `        ${pcsKey} --> ${dcKey}["${dc.name_cn} (x${dc.count_in_block})<br>å®¹é‡: ${dc.capacity_per_unit.toFixed(3)} MWh"]:::dcNodeStyle\n`;

                                dcComponents[dc.name_cn] = (dcComponents[dc.name_cn] || { count: 0, capacity_per_unit: dc.capacity_per_unit });
                                dcComponents[dc.name_cn].count += blockDetail.count * dc.count_in_block;
                            });
                            mermaidDiagram += `    end\n`;
                        });
                        mermaidDiagram += `    end`; 

                        essBlocksDiagrams.innerHTML = ""; 
                        essBlocksDiagrams.removeAttribute('data-processed');
                        try {
                            const { svg } = await mermaid.render("mermaid-diag-" + Date.now(), mermaidDiagram);
                            essBlocksDiagrams.innerHTML = svg;
                        } catch (e) {
                            console.error("Mermaid rendering error:", e);
                            essBlocksDiagrams.innerHTML = `<p style='color:red; font-weight:bold;'>å›¾è¡¨æ¸²æŸ“å¤±è´¥:</p><p style='color:red;'>${e.message}</p><pre style='font-size:0.8em; color:#333; white-space:pre-wrap;'>${mermaidDiagram}</pre>`;
                        }

                        let detailsTextHTML = "<p><strong>å‚¨èƒ½å•å…ƒå—è¯¦ç»†æ„æˆ:</strong></p><ul>";
                        finalResult.block_details_for_display.forEach(bd => { detailsTextHTML += `<li>${bd.count} x [${bd.block_description}]</li>`; });
                        detailsTextHTML += "</ul>";
                        if(essBlocksDetailsTextContainer) essBlocksDetailsTextContainer.innerHTML = detailsTextHTML;


                        acSideList.innerHTML = "";
                        for (const [name, data] of Object.entries(pcsComponents)) {
                            const li = document.createElement("li");
                            li.textContent = `${name}: ${data.count}å° (å•å°åŠŸç‡: ${data.power_per_unit.toFixed(3)} MW, æ€»è®¡: ${(data.count * data.power_per_unit).toFixed(3)} MW)`;
                            acSideList.appendChild(li);
                        }
                        dcSideList.innerHTML = "";
                        for (const [name, data] of Object.entries(dcComponents)) {
                            const li = document.createElement("li");
                            li.textContent = `${name}: ${data.count}ä¸ª (å•å°å®¹é‡: ${data.capacity_per_unit.toFixed(3)} MWh, æ€»è®¡: ${(data.count * data.capacity_per_unit).toFixed(3)} MWh)`;
                            dcSideList.appendChild(li);
                        }
                    } else {
                        essBlocksContainer.style.display = "none";
                        acSideContainer.style.display = "none";
                        dcSideContainer.style.display = "none";
                    }

                    // --- å åœ°é¢ç§¯é¢„æµ‹ ---
                    const landAreaResultsSection = document.getElementById("land-area-results");
                    const landAreaMessage = document.getElementById("land-area-message");
                    const enableLandAreaPrediction = document.getElementById("enable_land_area_prediction");
                    
                    if (enableLandAreaPrediction && enableLandAreaPrediction.checked) {
                        try {
                            // æ˜¾ç¤ºå åœ°é¢ç§¯ç»“æœåŒºåŸŸ
                            landAreaResultsSection.style.display = "block";
                            landAreaMessage.style.display = "none";
                            landAreaMessage.textContent = ""; // Clear previous messages
                            
                            // è·å–è¾“å…¥å‚æ•°
                            const mw = projectPowerMw;
                            const mwh = projectCapacityMwh;
                            const duration = mwh / mw;
                            const transformerCount = parseInt(document.getElementById("transformer_count").value) || 1;
                            
                            // ç³»ç»Ÿç±»å‹åˆ¤æ–­
                            let systemType = "7.5MW"; // é»˜è®¤
                            if (selectedSystemValue === "5mw") systemType = "5MW";
                            else if (selectedSystemValue === "7.5mw") systemType = "7.5MW";
                            else if (finalResult.dc_family_technology === "5MW") systemType = "5MW";
                            
                            // æ£€æŸ¥æ˜¯å¦æ˜¯éæ ‡æ—¶é•¿
                            const isStandardDuration = (Math.abs(duration - 2.0) < 0.01 || Math.abs(duration - 4.0) < 0.01);
                            if (!isStandardDuration) {
                                landAreaMessage.textContent = "âš ï¸ æ³¨æ„ï¼šå åœ°é¢ç§¯é¢„æµ‹ç›®å‰ä»…æ”¯æŒæ ‡å‡† 2h æˆ– 4h ç³»ç»Ÿã€‚å½“å‰ç»“æœä»…ä¾›å‚è€ƒã€‚";
                                landAreaMessage.className = "message-warning";
                                landAreaMessage.style.display = "block";
                            }
                            
                            // === åˆ†æ”¯ 1: å°å‹é¡¹ç›® (< 50MWh) ===
                            if (mwh < 50) {
                                // ä½¿ç”¨äºŒé¡¹å¼æ‹Ÿåˆå…¬å¼è®¡ç®—å‚¨èƒ½åŒºé¢ç§¯
                                const storageAreaM2 = calculateSmallProjectArea(systemType, mw, duration);
                                const storageAreaMu = storageAreaM2 * 0.0015;
                                
                                document.getElementById("land-storage-area-m2").textContent = storageAreaM2.toFixed(2) + " mÂ²";
                                document.getElementById("land-storage-area-mu").textContent = storageAreaMu.toFixed(2);
                                document.getElementById("storage-area-card").style.display = "block";
                                
                                document.getElementById("substation-area-card").style.display = "none";
                                document.getElementById("total-area-card").style.display = "none";
                                
                                landAreaMessage.textContent += (landAreaMessage.textContent ? "\n" : "") + "âœ“ å åœ°é¢ç§¯æ ¸ç®—å®Œæˆï¼ˆå°å‹é¡¹ç›®æ¨¡å¼ï¼Œä½“é‡ < 50MWhï¼‰\nğŸ’¡ ä»…åŒ…å«å‚¨èƒ½åŒºå åœ°é¢ç§¯ï¼ˆä¸å«ç¯å½¢é“è·¯ï¼‰ï¼Œä¸å«å‡å‹ç«™";
                                if (!landAreaMessage.className.includes("message-warning")) {
                                     landAreaMessage.className = "message-success";
                                }
                                landAreaMessage.style.display = "block";
                                
                            } 
                            // === åˆ†æ”¯ 2: å¤§å‹é¡¹ç›® (>= 50MWh) - ä½¿ç”¨ JS GBR æ¨¡å‹ (åŸç”Ÿç²¾åº¦) ===
                            else {
                                solutionMessage.textContent = "æ­£åœ¨è®¡ç®—å åœ°é¢ç§¯..."; 
                                
                                try {
                                    // ç›´æ¥è°ƒç”¨ç”Ÿæˆçš„ JS æ¨¡å‹å‡½æ•°
                                    if (typeof window.predictLandAreaGBR !== 'function') {
                                        throw new Error("é¢„æµ‹æ¨¡å‹æ–‡ä»¶ gbr_models.js æœªæ­£ç¡®åŠ è½½");
                                    }

                                    const result = window.predictLandAreaGBR(systemType, mw, duration, mwh, transformerCount);
                                    
                                    const storageAreaVal = result.storage;
                                    const subAreaVal = result.substation;
                                    const totalAreaVal = result.total;
                                    
                                    document.getElementById("land-storage-area-m2").textContent = storageAreaVal.toFixed(2) + " mÂ²";
                                    document.getElementById("land-storage-area-mu").textContent = (storageAreaVal * 0.0015).toFixed(2);
                                    
                                    document.getElementById("land-substation-area-m2").textContent = subAreaVal.toFixed(2) + " mÂ²";
                                    document.getElementById("land-substation-area-mu").textContent = (subAreaVal * 0.0015).toFixed(2);
                                    
                                    document.getElementById("land-total-area-m2").textContent = totalAreaVal.toFixed(2) + " mÂ²";
                                    document.getElementById("land-total-area-mu").textContent = (totalAreaVal * 0.0015).toFixed(2);
                                    
                                    document.getElementById("storage-area-card").style.display = "block";
                                    document.getElementById("substation-area-card").style.display = "block";
                                    document.getElementById("total-area-card").style.display = "block";
                                    
                                    solutionMessage.textContent = "è®¡ç®—å®Œæˆã€‚"; 
                                    landAreaMessage.textContent += (landAreaMessage.textContent ? "\n" : "") + "âœ“ å åœ°é¢ç§¯æ ¸ç®—å®Œæˆï¼ˆå¤§å‹é¡¹ç›®æ¨¡å¼ï¼Œä½“é‡ â‰¥ 50MWhï¼‰";
                                    if (!landAreaMessage.className.includes("message-warning")) {
                                         landAreaMessage.className = "message-success";
                                    }
                                    landAreaMessage.style.display = "block";
                                    
                                } catch (e) {
                                    throw new Error("æ¨¡å‹è®¡ç®—å¤±è´¥: " + e.message);
                                }
                            }
                            
                        } catch (error) {
                            console.error("Land area prediction error:", error);
                            landAreaResultsSection.style.display = "block";
                            landAreaMessage.textContent = "å åœ°é¢ç§¯æ ¸ç®—æ—¶å‡ºé”™: " + error.message;
                            landAreaMessage.className = "message-error";
                            landAreaMessage.style.display = "block";
                        }
                    } else {
                        // æœªå¯ç”¨å åœ°é¢ç§¯é¢„æµ‹ï¼Œéšè—ç»“æœåŒºåŸŸ
                        landAreaResultsSection.style.display = "none";
                    }
                    
                } catch (error) {
                    console.error("Error during calculation or display:", error);
                    solutionMessage.textContent = "è®¡ç®—æˆ–æ˜¾ç¤ºç»“æœæ—¶å‡ºé”™: " + error.message;
                    solutionMessage.className = "message-error";
                    document.getElementById("solution-summary-metrics").style.display = "block"; 
                    acSideContainer.style.display = "none";
                    dcSideContainer.style.display = "none";
                    essBlocksContainer.style.display = "none";
                    solutionParametersSection.style.display = "none";
                    // æ¸…é™¤å®é™…åŠŸç‡è¾“å‡ºæ˜¾ç¤º
                    summaryActualPower.textContent = "-";
                    actualPowerCard.style.display = "none";
                    actualPowerNote.style.display = "none";
                    // éšè—å åœ°é¢ç§¯ç»“æœ
                    document.getElementById("land-area-results").style.display = "none";
                }
            });
        }
        document.addEventListener('DOMContentLoaded', mainPyodide);

        // ==================== å¯¼èˆªæ æ˜¾ç¤ºæ§åˆ¶é€»è¾‘ ====================
        document.addEventListener('DOMContentLoaded', function() {
            const projectInputsSection = document.getElementById('project-inputs-section');
            const standaloneAreaSection = document.getElementById('standalone-area-calculator');
            const resultsArea = document.getElementById('results-area');
            
            const configLink = document.querySelector('a[href="#project-inputs-section"]');
            const areaLink = document.querySelector('a[href="#standalone-area-calculator"]');
            const heroStartBtn = document.getElementById('hero-start-btn');
            
            // æ™ºèƒ½è·³è½¬é€»è¾‘ï¼šHero æŒ‰é’®ç‚¹å‡»
            if (heroStartBtn) {
                heroStartBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // åˆ¤æ–­å½“å‰å“ªä¸ªåŒºåŸŸæ˜¯å¯è§çš„
                    // ä¼˜å…ˆæ£€æŸ¥å åœ°é¢ç§¯åŒºåŸŸæ˜¯å¦æ˜¾ç¤º
                    if (standaloneAreaSection.style.display === 'block' && standaloneAreaSection.offsetParent !== null) {
                        // å¦‚æœå½“å‰æ˜¯å åœ°é¢ç§¯æ ¸ç®—æ¨¡å¼
                        standaloneAreaSection.scrollIntoView({ behavior: 'smooth' });
                    } else {
                        // é»˜è®¤æ˜¯æ–¹æ¡ˆé…ç½®æ¨¡å¼
                        // ç¡®ä¿æ–¹æ¡ˆé…ç½®åŒºåŸŸæ˜¯å¯è§çš„ï¼ˆä»¥é˜²ä¸‡ä¸€ï¼‰
                        if (projectInputsSection.style.display === 'none') {
                            projectInputsSection.style.display = 'block';
                            standaloneAreaSection.style.display = 'none';
                            // åŒæ­¥å¯¼èˆªçŠ¶æ€
                            configLink.classList.add('active');
                            areaLink.classList.remove('active');
                        }
                        projectInputsSection.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }
            
            // æ–¹æ¡ˆé…ç½®é“¾æ¥ç‚¹å‡»äº‹ä»¶
            configLink.addEventListener('click', function(e) {
                e.preventDefault();
                projectInputsSection.style.display = 'block';
                standaloneAreaSection.style.display = 'none';
                // å¦‚æœæœ‰ç»“æœï¼Œä¿æŒæ˜¾ç¤º resultsArea
                // æ»šåŠ¨åˆ°é…ç½®åŒº
                projectInputsSection.scrollIntoView({ behavior: 'smooth' });
                
                // æ›´æ–°å¯¼èˆªçŠ¶æ€
                configLink.classList.add('active');
                areaLink.classList.remove('active');
            });
            
            // å åœ°é¢ç§¯æ ¸ç®—é“¾æ¥ç‚¹å‡»äº‹ä»¶
            areaLink.addEventListener('click', function(e) {
                e.preventDefault();
                projectInputsSection.style.display = 'none';
                standaloneAreaSection.style.display = 'block';
                resultsArea.style.display = 'none'; // éšè—æ–¹æ¡ˆé…ç½®ç»“æœ
                
                // æ»šåŠ¨åˆ°æ ¸ç®—åŒº
                standaloneAreaSection.scrollIntoView({ behavior: 'smooth' });
                
                // æ›´æ–°å¯¼èˆªçŠ¶æ€
                areaLink.classList.add('active');
                configLink.classList.remove('active');
            });
        });
        
        // ==================== ç‹¬ç«‹å åœ°é¢ç§¯è®¡ç®—å™¨åŠŸèƒ½ ====================
        document.addEventListener('DOMContentLoaded', function() {
            // è¾“å…¥æ¨¡å¼åˆ‡æ¢
            const inputModeRadios = document.querySelectorAll('input[name="sa_input_mode"]');
            const capacityInputGroup = document.getElementById('sa_capacity_input_group');
            const durationInputGroup = document.getElementById('sa_duration_input_group');
            
            inputModeRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'capacity') {
                        capacityInputGroup.style.display = 'block';
                        durationInputGroup.style.display = 'none';
                    } else {
                        capacityInputGroup.style.display = 'none';
                        durationInputGroup.style.display = 'block';
                    }
                });
            });

            // è®¡ç®—æŒ‰é’®
            const calculateButton = document.getElementById('calculate-area-button');
            calculateButton.addEventListener('click', function() {
                // è·å–è¾“å…¥å€¼
                const power = parseFloat(document.getElementById('sa_project_power').value);
                const systemTypeValue = document.getElementById('sa_system_type').value;
                const transformerCount = parseInt(document.getElementById('sa_transformer_count').value);
                const inputMode = document.querySelector('input[name="sa_input_mode"]:checked').value;
                
                let capacity, duration;
                
                if (inputMode === 'capacity') {
                    capacity = parseFloat(document.getElementById('sa_project_capacity').value);
                    if (!capacity || capacity <= 0) {
                        alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é¡¹ç›®å®¹é‡');
                        return;
                    }
                    duration = capacity / power;
                } else {
                    duration = parseFloat(document.getElementById('sa_system_duration').value);
                    capacity = power * duration;
                }
                
                // éªŒè¯è¾“å…¥
                if (!power || power <= 0) {
                    alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é¡¹ç›®åŠŸç‡');
                    return;
                }
                
                // åˆ¤æ–­ç³»ç»Ÿç±»å‹
                let systemType = systemTypeValue === '5mw' ? '5MW' : '7.5MW';
                
                // æ£€æŸ¥æ˜¯å¦æ˜¯æ ‡å‡†æ—¶é•¿
                const isStandardDuration = (Math.abs(duration - 2.0) < 0.01 || Math.abs(duration - 4.0) < 0.01);
                
                // åˆ¤æ–­æ˜¯å¦æ˜¯å°å‹é¡¹ç›®
                if (capacity < 50) {
                    // å°å‹é¡¹ç›®è®¡ç®—å…¬å¼ (å¤ç”¨è”åˆè®¡ç®—é€»è¾‘)
                    const storageAreaM2 = calculateSmallProjectArea(systemType, power, duration);
                    
                    // æ˜¾ç¤ºç»“æœï¼ˆå°å‹é¡¹ç›®æ¨¡å¼ï¼‰
                    displaySmallProjectResults(storageAreaM2);
                    
                    // å¦‚æœæ˜¯éæ ‡å‡†æ—¶é•¿ï¼Œæ›´æ–°æç¤ºä¿¡æ¯
                    if (!isStandardDuration) {
                        const resultsContainer = document.getElementById('standalone-area-results');
                        const notice = resultsContainer.querySelector('.model-accuracy-notice .notice-content');
                        if(notice) {
                            notice.innerHTML = '<strong style="color: #d32f2f;">âš ï¸ æ³¨æ„ï¼š</strong>å åœ°é¢ç§¯é¢„æµ‹ç›®å‰ä»…æ”¯æŒæ ‡å‡† 2h æˆ– 4h ç³»ç»Ÿã€‚å½“å‰ç»“æœä»…ä¾›å‚è€ƒã€‚';
                        }
                    }
                    return;
                }
                
                // è°ƒç”¨é¢„æµ‹å‡½æ•° (å¤§å‹é¡¹ç›®)
                try {
                    if (typeof window.predictLandAreaGBR !== 'function') {
                        alert('é¢„æµ‹æ¨¡å‹æœªåŠ è½½ï¼Œè¯·åˆ·æ–°é¡µé¢åé‡è¯•');
                        return;
                    }
                    
                    const result = window.predictLandAreaGBR(systemType, power, duration, capacity, transformerCount);
                    
                    // æ˜¾ç¤ºç»“æœ
                    displayStandaloneResults(result);
                    
                    // å¦‚æœæ˜¯éæ ‡å‡†æ—¶é•¿ï¼Œæ›´æ–°æç¤ºä¿¡æ¯
                    if (!isStandardDuration) {
                        const resultsContainer = document.getElementById('standalone-area-results');
                        const notice = resultsContainer.querySelector('.model-accuracy-notice .notice-content');
                        if(notice) {
                            notice.innerHTML = '<strong style="color: #d32f2f;">âš ï¸ æ³¨æ„ï¼š</strong>å åœ°é¢ç§¯é¢„æµ‹ç›®å‰ä»…æ”¯æŒæ ‡å‡† 2h æˆ– 4h ç³»ç»Ÿã€‚å½“å‰ç»“æœä»…ä¾›å‚è€ƒã€‚';
                        }
                    }
                    
                } catch (error) {
                    console.error('è®¡ç®—é”™è¯¯:', error);
                    alert('è®¡ç®—è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼š' + error.message);
                }
            });

            // é‡ç½®æŒ‰é’®
            const resetButton = document.getElementById('reset-area-button');
            resetButton.addEventListener('click', function() {
                document.getElementById('sa_project_power').value = '';
                document.getElementById('sa_project_capacity').value = '';
                document.getElementById('sa_system_type').value = '7.5mw';
                document.getElementById('sa_system_duration').value = '2';
                document.getElementById('sa_transformer_count').value = '1';
                document.querySelector('input[name="sa_input_mode"][value="capacity"]').checked = true;
                capacityInputGroup.style.display = 'block';
                durationInputGroup.style.display = 'none';
                document.getElementById('standalone-area-results').style.display = 'none';
                
                // æ¢å¤é»˜è®¤æç¤ºä¿¡æ¯
                const notice = document.querySelector('#standalone-area-results .model-accuracy-notice .notice-content');
                if(notice) notice.innerHTML = '<strong>æ¨¡å‹ç²¾åº¦è¯´æ˜ï¼š</strong>æœ¬æ¨¡å‹åŸºäºå†å²å·¥ç¨‹æ•°æ®è®­ç»ƒï¼Œå¹³å‡é¢„æµ‹è¯¯å·®çº¦ 1.7%ï¼Œæœ€å¤§åå·®çº¦ 6%ã€‚è€ƒè™‘åˆ°é¡¹ç›®åœ°å½¢ã€é“è·¯è§„åˆ’åŠè®¾å¤‡é€‰å‹çš„å·®å¼‚ï¼Œå»ºè®®åœ¨æœ€ç»ˆè§„åˆ’æ—¶é¢„ç•™ 10%-15% çš„ç”¨åœ°ä½™é‡ã€‚';
            });

            // æ˜¾ç¤ºç»“æœå‡½æ•° (å¤§å‹é¡¹ç›®)
            function displayStandaloneResults(result) {
                const resultsContainer = document.getElementById('standalone-area-results');
                const resultsGrid = document.getElementById('area-results-grid');
                
                const storageAreaM2 = result.storage;
                const substationAreaM2 = result.substation;
                const totalAreaM2 = result.total;
                
                const storageAreaMu = (storageAreaM2 * 0.0015).toFixed(2);
                const substationAreaMu = (substationAreaM2 * 0.0015).toFixed(2);
                const totalAreaMu = (totalAreaM2 * 0.0015).toFixed(2);
                
                // æ¢å¤æç¤ºä¿¡æ¯
                const notice = resultsContainer.querySelector('.model-accuracy-notice .notice-content');
                if(notice) notice.innerHTML = '<strong>æ¨¡å‹ç²¾åº¦è¯´æ˜ï¼š</strong>æœ¬æ¨¡å‹åŸºäºå†å²å·¥ç¨‹æ•°æ®è®­ç»ƒï¼Œå¹³å‡é¢„æµ‹è¯¯å·®çº¦ 1.7%ï¼Œæœ€å¤§åå·®çº¦ 6%ã€‚è€ƒè™‘åˆ°é¡¹ç›®åœ°å½¢ã€é“è·¯è§„åˆ’åŠè®¾å¤‡é€‰å‹çš„å·®å¼‚ï¼Œå»ºè®®åœ¨æœ€ç»ˆè§„åˆ’æ—¶é¢„ç•™ 10%-15% çš„ç”¨åœ°ä½™é‡ã€‚';

                // ç”Ÿæˆç»“æœ HTML (å®Œå…¨å¤ç”¨ metric-card æ ·å¼)
                resultsGrid.innerHTML = `
                    <div class="metric-card">
                        <h4>å‚¨èƒ½åŒºå åœ°é¢ç§¯</h4>
                        <p>${storageAreaM2.toFixed(2)} mÂ²</p>
                        <span>${storageAreaMu} äº©</span>
                    </div>
                    <div class="metric-card">
                        <h4>å‡å‹ç«™åŒºå åœ°é¢ç§¯</h4>
                        <p>${substationAreaM2.toFixed(2)} mÂ²</p>
                        <span>${substationAreaMu} äº©</span>
                    </div>
                    <div class="metric-card">
                        <h4>é¡¹ç›®æ€»å åœ°é¢ç§¯</h4>
                        <p>${totalAreaM2.toFixed(2)} mÂ²</p>
                        <span>${totalAreaMu} äº©</span>
                    </div>
                `;
                
                resultsContainer.style.display = 'block';
                resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            // æ˜¾ç¤ºç»“æœå‡½æ•° (å°å‹é¡¹ç›®)
            function displaySmallProjectResults(storageAreaM2) {
                const resultsContainer = document.getElementById('standalone-area-results');
                const resultsGrid = document.getElementById('area-results-grid');
                
                const storageAreaMu = (storageAreaM2 * 0.0015).toFixed(2);
                
                // æ›´æ–°æç¤ºä¿¡æ¯
                const notice = resultsContainer.querySelector('.model-accuracy-notice .notice-content');
                if(notice) notice.innerHTML = '<strong>å°å‹é¡¹ç›®è¯´æ˜ï¼š</strong>âœ“ å åœ°é¢ç§¯æ ¸ç®—å®Œæˆï¼ˆå°å‹é¡¹ç›®æ¨¡å¼ï¼Œä½“é‡ < 50MWhï¼‰\nğŸ’¡ ä»…åŒ…å«å‚¨èƒ½åŒºå åœ°é¢ç§¯ï¼ˆä¸å«ç¯å½¢é“è·¯ï¼‰ï¼Œä¸å«å‡å‹ç«™';

                resultsGrid.innerHTML = `
                    <div class="metric-card">
                        <h4>å‚¨èƒ½åŒºå åœ°é¢ç§¯ (ä¼°ç®—)</h4>
                        <p>${storageAreaM2.toFixed(2)} mÂ²</p>
                        <span>${storageAreaMu} äº©</span>
                    </div>
                    <div class="metric-card" style="opacity: 0.6; background: #f8f9fa;">
                        <h4>å‡å‹ç«™åŒºå åœ°é¢ç§¯</h4>
                        <p style="color: #999;">-</p>
                        <span style="color: #999;">-</span>
                    </div>
                    <div class="metric-card" style="opacity: 0.6; background: #f8f9fa;">
                        <h4>é¡¹ç›®æ€»å åœ°é¢ç§¯</h4>
                        <p style="color: #999;">-</p>
                        <span style="color: #999;">-</span>
                    </div>
                `;
                
                resultsContainer.style.display = 'block';
                resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        });
    </script>
</body>
</html>